{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/SoundModule/Analyser/Visualizer.js","webpack:///./src/SoundModule/Analyser/TimeOverview.js","webpack:///./src/SoundModule/Analyser/Time.js","webpack:///./src/SoundModule/Analyser/FFT.js","webpack:///./src/SoundModule/Analyser/index.js","webpack:///./src/SoundModule/Recorder.js","webpack:///./src/SoundModule/Session.js","webpack:///./src/SoundModule/Effectors/Effector.js","webpack:///./src/SoundModule/Effectors/Stereo.js","webpack:///./src/SoundModule/Effectors/Compressor.js","webpack:///./src/SoundModule/Effectors/Distortion.js","webpack:///./src/SoundModule/Effectors/Wah.js","webpack:///./src/SoundModule/Effectors/PitchShifter.js","webpack:///./src/SoundModule/Effectors/Equalizer.js","webpack:///./src/SoundModule/Effectors/Filter.js","webpack:///./src/SoundModule/Effectors/Autopanner.js","webpack:///./src/SoundModule/Effectors/AutopannerFallback.js","webpack:///./src/SoundModule/Effectors/Tremolo.js","webpack:///./src/SoundModule/Effectors/Ringmodulator.js","webpack:///./src/SoundModule/Effectors/Phaser.js","webpack:///./src/SoundModule/Effectors/Flanger.js","webpack:///./src/SoundModule/Effectors/Chorus.js","webpack:///./src/SoundModule/Effectors/Delay.js","webpack:///./src/SoundModule/Effectors/Reverb.js","webpack:///./src/SoundModule/Effectors/Panner.js","webpack:///./src/SoundModule/Effectors/Listener.js","webpack:///./src/SoundModule/Effectors/EnvelopeGenerator.js","webpack:///./src/SoundModule/index.js","webpack:///./src/OscillatorModule/Oscillator.js","webpack:///./src/OscillatorModule/Glide.js","webpack:///./src/OscillatorModule/index.js","webpack:///./src/OneshotModule/index.js","webpack:///./src/NoiseModule/index.js","webpack:///./src/AudioModule/VocalCanceler.js","webpack:///./src/AudioModule/index.js","webpack:///./src/MediaModule/index.js","webpack:///./src/StreamModule/NoiseGate.js","webpack:///./src/StreamModule/NoiseSuppressor.js","webpack:///./src/StreamModule/index.js","webpack:///./src/MixerModule/index.js","webpack:///./src/ProcessorModule/index.js","webpack:///./src/MIDI/index.js","webpack:///./src/MML/index.js","webpack:///./src/XSound/index.js","webpack:///./src/main.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","Visualizer","constructor","sampleRate","this","isActive","graphics","canvas","context","svg","interval","timerid","styles","setup","element","HTMLCanvasElement","CANVAS","getContext","SVGElement","SVG","param","k","String","replace","toLowerCase","v","undefined","parseFloat","shape","wave","grad","Array","isArray","isError","grads","offset","isNaN","toString","prop","test","font","parseInt","start","data","minDecibels","maxDecibels","drawOnCanvas","drawBySVG","toDataURL","outerHTML","state","Boolean","drawTimeDomainFloat32ArrayOnCanvas","innerWidth","innerHeight","middle","nPlotInterval","CanvasRenderingContext2D","Float32Array","w","h","strokeStyle","lineWidth","width","lineCap","cap","lineJoin","join","beginPath","len","length","x","left","y","top","moveTo","lineTo","stroke","fillStyle","upside","gradient","createLinearGradient","gradients","addColorStop","color","fillRect","drawTimeDomainFloat32ArrayBySVG","linearGradientId","path","document","createElementNS","XMLNS","setAttribute","defs","createSVGLinearGradient","g","appendChild","rect","linearGradient","stop","createFontString","size","style","family","clear","height","clearRect","innerHTML","TimeOverview","super","savedImage","currentTime","sprite","plotInterval","textInterval","isDown","DRAG_MODE_UPDATE","offsetX","startTime","endTime","arguments","DRAG_MODE_SPRITE","querySelector","SVG_SPRITE_CLASS_NAME","removeChild","right","bottom","Math","floor","nTextInterval","grid","text","fillText","measureText","texts","trim","getImageData","getAttribute","SVG_LINEAR_GRADIENT_ID_TIME_OVERVIEW","textContent","weight","classList","add","SVG_CURRENT_TIME_CLASS_NAME","update","time","ImageData","putImageData","baseX","abs","baseRect","lastElementChild","previousElementSibling","drag","callback","drawNode","move","end","navigator","userAgent","onStart","onMove","onEnd","removeEventListener","window","addEventListener","draw","event","type","offsetLeft","parentNode","Element","scrollLeft","getOffsetX","preventDefault","pageX","touches","Time","UINT","FLOAT","ceil","SVG_LINEAR_GRADIENT_ID_TIME","FFT","min","max","mindB","maxdB","range","drawnSize","fsDivN","f","slice","SVG_LINEAR_GRADIENT_ID_FFT","Analyser","analyser","createAnalyser","input","createGain","connect","timeOverviewL","timeOverviewR","fft","fftSize","smoothingTimeConstant","frequencyBinCount","domain","buffer","AudioBuffer","numberOfChannels","set","getChannelData","Uint8Array","getByteTimeDomainData","getFloatTimeDomainData","requestAnimationFrame","setTimeout","getByteFrequencyData","getFloatFrequencyData","cancelAnimationFrame","clearTimeout","toUpperCase","Recorder","bufferSize","numberOfInputs","numberOfOutputs","processor","createScriptProcessor","mixedLs","mixedRs","numberOfTracks","trackLs","trackRs","activeTrack","paused","gainL","gainR","ready","track","isTrack","onaudioprocess","inputLs","inputBuffer","inputRs","recordedLs","recordedRs","push","disconnect","getActiveTrack","flatTrack","channel","tracks","flattenTrack","j","mixTrack","mixes","currentBuffer","index","numberOfMaxBuffers","values","currentTrack","sum","num","mix","qbit","soundLs","soundRs","CHANNEL","QBIT","SIZE","CHUNK_SIZE","RIFF_CHUNK","RATE","BPS","DATA_SIZE","sounds","binary","pow","Int16Array","fromCharCode","base64","btoa","waves","blob","Blob","URL","createObjectURL","Session","sender","BUFFER_SIZE","receiver","websocket","tls","host","port","openCallback","closeCallback","errorCallback","properties","open","close","error","scheme","charAt","WebSocket","binaryType","onopen","onclose","onerror","onmessage","ArrayBuffer","total","byteLength","BYTES_PER_ELEMENT","bufferLs","bufferRs","outputLs","outputBuffer","outputRs","destination","isConnected","bufferedAmount","send","readyState","OPEN","stateCallback","waitCallback","intervalid","setInterval","clearInterval","Effector","output","lfo","createOscillator","depth","rate","frequency","noteOn","noteOff","isStop","stopTime","releaseTime","params","toJSON","JSON","stringify","Stereo","splitter","createChannelSplitter","merger","delayL","createDelay","MAX_DELAY_TIME","delayR","delayTime","Compressor","compressor","createDynamicsCompressor","threshold","knee","ratio","attack","release","Distortion","distortion","createWaveShaper","drive","createBiquadFilter","tone","CLEAN","amount","numberOfSamples","gain","BANDPASS","Q","SQRT1_2","LOWPASS","curve","createCurve","CRUNCH","OVERDRIVE","DISTORTION","FUZZ","curves","a","abx","exp","Wah","autoWah","lowpass","envelopeFollower","sensitivity","depthRate","PitchShifter","reals","imags","pow2","indexes","numberOfStages","log2","stage","rest","areal","aimag","breal","bimag","creal","cos","PI","cimag","sin","real","imag","pitch","realLs","realRs","imagLs","imagRs","arealLs","arealRs","aimagLs","aimagRs","eq","IFFT","Equalizer","bass","treble","presence","LOWSHELF","PEAKING","HIGHSHELF","Filter","filter","setTargetAtTime","setTargetValueAtTime","maxFrequency","decay","sustain","FILTER_TYPES","t0","t1","t2","t2Value","minFrequnecy","cancelScheduledValues","setValueAtTime","linearRampToValueAtTime","t3","t4","Autopanner","panner","createStereoPanner","pan","AutopannerFallback","amplitudeL","amplitudeR","createChannelMerger","lfoSplitter","inputs","Tremolo","amplitude","WAVE_TYPES","Ringmodulator","Phaser","filters","MAXIMUM_STAGES","ALLPASS","feedback","Flanger","delay","Chorus","Delay","dry","wet","Reverb","rirs","convolver","createConvolver","impulse","successCallback","decodeAudioData","preset","timeout","progressCallback","success","progress","load","url","xhr","XMLHttpRequest","ontimeout","ERROR_AJAX_TIMEOUT","onprogresss","abort","ERROR_AJAX","onload","status","arrayBuffer","response","decodeSuccessCallback","audioBuffer","decodeErrorCallback","ERROR_DECODE","responseType","Panner","createPanner","positions","orientations","refDistance","maxDistance","rolloffFactor","coneInnerAngle","coneOuterAngle","coneOuterGain","panningModel","HRTF","distanceModel","INVERSE_DISTANCE","positionX","AudioParam","positionY","positionZ","z","setPosition","orientationX","orientationY","orientationZ","setOrientation","PANNING_MODELS","DISTANCE_MODELS","Listener","listener","forwards","ups","forwardX","forwardY","forwardZ","upX","upY","upZ","EnvelopeGenerator","generators","activeIndexes","activeCounter","AudioNode","activeIndex","useCurve","setValueCurveAtTime","getGenerator","setGenerator","counter","MIN_GAIN","isDisconnect","generator","SoundModule","init","mastervolume","recorder","session","forEach","NUMBER_OF_INPUTS","NUMBER_OF_OUTPUTS","stereo","wah","pitchshifter","equalizer","autopanner","tremolo","ringmodulator","phaser","flanger","chorus","reverb","envelopegenerator","resize","getBufferSize","install","effector","every","source","connects","on","off","Oscillator","setPeriodicWave","setWaveTable","volume","octave","fine","customs","MAX_SIZE","subarray","periodicWave","createPeriodicWave","OCTAVE","detune","Glide","frequencies","LINEAR","EXPONENTIAL","diff","oscillator","OscillatorModule","sources","times","isAnalyser","glide","states","st","sp","processCallback","OneshotModule","resources","buffers","volumes","isStops","settings","transpose","loop","onprogress","selectedIndex","bufferIndex","playbackRate","loopStart","loopEnd","AudioBufferSourceNode","createBufferSource","noteGrainOn","onended","oneshot","reset","NoiseModule","WHITE_NOISE","PINK_NOISE","BROWNIAN_NOISE","lastOut","random","b0","b1","b2","b3","b4","b5","b6","white","VocalCanceler","dataL","dataR","AudioModule","callbacks","vocalcanceler","duration","decode","toggle","ended","isBuffer","isSource","isPaused","fadeIn","fadeOut","sprites","dataLs","dataRs","keys","reduce","audioBuffers","spritedDataLs","spritedDataRs","createBuffer","copyToChannel","audio","MediaModule","media","ext","mse","sb","file","mimeType","controls","muted","autoplay","listeners","formats","HTMLAudioElement","AUDIO","HTMLVideoElement","VIDEO","format","canPlayType","MediaElementAudioSourceNode","createMediaElementSource","src","resume","then","catch","Error","loadstart","pause","HTMLMediaElement","isFinite","channelCount","endOfStream","revokeObjectURL","onSourceOpen","onSourceEnded","onSourceClose","onSourceBufferUpdateEnd","onSourceBufferError","MediaSource","isTypeSupported","removeAttribute","indexOf","message","position","play","pos","Promise","resolve","reject","isMedia","addSourceBuffer","sourceopen","request","Request","fetch","appendBuffer","sourceended","sourceclose","updateend","requestPictureInPicture","pictureInPictureEnabled","disablePictureInPicture","pictureInPictureElement","exitPictureInPicture","NoiseGate","level","NoiseSuppressor","outputs","xreals","ximags","yreals","yimags","amplitudes","phases","sqrt","atan2","StreamModule","constraints","noisegate","noisesuppressor","streamCallback","stream","mediaDevices","getUserMedia","createMediaStreamSource","isStreaming","MixerModule","ProcessorModule","ScriptProcessorNode","AudioWorkletNode","MIDI","midiAccess","sysex","requestMIDIAccess","inputIterator","outputIterator","next","done","MML","sequences","timerids","prev","mmls","OscillatorNode","notes","shift","match","REGEXP_MML","ERROR_STRING","timeOf4note","note","REGEXP_TEMPO","bpm","ERROR_TEMPO","ONE_MINUTES","REGEXP_OCTAVE","ERROR_OCTAVE","REGEXP_NOTE","chord","REGEXP_CHORD","pitchname","computeIndex","EQUAL_TEMPERAMENT","ERROR_NOTE","REST","computeFrequency","durations","split","REGEXP_DURATION","numOf4note","QUARTER_NOTE","reverse","part","sequence","pop","node","isSequences","toABC","mml","X","T","M","L","K","abc","totalDuration","splittedNotes","splittedNote","matches","tuplet","chordLength","restNote","read","reader","FileReader","code","NOT_FOUND_ERR","SECURITY_ERR","ABORT_ERR","NOT_READABLE_ERR","ENCODING_ERR","result","readAsArrayBuffer","readAsDataURL","readAsText","computedIndex","MIN_A","FREQUENCY_RATIO","global","XSound","AudioContext","webkitAudioContext","WebkitMediaSource","webkitURL","mozURL","webkitRequestAnimationFrame","mozRequestAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","IS_XSOUND","audiocontext","createJavaScriptNode","createGainNode","createDelayNode","createWaveTable","SAMPLE_RATE","ajax","convertTime","exitFullscreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen","cancelFullScreen","Event","stopPropagation","dataTransfer","files","target","File","requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen","toFrequencies","toTextFile","string","converted","charCode","charCodeAt","toAscii","clone","clones","C","free","sourceList","noConflict","deep","getCurrentTime"],"mappings":"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","file":"xsound.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/build/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","'use strict';\n\n/**\n * This private class defines the properties that subclasses (`TimeOverview`, `Time`, `FFT`) require.\n * @constructor\n */\nexport class Visualizer {\n    static CANVAS = 'canvas';\n    static SVG    = 'svg';\n\n    static XMLNS = 'http://www.w3.org/2000/svg';\n    static XLINK = 'http://www.w3.org/1999/xlink';\n\n    static SVG_LINEAR_GRADIENT_ID_TIME_OVERVIEW = 'svg-linear-gradient-time-overview';\n    static SVG_LINEAR_GRADIENT_ID_TIME          = 'svg-linear-gradient-time';\n    static SVG_LINEAR_GRADIENT_ID_FFT           = 'svg-linear-gradient-fft';\n\n    /**\n     * @param {number} sampleRate This argument is sample rate.\n     */\n    constructor(sampleRate) {\n        this.sampleRate = sampleRate;\n\n        this.isActive = false;\n\n        // either 'canvas' or 'svg'\n        this.graphics = '';\n\n        // in the case of using Canvas\n        this.canvas  = null;\n        this.context = null;\n\n        // in the case of using SVG\n        this.svg = null;\n\n        // for timer\n        this.interval = 1000;\n        this.timerid  = null;\n\n        this.styles = {\n            'shape'  : 'line',\n            'grad'   : [\n                {\n                    'offset' : 0,\n                    'color'  : 'rgba(0, 128, 255, 1.0)'\n                },\n                {\n                    'offset' : 1,\n                    'color'  : 'rgba(0, 0, 255, 1.0)'\n                }\n            ],\n            'wave'   : 'rgba(0, 0, 255, 1.0)',\n            'grid'   : 'rgba(255, 0, 0, 1.0)',\n            'text'   : 'rgba(255, 255, 255, 1.0)',\n            'font'   : {\n                'family' : 'Arial',\n                'size'   : '13px',\n                'style'  : 'normal'\n            },\n            'width'  : 1.5,\n            'cap'    : 'round',\n            'join'   : 'miter',\n            'top'    : 15,\n            'right'  : 30,\n            'bottom' : 15,\n            'left'   : 30\n        };\n    }\n\n    /**\n     * This method sets up for using Canvas or SVG.\n     * @param {HTMLCanvasElement|SVGElement} element This argument is either `HTMLCanvasElement` or `SVGElement`.\n     * @return {Visualizer} This is returned for method chain.\n     */\n    setup(element) {\n        if (element instanceof HTMLCanvasElement) {\n            this.graphics = Visualizer.CANVAS;\n            this.canvas   = element;\n            this.context  = this.canvas.getContext('2d');\n        } else if (element instanceof SVGElement) {\n            this.graphics = Visualizer.SVG;\n            this.svg      = element;\n\n            // this.svg.setAttribute('xmlns',       Visualizer.XMLNS);\n            // this.svg.setAttribute('xmlns:xlink', Visualizer.XLINK);\n        }\n\n        return this;\n    }\n\n    /**\n     * This method is getter or setter for parameters.\n     * @param {string|object} key This argument is property name in the case of string type.\n     *     This argument is pair of property and value in the case of associative array.\n     * @param {string|number|Array.<object>} value This argument is the value of designated property. If this argument is omitted, This method is getter.\n     * @return {string|number|Array.<object>} This is returned as the value of designated property in the case of getter.\n     */\n    param(key, value) {\n        const k = String(key).replace(/-/g, '').toLowerCase();\n\n        let v = null;\n\n        switch (k) {\n            case 'interval':\n                if (value === undefined) {\n                    return this.interval;\n                }\n\n                if (String(value).toLowerCase() === 'auto') {\n                    this.interval = 'auto';\n                } else {\n                    v = parseFloat(value);\n\n                    if (v >= 0) {\n                        this.interval = v;\n                    }\n                }\n\n                break;\n            case 'shape':\n                if (value === undefined) {\n                    return this.styles.shape;\n                }\n\n                v = String(value).toLowerCase();\n\n                if ((v === 'line') || (v === 'rect')) {\n                    this.styles.shape = (this.styles.wave !== 'gradient') ? v : 'rect';\n                }\n\n                break;\n            case 'grad':\n                if (value === undefined) {\n                    return this.styles.grad;\n                }\n\n                if (!Array.isArray(value)) {\n                    value = [value];\n                }\n\n                let isError = false;\n\n                for (const grads of value) {\n                    if (('offset' in grads) && ('color' in grads)) {\n                        const offset = parseFloat(grads.offset);\n\n                        if (isNaN(offset) || (offset < 0) || (offset > 1)) {\n                            isError = true;\n                            break;\n                        }\n                    } else {\n                        isError = true;\n                        break;\n                    }\n                }\n\n                if (!isError) {\n                    this.styles.grad = value;\n                }\n\n                break;\n            case 'font':\n                if (value === undefined) {\n                    return this.styles[k];\n                }\n\n                if (Object.prototype.toString.call(value) === '[object Object]') {\n                    for (const prop in value) {\n                        if (/(?:family|size|style)/i.test(prop)) {\n                            this.styles.font[prop] = String(value[prop]);\n                        }\n                    }\n                }\n\n                break;\n            case 'wave':\n            case 'grid':\n            case 'text':\n            case 'cap' :\n            case 'join':\n                if (value === undefined) {\n                    return this.styles[k];\n                }\n\n                if (typeof value === 'string') {\n                    if ((k === 'wave') && (value === 'gradient')) {\n                        this.styles.shape = 'rect';\n                    }\n\n                    this.styles[k] = value.toLowerCase();\n                }\n\n                break;\n            case 'width' :\n            case 'top'   :\n            case 'right' :\n            case 'bottom':\n            case 'left'  :\n                if (value === undefined) {\n                    return this.styles[k];\n                }\n\n                v = (k === 'width') ? parseFloat(value) : parseInt(value, 10);\n\n                if (v >= 0) {\n                    this.styles[k] = v;\n                }\n\n                break;\n            default:\n                break;\n        }\n    }\n\n    /**\n     * This method draws sound wave to Canvas or SVG. This method conceals difference of API for drawing.\n     * @param {Uint8Array|Float32Array} data This argument is data for drawing.\n     * @param {number} minDecibels This argument is parameter for spectrum. The default value is -100 dB.\n     * @param {number} maxDecibels This argument is parameter for spectrum. The default value is -30 dB.\n     * @return {Visualizer} This is returned for method chain.\n     */\n    start(data, minDecibels, maxDecibels) {\n        switch (this.graphics) {\n            case Visualizer.CANVAS:\n                this.drawOnCanvas(data, minDecibels, maxDecibels);\n                break;\n            case Visualizer.SVG:\n                this.drawBySVG(data, minDecibels, maxDecibels);\n                break;\n            default:\n                break;\n        }\n\n        return this;\n    }\n\n    /**\n     * This method creates string for `Data URL` or `HTML` for the drawn figure.\n     * @return {string|Visualizer} This is returned as `Data URL` or `HTML` string. If `setup` method has not been invoked, this is returned for method chain.\n     */\n    create() {\n        switch (this.graphics) {\n            case Visualizer.CANVAS:\n                return this.canvas.toDataURL('image/png').replace('image/png', 'image/octet-stream');\n            case Visualizer.SVG:\n                return this.svg.outerHTML;\n            default:\n                return this;\n        }\n    }\n\n    /**\n     * This method toggles active state or inactive state.\n     * @param {boolean|string} state If this argument is boolean, state is changed the designated.\n     *     If this argument is 'toggle', state is changed automatically.\n     *     If this argument is omitted, this method is getter.\n     * @return {boolean|Visualizer} This is returned as current state. Otherwise, this is returned for method chain.\n     */\n    state(state) {\n        if (state === undefined) {\n            return this.isActive;\n        }\n\n        if (String(state).toLowerCase() === 'toggle') {\n            this.isActive = !this.isActive;\n        } else {\n            this.isActive = Boolean(state);\n        }\n\n        return this;\n    }\n\n    /**\n     * This method draws time domain data of `Float32Array` to Canvas.\n     * @param {CanvasRenderingContext2D} context This argument is the instance of `CanvasRenderingContext2D`.\n     * @param {Float32Array} data This argument is time domain data.\n     * @param {number} innerWidth This argument is the width of drawing area.\n     * @param {number} innerHeight This argument is the height of drawing area.\n     * @param {number} middle This argument is the middle of drawing area.\n     * @param {number} nPlotInterval This argument is the interval of drawing.\n     */\n    drawTimeDomainFloat32ArrayOnCanvas(context, data, innerWidth, innerHeight, middle, nPlotInterval) {\n        if (!(context instanceof CanvasRenderingContext2D)) {\n            return this;\n        }\n\n        if (!(data instanceof Float32Array)) {\n            return this;\n        }\n\n        let w = parseInt(innerWidth, 10);\n        let h = parseInt(innerHeight, 10);\n        let m = parseInt(middle, 10);\n\n        if (isNaN(w)) { w = 0; }\n        if (isNaN(h)) { h = 0; }\n        if (isNaN(m)) { m = 0; }\n\n        // Begin drawing\n        switch (this.styles.shape) {\n            case 'line':\n                // Set style\n                context.strokeStyle = this.styles.wave;\n                context.lineWidth   = this.styles.width;\n                context.lineCap     = this.styles.cap;\n                context.lineJoin    = this.styles.join;\n\n                // Draw wave\n                context.beginPath();\n\n                for (let i = 0, len = data.length; i < len; i++) {\n                    if ((nPlotInterval === null) || (nPlotInterval === undefined) || ((i % nPlotInterval) === 0)) {\n                        const x = ((i / len) * w) + this.styles.left;\n                        const y = ((1 - data[i]) * (h / 2)) + this.styles.top;\n\n                        if (i === 0) {\n                            context.moveTo((x + (this.styles.width / 2)),  y);\n                        } else {\n                            context.lineTo(x, y);\n                        }\n                    }\n                }\n\n                context.stroke();\n\n                break;\n            case 'rect':\n                // Set style\n                if (this.styles.wave !== 'gradient') {\n                    context.fillStyle = this.styles.wave;\n                }\n\n                // Draw wave\n                for (let i = 0, len = data.length; i < len; i++) {\n                    if ((nPlotInterval === null) || (nPlotInterval === undefined) || ((i % nPlotInterval) === 0)) {\n                        const x = ((i / len) * w) + this.styles.left;\n                        const y = -1 * (data[i] * (h / 2));\n\n                        // Set style\n                        if (this.styles.wave === 'gradient') {\n                            const upside   = (innerHeight / 2) + this.styles.top;\n                            const gradient = context.createLinearGradient(0, upside, 0, (upside + y));\n\n                            for (const gradients of this.styles.grad) {\n                                gradient.addColorStop(gradients.offset, gradients.color);\n                            }\n\n                            context.fillStyle = gradient;\n                        }\n\n                        context.fillRect(x, m, this.styles.width, y);\n                    }\n                }\n\n                break;\n            default:\n                break;\n        }\n\n        return this;\n    }\n\n    /**\n     * This method draws time domain data of `Float32Array` to SVG.\n     * @param {Float32Array} data This argument is time domain data.\n     * @param {number} innerWidth This argument is the width of drawing area.\n     * @param {number} innerHeight This argument is the height of drawing area.\n     * @param {number} middle This argument is the middle of drawing area.\n     * @param {number} nPlotInterval This argument is the interval of drawing.\n     * @param {string} linearGradientId This argument is id attribute for `SVGLinearGradientElement`.\n     * @return {SVGPathElement|SVGGElement} This is returned as `SVGElement`.\n     */\n    drawTimeDomainFloat32ArrayBySVG(data, innerWidth, innerHeight, middle, nPlotInterval, linearGradientId) {\n        let w = parseInt(innerWidth, 10);\n        let h = parseInt(innerHeight, 10);\n        let m = parseInt(middle, 10);\n\n        if (isNaN(w)) { w = 0; }\n        if (isNaN(h)) { h = 0; }\n        if (isNaN(m)) { m = 0; }\n\n        switch (this.styles.shape) {\n            case 'line':\n                // Draw wave\n                const path = document.createElementNS(Visualizer.XMLNS, 'path');\n\n                let d = '';\n\n                for (let i = 0, len = data.length; i < len; i++) {\n                    if ((nPlotInterval === null) || (nPlotInterval === undefined) || ((i % nPlotInterval) === 0)) {\n                        const x = ((i / len) * w) + this.styles.left;\n                        const y = ((1 - data[i]) * (h / 2)) + this.styles.top;\n\n                        if (i === 0) {\n                            d += `M${x + (this.styles.width / 2)} ${y}`;\n                        } else {\n                            d += ` L${x} ${y}`;\n                        }\n                    }\n                }\n\n                path.setAttribute('d', d);\n\n                path.setAttribute('stroke',          this.styles.wave);\n                path.setAttribute('fill',            'none');\n                path.setAttribute('stroke-width',    this.styles.width);\n                path.setAttribute('stroke-linecap',  this.styles.cap);\n                path.setAttribute('stroke-linejoin', this.styles.join);\n\n                return path;\n            case 'rect':\n                let defs = null;\n\n                if (this.styles.wave === 'gradient') {\n                    defs = this.createSVGLinearGradient(linearGradientId);\n                }\n\n                // Draw wave\n                const g = document.createElementNS(Visualizer.XMLNS, 'g');\n\n                if (defs !== null) {\n                    g.appendChild(defs);\n                }\n\n                for (let i = 0, len = data.length; i < len; i++) {\n                    if ((nPlotInterval === null) || (nPlotInterval === undefined) || ((i % nPlotInterval) === 0)) {\n                        const rect = document.createElementNS(Visualizer.XMLNS, 'rect');\n\n                        const x = ((i / len) * w) + this.styles.left;\n                        const y = data[i] * (innerHeight / 2);\n\n                        rect.setAttribute('x',     x);\n                        rect.setAttribute('y',     m);\n                        rect.setAttribute('width', this.styles.width);\n\n                        if (y < 0) {\n                            rect.setAttribute('height', -y);\n                        } else {\n                            rect.setAttribute('height',    y);\n                            rect.setAttribute('transform', `rotate(180 ${x + (this.styles.width / 2)} ${m})`);\n                        }\n\n                        rect.setAttribute('stroke', 'none');\n                        rect.setAttribute('fill',   (defs === null) ? this.styles.wave : `url(#${linearGradientId})`);\n\n                        g.appendChild(rect);\n                    }\n                }\n\n                return g;\n            default:\n                return null;\n        }\n    }\n\n    /**\n     * This method creates elements for SVG linear gradient.\n     * @param {string} linearGradientId This argument is id attribute for `SVGLinearGradientElement`.\n     * @return {SVGDefsElement} This is returned as the instance of `SVGDefsElement`.\n     */\n    createSVGLinearGradient(linearGradientId) {\n        const defs           = document.createElementNS(Visualizer.XMLNS, 'defs');\n        const linearGradient = document.createElementNS(Visualizer.XMLNS, 'linearGradient');\n\n        linearGradient.setAttribute('id', String(linearGradientId));\n        linearGradient.setAttribute('x1', '0%');\n        linearGradient.setAttribute('y1', '0%');\n        linearGradient.setAttribute('x2', '0%');\n        linearGradient.setAttribute('y2', '100%');\n\n        for (const gradients of this.styles.grad) {\n            const stop = document.createElementNS(Visualizer.XMLNS, 'stop');\n\n            stop.setAttribute('offset',     gradients.offset);\n            stop.setAttribute('stop-color', gradients.color);\n\n            linearGradient.appendChild(stop);\n        }\n\n        defs.appendChild(linearGradient);\n\n        return defs;\n    }\n\n    /**\n     * This method creates string for font.\n     * @return {string} This is returned as string for font.\n     */\n    createFontString() {\n        const { size, style, family } = this.styles.font;\n\n        return `${style} ${size} \"${family}\"`;\n    }\n\n    /** @abstract */\n    drawOnCanvas() {\n    }\n\n    /** @abstract */\n    drawBySVG() {\n    }\n\n    /**\n     * This method clears graphics.\n     */\n    clear() {\n        if (this.context) {\n            const { width, height } = this.canvas;\n\n            this.context.clearRect(0, 0, width, height);\n        }\n\n        if (this.svg) {\n            this.svg.innerHTML = '';\n        }\n\n        return this;\n    }\n\n    /** @override */\n    toString() {\n        return '[SoundModule Analyser Visualizer]';\n    }\n}\n","'use strict';\n\nimport { Visualizer } from './Visualizer';\n\n/**\n * This private class defines properties for drawing audio wave in overview of time domain.\n * @constructor\n * @extends {Visualizer}\n */\nexport class TimeOverview extends Visualizer {\n    static SVG_CURRENT_TIME_CLASS_NAME = 'xsound-svg-current-time';\n    static SVG_SPRITE_CLASS_NAME       = 'xsound-svg-sprite';\n    static DRAG_MODE_UPDATE = 'update';\n    static DRAG_MODE_SPRITE = 'sprite';\n\n    /**\n     * @param {number} sampleRate This argument is sample rate.\n     */\n    constructor(sampleRate) {\n        super(sampleRate);\n\n        // for `TimeOverview#update`, `TimeOverview#drag`\n        this.savedImage = null;\n        this.length     = 0;\n\n        this.currentTime  = 'rgba(0, 0, 0, 0.5)';         // This style is used for the rectangle that displays current time of audio\n        this.sprite       = 'rgba(255, 255, 255, 0.25)';  // This style is used for the rectangle that displays sprite range\n        this.plotInterval = 0.0625;                       // Draw wave at intervals of this value [sec]\n        this.textInterval = 60;                           // Draw text at intervals of this value [sec]\n\n        this.isDown = false;\n\n        this.mode = TimeOverview.DRAG_MODE_UPDATE;  // or 'sprite'\n\n        // for Audio Sprite\n        this.offsetX   = 0;\n        this.startTime = 0;\n        this.endTime   = 0;\n    }\n\n    /** @override */\n    param(key, value) {\n        if (Object.prototype.toString.call(arguments[0]) === '[object Object]') {\n            // Associative array\n            for (const k in arguments[0]) {\n                this.param(k, arguments[0][k]);\n            }\n        } else {\n            const k = String(key).replace(/-/g, '').toLowerCase();\n\n            const r = super.param(k, value);\n\n            if (r !== undefined) {\n                return r;\n            }\n\n            let v = null;\n\n            switch (k) {\n                case 'currenttime':\n                    if (value === undefined) {\n                        return this.currentTime;\n                    }\n\n                    this.currentTime = String(value).toLowerCase();\n\n                    break;\n                case 'sprite':\n                    if (value === undefined) {\n                        return this.sprite;\n                    }\n\n                    this.sprite = String(value).toLowerCase();\n\n                    break;\n                case 'plotinterval':\n                case 'textinterval':\n                    if (value === undefined) {\n                        return this[k.replace('interval', 'Interval')];\n                    }\n\n                    v = parseFloat(value);\n\n                    if (v > 0) {\n                        this[k.replace('interval', 'Interval')] = v;\n                    }\n\n                    break;\n                case 'mode':\n                    if (value === undefined) {\n                        return this.mode;\n                    }\n\n                    v = String(value).toLowerCase();\n\n                    if ((v === TimeOverview.DRAG_MODE_UPDATE) || (v === TimeOverview.DRAG_MODE_SPRITE)) {\n                        this.mode = v;\n\n                        // Clear for Audio Sprite\n                        this.offsetX   = 0;\n                        this.startTime = 0;\n                        this.endTime   = 0;\n\n                        if (this.svg instanceof SVGElement) {\n                            const rect = this.svg.querySelector(`.${TimeOverview.SVG_SPRITE_CLASS_NAME}`);\n\n                            if (rect instanceof SVGElement) {\n                                this.svg.removeChild(rect);\n                            }\n                        }\n                    }\n\n                    break;\n                default:\n                    break;\n            }\n        }\n\n        return this;\n    }\n\n    /**\n     * This method draws audio wave in overview of time domain to Canvas.\n     * @param {Float32Array} data This argument is data for drawing.\n     * @return {TimeOverview} This is returned for method chain.\n     * @override\n     */\n    drawOnCanvas(data) {\n        if (!((this.canvas instanceof HTMLCanvasElement) && this.isActive)) {\n            return this;\n        }\n\n        const context = this.context;\n\n        const { width, height } = this.canvas;\n\n        const innerWidth  = width  - (this.styles.left + this.styles.right);\n        const innerHeight = height - (this.styles.top  + this.styles.bottom);\n        const middle      = Math.floor(innerHeight / 2) + this.styles.top;\n\n        // Draw wave at intervals of `this.plotInterval`\n        const nPlotInterval = Math.floor(this.plotInterval * this.sampleRate);\n\n        // Draw text at intervals of `this.textInterval`\n        const nTextInterval = Math.floor(this.textInterval * this.sampleRate);\n\n        // Erase previous wave\n        context.clearRect(0, 0, width, height);\n\n        // Begin drawing\n        this.drawTimeDomainFloat32ArrayOnCanvas(context, data, innerWidth, innerHeight, middle, nPlotInterval);\n\n        if ((this.styles.grid !== 'none') || (this.styles.text !== 'none')) {\n            // Draw grid and text (X axis)\n            for (let i = 0, len = data.length; i < len; i++) {\n                if ((i % nTextInterval) === 0) {\n                    const x = Math.floor((i / len) * innerWidth) + this.styles.left;\n                    const t = `${Math.floor((i / this.sampleRate) / 60)} min`;\n\n                    // Draw grid\n                    if (this.styles.grid !== 'none') {\n                        context.fillStyle = this.styles.grid;\n                        context.fillRect(x, this.styles.top, 1, innerHeight);\n                    }\n\n                    // Draw text\n                    if (this.styles.text !== 'none') {\n                        context.fillStyle = this.styles.text;\n                        context.font      = this.createFontString();\n                        context.fillText(t, (x - (context.measureText(t).width / 2)), (this.styles.top + innerHeight + parseInt(this.styles.font.size, 10)));\n                    }\n                }\n            }\n\n            // Draw grid and text (Y axis)\n            const texts = ['-1.00', '-0.50', ' 0.00', ' 0.50', ' 1.00'];\n\n            for (const t of texts) {\n                const x = Math.floor(this.styles.left - context.measureText(t).width);\n                const y = Math.floor((1 - parseFloat(t.trim())) * (innerHeight / 2)) + this.styles.top;\n\n                // Draw grid\n                if (this.styles.grid !== 'none') {\n                    context.fillStyle = this.styles.grid;\n                    context.fillRect(this.styles.left, y, innerWidth, 1);\n                }\n\n                // Draw text\n                if (this.styles.text !== 'none') {\n                    context.fillStyle = this.styles.text;\n                    context.font      = this.createFontString();\n                    context.fillText(t, x, (y - Math.floor(parseInt(this.styles.font.size, 10) / 4)));\n                }\n            }\n        }\n\n        // for `TimeOverview#update`, `TimeOverview#drag`\n        this.savedImage = context.getImageData(0, 0, width, height);\n        this.length     = data.length;\n\n        // This rectangle displays current time of audio\n        context.fillStyle = this.currentTime;\n        context.fillRect(this.styles.left, this.styles.top, 1, innerHeight);\n\n        return this;\n    }\n\n    /**\n     * This method draws audio wave in overview of time domain to SVG.\n     * @param {Float32Array} data This argument is data for drawing.\n     * @return {TimeOverview} This is returned for method chain.\n     * @override\n     */\n    drawBySVG(data) {\n        if (!((this.svg instanceof SVGElement) && this.isActive)) {\n            return this;\n        }\n\n        const svg = this.svg;\n\n        const width       = parseInt(svg.getAttribute('width'), 10);\n        const height      = parseInt(svg.getAttribute('height'), 10);\n        const innerWidth  = width  - (this.styles.left + this.styles.right);\n        const innerHeight = height - (this.styles.top  + this.styles.bottom);\n        const middle      = Math.floor(innerHeight / 2) + this.styles.top;\n\n        // Draw wave at intervals of `this.plotInterval`\n        const nPlotInterval = Math.floor(this.plotInterval * this.sampleRate);\n\n        // Draw text at intervals of `this.textInterval`\n        const nTextInterval = Math.floor(this.textInterval * this.sampleRate);\n\n        // Erase previous wave\n        svg.innerHTML = '';\n\n        // Begin drawing\n        svg.appendChild(this.drawTimeDomainFloat32ArrayBySVG(data, innerWidth, innerHeight, middle, nPlotInterval, Visualizer.SVG_LINEAR_GRADIENT_ID_TIME_OVERVIEW));\n\n        if ((this.styles.grid !== 'none') || (this.styles.text !== 'none')) {\n            // Draw grid and text (X axis)\n            for (let i = 0, len = data.length; i < len; i++) {\n                if ((i % nTextInterval) === 0) {\n                    const x = Math.floor((i / len) * innerWidth) + this.styles.left;\n                    const t = Math.floor((i / this.sampleRate) / 60) + ' min';\n\n                    // Draw grid\n                    if (this.styles.grid !== 'none') {\n                        const rect = document.createElementNS(Visualizer.XMLNS, 'rect');\n\n                        rect.setAttribute('x',      x);\n                        rect.setAttribute('y',      this.styles.top);\n                        rect.setAttribute('width',  1);\n                        rect.setAttribute('height', innerHeight);\n\n                        rect.setAttribute('stroke', 'none');\n                        rect.setAttribute('fill',   this.styles.grid);\n\n                        svg.appendChild(rect);\n                    }\n\n                    // Draw text\n                    if (this.styles.text !== 'none') {\n                        const text = document.createElementNS(Visualizer.XMLNS, 'text');\n\n                        text.textContent = t;\n\n                        text.setAttribute('x', x);\n                        text.setAttribute('y', (this.styles.top + innerHeight + parseInt(this.styles.font.size, 10)));\n\n                        text.setAttribute('text-anchor', 'middle');\n                        text.setAttribute('stroke',      'none');\n                        text.setAttribute('fill',        this.styles.text);\n                        text.setAttribute('font-family', this.styles.font.family);\n                        text.setAttribute('font-size',   this.styles.font.size);\n                        text.setAttribute('font-style',  this.styles.font.style);\n                        text.setAttribute('font-weight', this.styles.font.weight);\n\n                        svg.appendChild(text);\n                    }\n                }\n            }\n\n            // Draw grid and text (Y axis)\n            const texts = ['-1.00', '-0.50', ' 0.00', ' 0.50', ' 1.00'];\n\n            for (const t of texts) {\n                const x = this.styles.left;\n                const y = Math.floor((1 - parseFloat(t.trim())) * (innerHeight / 2)) + this.styles.top;\n\n                // Draw grid\n                if (this.styles.grid !== 'none') {\n                    const rect = document.createElementNS(Visualizer.XMLNS, 'rect');\n\n                    rect.setAttribute('x',      x);\n                    rect.setAttribute('y',      y);\n                    rect.setAttribute('width',  innerWidth);\n                    rect.setAttribute('height', 1);\n\n                    rect.setAttribute('stroke', 'none');\n                    rect.setAttribute('fill',   this.styles.grid);\n\n                    svg.appendChild(rect);\n                }\n\n                // Draw text\n                if (this.styles.text !== 'none') {\n                    const text = document.createElementNS(Visualizer.XMLNS, 'text');\n\n                    text.textContent = t;\n\n                    text.setAttribute('x', x);\n                    text.setAttribute('y', (y - Math.floor(parseInt(this.styles.font.size, 10) / 4)));\n\n                    text.setAttribute('text-anchor', 'end');\n                    text.setAttribute('stroke',      'none');\n                    text.setAttribute('fill',        this.styles.text);\n                    text.setAttribute('font-family', this.styles.font.family);\n                    text.setAttribute('font-size',   this.styles.font.size);\n                    text.setAttribute('font-style',  this.styles.font.style);\n                    text.setAttribute('font-weight', this.styles.font.weight);\n\n                    svg.appendChild(text);\n                }\n            }\n        }\n\n        // This rectangle displays current time of audio\n        const rect = document.createElementNS(Visualizer.XMLNS, 'rect');\n\n        rect.classList.add(TimeOverview.SVG_CURRENT_TIME_CLASS_NAME);\n\n        rect.setAttribute('y', (this.styles.top + 1));\n        rect.setAttribute('height', (innerHeight - 1));\n        rect.setAttribute('stroke', 'none');\n        rect.setAttribute('fill', this.currentTime);\n\n        svg.appendChild(rect);\n\n        // for `TimeOverview#update`, `TimeOverview#drag`\n        this.savedImage = svg;\n        this.length     = data.length;\n\n        return this;\n    }\n\n    /**\n     * This method draws current time of audio on Canvas or SVG.\n     * @param {number} time This argument is current time of audio.\n     * @return {TimeOverview} This is returned for method chain.\n     */\n    update(time) {\n        const t = parseFloat(time);\n\n        if (isNaN(t) || (t < 0)) {\n            return this;\n        }\n\n        switch (this.graphics) {\n            case Visualizer.CANVAS:\n                if (this.savedImage instanceof ImageData) {\n                    const context = this.context;\n\n                    const { width, height } = this.canvas;\n\n                    const innerWidth  = width  - (this.styles.left + this.styles.right);\n                    const innerHeight = height - (this.styles.top  + this.styles.bottom);\n                    const x           = Math.floor(((t * this.sampleRate) / this.length) * innerWidth);\n\n                    context.clearRect(0, 0, width, height);\n                    context.putImageData(this.savedImage, 0, 0);\n\n                    if (this.mode === TimeOverview.DRAG_MODE_UPDATE) {\n                        context.fillStyle = this.currentTime;\n                        context.fillRect(this.styles.left, (this.styles.top + 1), x, (innerHeight - 1));\n                    } else if (this.mode === TimeOverview.DRAG_MODE_SPRITE) {\n                        if (this.endTime !== 0) {\n                            const baseX = Math.floor(((Math.abs(this.endTime - this.startTime) * this.sampleRate) / this.length) * innerWidth);\n                            context.fillStyle = this.sprite;\n\n                            if (x >= this.offsetX) {\n                                context.fillRect((this.styles.left + this.offsetX), (this.styles.top + 1), baseX, (innerHeight - 1));\n                            } else {\n                                context.fillRect((this.styles.left + this.offsetX - baseX), (this.styles.top + 1), baseX, (innerHeight - 1));\n                            }\n                        }\n\n                        context.fillStyle = this.currentTime;\n\n                        if (x >= this.offsetX) {\n                            context.fillRect((this.styles.left + this.offsetX), (this.styles.top + 1), Math.abs(x - this.offsetX), (innerHeight - 1));\n                        } else {\n                            context.fillRect((this.styles.left + x), (this.styles.top + 1), Math.abs(x - this.offsetX), (innerHeight - 1));\n                        }\n                    }\n                }\n\n                break;\n            case Visualizer.SVG:\n                const rect = this.svg.querySelector(`.${TimeOverview.SVG_CURRENT_TIME_CLASS_NAME}`);\n\n                if (rect instanceof SVGElement) {\n                    const width      = parseInt(this.svg.getAttribute('width'), 10);\n                    const innerWidth = width  - (this.styles.left + this.styles.right);\n                    const x          = ((t * this.sampleRate) / this.length) * innerWidth;\n\n                    if (this.mode === TimeOverview.DRAG_MODE_UPDATE) {\n                        rect.setAttribute('x', this.styles.left);\n                        rect.setAttribute('width', x);\n                        // rect.setAttribute('transform', `translate(${x} 0)`);\n                        rect.setAttribute('aria-label', 'current time');\n                    } else if (this.mode === TimeOverview.DRAG_MODE_SPRITE) {\n                        if (this.endTime !== 0) {\n                            const baseRect = document.createElementNS(Visualizer.XMLNS, 'rect');\n\n                            baseRect.classList.add(TimeOverview.SVG_SPRITE_CLASS_NAME);\n\n                            if (this.svg.lastElementChild.previousElementSibling instanceof SVGElement) {\n                                this.svg.removeChild(this.svg.lastElementChild.previousElementSibling);\n                            }\n\n                            const baseX = Math.floor(((Math.abs(this.endTime - this.startTime) * this.sampleRate) / this.length) * innerWidth);\n\n                            baseRect.setAttribute('y', (this.styles.top + 1));\n                            baseRect.setAttribute('height', rect.getAttribute('height'));\n                            baseRect.setAttribute('stroke', 'none');\n                            baseRect.setAttribute('fill', this.sprite);\n                            baseRect.setAttribute('aria-label', 'current time');\n\n                            if (x >= this.offsetX) {\n                                baseRect.setAttribute('x', (this.styles.left + this.offsetX));\n                            } else {\n                                baseRect.setAttribute('x', (this.styles.left + this.offsetX - baseX));\n                            }\n\n                            baseRect.setAttribute('width', baseX);\n\n                            this.svg.appendChild(baseRect);\n                            this.svg.appendChild(rect);\n                        }\n\n                        if (x >= this.offsetX) {\n                            rect.setAttribute('x', (this.styles.left + this.offsetX));\n                        } else {\n                            rect.setAttribute('x', (this.styles.left + x));\n                        }\n\n                        rect.setAttribute('width', Math.abs(x - this.offsetX));\n                        rect.setAttribute('aria-label', 'sprite time');\n                    }\n                }\n\n                break;\n            default:\n                break;\n        }\n\n        return this;\n    }\n\n    /**\n     * This method registers event listener for setting current time by drag.\n     * @param {function} callback This argument is invoked when current time is changed.\n     * @return {TimeOverview} This is returned for method chain.\n     */\n    drag(callback) {\n        let drawNode = null;\n\n        let start = '';\n        let move  = '';\n        let end   = '';\n\n        // Touch Panel ?\n        if (/iPhone|iPad|iPod|Android/.test(navigator.userAgent)) {\n            start = 'touchstart';\n            move  = 'touchmove';\n            end   = 'touchend';\n        } else {\n            start = 'mousedown';\n            move  = 'mousemove';\n            end   = 'mouseup';\n        }\n\n        switch (this.graphics) {\n            case Visualizer.CANVAS:\n                drawNode = this.canvas;\n                break;\n            case Visualizer.SVG:\n                drawNode = this.svg;\n                break;\n            default:\n                return this;\n        }\n\n        this.callback = Object.prototype.toString.call(callback) === '[object Function]' ? callback : () => {};\n\n        this.onStart = this.onStart.bind(this);\n        this.onMove  = this.onMove.bind(this);\n        this.onEnd   = this.onEnd.bind(this);\n\n        drawNode.removeEventListener(start, this.onStart, true);\n        drawNode.removeEventListener(move, this.onMove, true);\n        window.removeEventListener(end, this.onEnd, true);\n\n        drawNode.addEventListener(start, this.onStart, true);\n        drawNode.addEventListener(move, this.onMove, true);\n        window.addEventListener(end, this.onEnd, true);\n\n        return this;\n    }\n\n    /**\n     * This method draws the rectangle for current time of audio.\n     * @param {Event} event This argument is the instance of `Event`.\n     * @param {number} offsetX This argument is X coordinate on Canvas or SVG.\n     * @param {function} callback This argument is invoked when the rectangle is drawn.\n     * @return {TimeOverview} This is returned for method chain.\n     */\n    draw(event, type, offsetX) {\n        let offsetLeft = 0;\n        let width      = 0;\n\n        switch (this.graphics) {\n            case Visualizer.CANVAS:\n                offsetLeft = this.canvas.offsetLeft;\n                width      = this.canvas.width;\n                break;\n            case Visualizer.SVG:\n                offsetLeft = this.svg.parentNode.offsetLeft;\n                width      = parseInt(this.svg.getAttribute('width'), 10);\n                break;\n            default:\n                break;\n        }\n\n        let x = offsetX - (offsetLeft + this.styles.left);\n\n        if (this.canvas.parentNode instanceof Element) {\n            x += this.canvas.parentNode.scrollLeft;\n        }\n\n        width -= (this.styles.left + this.styles.right);\n\n        // Exceed ?\n        if (x < 0)     { x = 0; }\n        if (x > width) { x = width; }\n\n        const plot = (x / width) * this.length;\n        const time = plot / this.sampleRate;\n\n        if ((this.mode === TimeOverview.DRAG_MODE_SPRITE) && ((type === 'mousedown') || (type === 'touchstart'))) {\n            this.offsetX   = x;\n            this.startTime = time;\n            this.endTime   = 0;\n        }\n\n        if ((this.mode === TimeOverview.DRAG_MODE_SPRITE) && ((type === 'mouseup') || (type === 'touchend'))) {\n            this.endTime = time;\n        }\n\n        this.update(time);\n\n        if (this.mode === TimeOverview.DRAG_MODE_UPDATE) {\n            this.callback(event, time);\n        } else if (this.mode === TimeOverview.DRAG_MODE_SPRITE) {\n            if (this.startTime < time) {\n                this.callback(event, this.startTime, time);\n            } else if (this.startTime > time) {\n                this.callback(event, time, this.startTime);\n            }\n        }\n\n        return this;\n    }\n\n    /**\n     * This method is event listener for drawing the rectangle.\n     * @param {Event} event This argument is the instance of `Event`.\n     */\n    onStart(event) {\n        this.draw(event, event.type, this.getOffsetX(event));\n        this.isDown = true;\n    }\n\n    /**\n     * This method is event listener for drawing the rectangle.\n     * @param {Event} event This argument is the instance of `Event`.\n     */\n    onMove(event) {\n        if (!this.isDown) {\n            return;\n        }\n\n        event.preventDefault();  // for Touch Panel\n        this.draw(event, event.type, this.getOffsetX(event));\n    }\n\n    /**\n     * This method is event listener for drawing the rectangle.\n     * @param {Event} event This argument is the instance of `Event`.\n     */\n    onEnd(event) {\n        if (!this.isDown) {\n            return;\n        }\n\n        this.draw(event, event.type, this.getOffsetX(event));\n\n        this.isDown = false;\n    }\n\n    /**\n     * This method returns X coordinate from `Event` object.\n     * @param {Event} event This argument is the instance of `Event`.\n     * @return {number} This is returned as X coordinate.\n     */\n    getOffsetX(event) {\n        if (event.pageX) {\n            return event.pageX;\n        }\n\n        if (event.touches[0]) {\n            return event.touches[0].pageX;\n        }\n\n        return this;\n    }\n\n    /** @override */\n    toString() {\n        return '[SoundModule Analyser TimeOverview]';\n    }\n}\n","'use strict';\n\nimport { Visualizer } from './Visualizer';\n\n/**\n * This private class defines properties for drawing sound wave in time domain.\n * @constructor\n * @extends {Visualizer}\n */\nexport class Time extends Visualizer {\n    static UINT  = 'uint';\n    static FLOAT = 'float';\n\n    /**\n     * @param {number} sampleRate This argument is sample rate.\n     */\n    constructor(sampleRate) {\n        super(sampleRate);\n\n        this.type         = Time.UINT;  // unsigned int 8 bit (`Uint8Array`) or float 32 bit (`Float32Array`)\n        this.textInterval = 0.005;      // Draw text at intervals this value [sec]\n    }\n\n    /** @override */\n    param(key, value) {\n        if (Object.prototype.toString.call(arguments[0]) === '[object Object]') {\n            // Associative array\n            for (const k in arguments[0]) {\n                this.param(k, arguments[0][k]);\n            }\n        } else {\n            const k = String(key).replace(/-/g, '').toLowerCase();\n\n            const r = super.param(k, value);\n\n            if (r !== undefined) {\n                return r;\n            }\n\n            let v = null;\n\n            switch (k) {\n                case 'type':\n                    if (value === undefined) {\n                        return this.type;\n                    }\n\n                    v = String(value).toLowerCase();\n\n                    if ((v === Time.UINT) || (v === Time.FLOAT)) {\n                        this.type = v;\n                    }\n\n                    break;\n                case 'textinterval':\n                    if (value === undefined) {\n                        return this.textInterval;\n                    }\n\n                    v = parseFloat(value);\n\n                    if (v > 0) {\n                        this.textInterval = v;\n                    }\n\n                    break;\n                default:\n                    break;\n            }\n        }\n\n        return this;\n    }\n\n    /**\n     * This method draws sound wave in time domain to Canvas.\n     * @param {Uint8Array|Float32Array} data This argument is data for drawing.\n     * @return {Time} This is returned for method chain.\n     * @override\n     */\n    drawOnCanvas(data) {\n        if (!((this.canvas instanceof HTMLCanvasElement) && this.isActive)) {\n            return this;\n        }\n\n        const context = this.context;\n\n        const { width, height } = this.canvas;\n\n        const innerWidth  = width  - (this.styles.left + this.styles.right);\n        const innerHeight = height - (this.styles.top  + this.styles.bottom);\n        const middle      = Math.floor(innerHeight / 2) + this.styles.top;\n\n        // Draw text at intervals of `this.textInterval`\n        const nTextInterval = Math.floor(this.textInterval * this.sampleRate);\n\n        // Erase previous wave\n        context.clearRect(0, 0, width, height);\n\n        // Begin drawing\n        switch (this.type) {\n            case Time.FLOAT:\n                this.drawTimeDomainFloat32ArrayOnCanvas(context, data, innerWidth, innerHeight, middle);\n                break;\n            case Time.UINT:\n            default:\n                switch (this.styles.shape) {\n                    case 'line':\n                        // Set style\n                        context.strokeStyle = this.styles.wave;\n                        context.lineWidth   = this.styles.width;\n                        context.lineCap     = this.styles.cap;\n                        context.lineJoin    = this.styles.join;\n\n                        // Draw wave\n                        context.beginPath();\n\n                        for (let i = 0, len = data.length; i < len; i++) {\n                            const x = ((i / len) * innerWidth) + this.styles.left;\n                            const y = ((1 - (data[i] / 255)) * innerHeight) + this.styles.top;\n\n                            if (i === 0) {\n                                context.moveTo((x + (this.styles.width / 2)), y);\n                            } else {\n                                context.lineTo(x, y);\n                            }\n                        }\n\n                        context.stroke();\n\n                        break;\n                    case 'rect':\n                        // Set style\n                        if (this.styles.wave !== 'gradient') {\n                            context.fillStyle = this.styles.wave;\n                        }\n\n                        // Draw wave\n                        for (let i = 0, len = data.length; i < len; i++) {\n                            const x = ((i / len) * innerWidth) + this.styles.left;\n                            const y = (0.5 - (data[i] / 255)) * innerHeight;\n\n                            // Set style\n                            if (this.styles.wave === 'gradient') {\n                                const upside   = (innerHeight / 2) + this.styles.top;\n                                const gradient = context.createLinearGradient(0, upside, 0, (upside + y));\n\n                                for (const gradients of this.styles.grad) {\n                                    gradient.addColorStop(gradients.offset, gradients.color);\n                                }\n\n                                context.fillStyle = gradient;\n                            }\n\n                            context.fillRect(x, middle, this.styles.width, y);\n                        }\n\n                        break;\n                    default:\n                        break;\n                }\n\n                break;\n        }\n\n        if ((this.styles.grid !== 'none') || (this.styles.text !== 'none')) {\n            // Draw grid and text (X axis)\n            for (let i = 0, len = data.length; i < len; i++) {\n                if ((i % nTextInterval) === 0) {\n                    const x = Math.ceil((i / len) * innerWidth) + this.styles.left;\n                    const t = `${Math.ceil((i / this.sampleRate) * 1000)} ms`;\n\n                    // Draw grid\n                    if (this.styles.grid !== 'none') {\n                        context.fillStyle = this.styles.grid;\n                        context.fillRect(x, this.styles.top, 1, innerHeight);\n                    }\n\n                    // Draw text\n                    if (this.styles.text !== 'none') {\n                        context.fillStyle = this.styles.text;\n                        context.font      = this.createFontString();\n                        context.fillText(t, (x - (context.measureText(t).width / 2)), (this.styles.top + innerHeight + parseInt(this.styles.font.size, 10)));\n                    }\n                }\n            }\n\n            // Draw grid and text (Y axis)\n            const texts = ['-1.00', '-0.50', ' 0.00', ' 0.50', ' 1.00'];\n\n            for (const t of texts) {\n                const x = Math.floor(this.styles.left - context.measureText(t).width);\n                const y = Math.floor((1 - parseFloat(t.trim())) * (innerHeight / 2)) + this.styles.top;\n\n                // Draw grid\n                if (this.styles.grid !== 'none') {\n                    context.fillStyle = this.styles.grid;\n                    context.fillRect(this.styles.left, y, innerWidth, 1);\n                }\n\n                // Draw text\n                if (this.styles.text !== 'none') {\n                    context.fillStyle = this.styles.text;\n                    context.font      = this.createFontString();\n                    context.fillText(t, x, (y - Math.floor(parseInt(this.styles.font.size, 10) / 4)));\n                }\n            }\n        }\n\n        return this;\n    }\n\n    /**\n     * This method draws sound wave in time domain to SVG.\n     * @param {Uint8Array|Float32Array} data This argument is data for drawing.\n     * @return {Time} This is returned for method chain.\n     * @override\n     */\n    drawBySVG(data) {\n        if (!((this.svg instanceof SVGElement) && this.isActive)) {\n            return this;\n        }\n\n        const svg = this.svg;\n\n        const width       = parseInt(svg.getAttribute('width'), 10);\n        const height      = parseInt(svg.getAttribute('height'), 10);\n        const innerWidth  = width  - (this.styles.left + this.styles.right);\n        const innerHeight = height - (this.styles.top  + this.styles.bottom);\n        const middle      = Math.floor(innerHeight / 2) + this.styles.top;\n\n        // Draw text at intervals of `this.textInterval`\n        const nTextInterval = Math.floor(this.textInterval * this.sampleRate);\n\n        // Begin drawing\n        svg.innerHTML = '';\n\n        // Begin drawing\n        switch (this.type) {\n            case Time.FLOAT:\n                svg.appendChild(this.drawTimeDomainFloat32ArrayBySVG(data, innerWidth, innerHeight, middle, null, Visualizer.SVG_LINEAR_GRADIENT_ID_TIME));\n                break;\n            case Time.UINT:\n            default:\n                switch (this.styles.shape) {\n                    case 'line':\n                        // Draw wave\n                        const path = document.createElementNS(Visualizer.XMLNS, 'path');\n\n                        let d = '';\n\n                        for (let i = 0, len = data.length; i < len; i++) {\n                            const x = ((i / len) * innerWidth) + this.styles.left;\n                            const y = ((1 - (data[i] / 255)) * innerHeight) + this.styles.top;\n\n                            if (i === 0) {\n                                d += `M${x + (this.styles.width / 2)} ${y}`;\n                            } else {\n                                d += ` L${x} ${y}`;\n                            }\n                        }\n\n                        path.setAttribute('d', d);\n\n                        path.setAttribute('stroke',          this.styles.wave);\n                        path.setAttribute('fill',            'none');\n                        path.setAttribute('stroke-width',    this.styles.width);\n                        path.setAttribute('stroke-linecap',  this.styles.cap);\n                        path.setAttribute('stroke-linejoin', this.styles.join);\n\n                        svg.appendChild(path);\n\n                        break;\n                    case 'rect':\n                        let defs = null;\n\n                        if (this.styles.wave === 'gradient') {\n                            defs = this.createSVGLinearGradient(Visualizer.SVG_LINEAR_GRADIENT_ID_TIME);\n                        }\n\n                        // Draw wave\n                        const g = document.createElementNS(Visualizer.XMLNS, 'g');\n\n                        if (defs !== null) {\n                            g.appendChild(defs);\n                        }\n\n                        for (let i = 0, len = data.length; i < len; i++) {\n                            const rect = document.createElementNS(Visualizer.XMLNS, 'rect');\n\n                            const x = ((i / len) * innerWidth) + this.styles.left;\n                            const y = ((data[i] / 255) - 0.5) * innerHeight;\n\n                            rect.setAttribute('x',     x);\n                            rect.setAttribute('y',     middle);\n                            rect.setAttribute('width', this.styles.width);\n\n                            if (y < 0) {\n                                rect.setAttribute('height', -y);\n                            } else {\n                                rect.setAttribute('height',    y);\n                                rect.setAttribute('transform', `rotate(180 ${x + (this.styles.width / 2)} ${middle})`);\n                            }\n\n                            rect.setAttribute('stroke', 'none');\n                            rect.setAttribute('fill',   (defs === null) ? this.styles.wave : `url(#${Visualizer.SVG_LINEAR_GRADIENT_ID_TIME})`);\n\n                            g.appendChild(rect);\n                        }\n\n                        svg.appendChild(g);\n\n                        break;\n                    default:\n                        break;\n                }\n\n                break;\n        }\n\n        if ((this.styles.grid !== 'none') || (this.styles.text !== 'none')) {\n            // Draw grid and text (X axis)\n            for (let i = 0, len = data.length; i < len; i++) {\n                if ((i % nTextInterval) === 0) {\n                    const x = Math.ceil((i / len) * innerWidth) + this.styles.left;\n                    const t = `${Math.ceil((i / this.sampleRate) * 1000)} ms`;\n\n                    // Draw grid\n                    if (this.styles.grid !== 'none') {\n                        const rect = document.createElementNS(Visualizer.XMLNS, 'rect');\n\n                        rect.setAttribute('x',      x);\n                        rect.setAttribute('y',      this.styles.top);\n                        rect.setAttribute('width',  1);\n                        rect.setAttribute('height', innerHeight);\n\n                        rect.setAttribute('stroke', 'none');\n                        rect.setAttribute('fill',   this.styles.grid);\n\n                        svg.appendChild(rect);\n                    }\n\n                    // Draw text\n                    if (this.styles.text !== 'none') {\n                        const text = document.createElementNS(Visualizer.XMLNS, 'text');\n\n                        text.textContent = t;\n\n                        text.setAttribute('x', x);\n                        text.setAttribute('y', (this.styles.top + innerHeight + parseInt(this.styles.font.size, 10)));\n\n                        text.setAttribute('text-anchor', 'middle');\n                        text.setAttribute('stroke',      'none');\n                        text.setAttribute('fill',        this.styles.text);\n                        text.setAttribute('font-family', this.styles.font.family);\n                        text.setAttribute('font-size',   this.styles.font.size);\n                        text.setAttribute('font-style',  this.styles.font.style);\n                        text.setAttribute('font-weight', this.styles.font.weight);\n\n                        svg.appendChild(text);\n                    }\n                }\n            }\n\n            // Draw grid and text (Y axis)\n            const texts = ['-1.00', '-0.50', ' 0.00', ' 0.50', ' 1.00'];\n\n            for (const t of texts) {\n                const x = this.styles.left;\n                const y = Math.floor((1 - parseFloat(t.trim())) * (innerHeight / 2)) + this.styles.top;\n\n                // Draw grid\n                if (this.styles.grid !== 'none') {\n                    const rect = document.createElementNS(Visualizer.XMLNS, 'rect');\n\n                    rect.setAttribute('x',      x);\n                    rect.setAttribute('y',      y);\n                    rect.setAttribute('width',  innerWidth);\n                    rect.setAttribute('height', 1);\n\n                    rect.setAttribute('stroke', 'none');\n                    rect.setAttribute('fill',   this.styles.grid);\n\n                    svg.appendChild(rect);\n                }\n\n                // Draw text\n                if (this.styles.text !== 'none') {\n                    const text = document.createElementNS(Visualizer.XMLNS, 'text');\n\n                    text.textContent = t;\n\n                    text.setAttribute('x', x);\n                    text.setAttribute('y', (y - Math.floor(parseInt(this.styles.font.size, 10) / 4)));\n\n                    text.setAttribute('text-anchor', 'end');\n                    text.setAttribute('stroke',      'none');\n                    text.setAttribute('fill',        this.styles.text);\n                    text.setAttribute('font-family', this.styles.font.family);\n                    text.setAttribute('font-size',   this.styles.font.size);\n                    text.setAttribute('font-style',  this.styles.font.style);\n                    text.setAttribute('font-weight', this.styles.font.weight);\n\n                    svg.appendChild(text);\n                }\n            }\n        }\n\n        return this;\n    }\n\n    /** @override */\n    toString() {\n        return '[SoundModule Analyser Time]';\n    }\n}\n","'use strict';\n\nimport { Visualizer } from './Visualizer';\n\n/**\n * This private class defines properties for drawing sound wave in frequency domain (spectrum).\n * @constructor\n * @extends {Visualizer}\n */\nexport class FFT extends Visualizer {\n    static UINT  = 'uint';\n    static FLOAT = 'float';\n\n    /**\n     * @param {number} sampleRate This argument is sample rate.\n     */\n    constructor(sampleRate) {\n        super(sampleRate);\n\n        this.type         = FFT.UINT;  // unsigned int 8 bit (`Uint8Array`) or float 32 bit (`Float32Array`)\n        this.size         = 256;       // Range for drawing\n        this.textInterval = 1000;      // Draw text at intervals of this value [Hz]\n    }\n\n    /** @override */\n    param(key, value) {\n        if (Object.prototype.toString.call(arguments[0]) === '[object Object]') {\n            // Associative array\n            for (const k in arguments[0]) {\n                this.param(k, arguments[0][k]);\n            }\n        } else {\n            const k = String(key).replace(/-/g, '').toLowerCase();\n\n            const r = super.param(k, value);\n\n            if (r !== undefined) {\n                return r;\n            }\n\n            let v   = null;\n            let min = null;\n            let max = null;\n\n            switch (k) {\n                case 'type':\n                    if (value === undefined) {\n                        return this.type;\n                    }\n\n                    v = String(value).toLowerCase();\n\n                    if ((v === FFT.UINT) || (v === FFT.FLOAT)) {\n                        this.type = v;\n                    }\n\n                    break;\n                case 'size':\n                    if (value === undefined) {\n                        return this.size;\n                    }\n\n                    v   = parseInt(value, 10);\n                    min = 0;\n                    max = 1024;  // `AnalyserNode#fftSize` max 2048 -> half 1024\n\n                    if ((v > min) && (v <= max)) {\n                        this.size = v;\n                    }\n\n                    break;\n                case 'textinterval':\n                    if (value === undefined) {\n                        return this.textInterval;\n                    }\n\n                    v = parseFloat(value);\n\n                    if (v > 0) {\n                        this.textInterval = v;\n                    }\n\n                    break;\n                default:\n                    break;\n            }\n        }\n\n        return this;\n    }\n\n    /**\n     * This method draws sound wave in frequency domain (spectrum) to Canvas.\n     * @param {Uint8Array|Float32Array} data This argument is data for drawing.\n     * @param {number} minDecibels This argument is in order to determine the range of drawing. The default value is -100 dB.\n     * @param {number} maxDecibels This argument is in order to determine the range of drawing. The default value is -30 dB.\n     * @return {FFT} This is returned for method chain.\n     * @override\n     */\n    drawOnCanvas(data, minDecibels, maxDecibels) {\n        if (!((this.canvas instanceof HTMLCanvasElement) && this.isActive)) {\n            return this;\n        }\n\n        const mindB = parseFloat(minDecibels);\n        const maxdB = parseFloat(maxDecibels);\n\n        const range = maxdB - mindB;\n\n        const context = this.context;\n\n        const { width, height } = this.canvas;\n\n        const innerWidth  = width  - (this.styles.left + this.styles.right);\n        const innerHeight = height - (this.styles.top  + this.styles.bottom);\n\n        const drawnSize = (this.size > data.length) ? data.length : this.size;\n\n        // Frequency resolution (Sampling rate / FFT size)\n        const fsDivN = this.sampleRate / (2 * data.length);\n\n        // Draw text at intervals of `this.textInterval`\n        const nTextInterval = Math.floor(this.textInterval / fsDivN);\n\n        // Erase previous wave\n        context.clearRect(0, 0, width, height);\n\n        // Begin drawing\n        switch (this.type) {\n            case FFT.FLOAT:\n                // Set style\n                context.strokeStyle = (this.styles.wave !== 'gradient') ? this.styles.wave : 'rgba(0, 0, 255, 1.0)';  // line only\n                context.lineWidth   = this.styles.width;\n                context.lineCap     = this.styles.cap;\n                context.lineJoin    = this.styles.join;\n\n                // Draw wave\n                context.beginPath();\n\n                for (let i = 0; i < drawnSize; i++) {\n                    const x = ((i / drawnSize) * innerWidth) + this.styles.left;\n                    const y = (Math.abs(data[i] - maxdB) * (innerHeight / range)) + this.styles.top;  // [dB] * [px / dB] = [px]\n\n                    if (i === 0) {\n                        context.moveTo((x + (this.styles.width / 2)), y);\n                    } else {\n                        context.lineTo(x, y);\n                    }\n                }\n\n                context.stroke();\n\n                break;\n            case FFT.UINT:\n            default:\n                switch (this.styles.shape) {\n                    case 'line':\n                        // Set style\n                        context.strokeStyle = this.styles.wave;\n                        context.lineWidth   = this.styles.width;\n                        context.lineCap     = this.styles.cap;\n                        context.lineJoin    = this.styles.join;\n\n                        context.beginPath();\n\n                        // Draw wave\n                        for (let i = 0; i < drawnSize; i++) {\n                            const x = ((i / drawnSize) * innerWidth) + this.styles.left;\n                            const y = ((1 - (data[i] / 255)) * innerHeight) + this.styles.top;\n\n                            if (i === 0) {\n                                context.moveTo((x + (this.styles.width / 2)), y);\n                            } else {\n                                context.lineTo(x, y);\n                            }\n                        }\n\n                        context.stroke();\n\n                        break;\n                    case 'rect':\n                        // Set style\n                        if (this.styles.wave !== 'gradient') {\n                            context.fillStyle = this.styles.wave;\n                        }\n\n                        // Draw wave\n                        for (let i = 0; i < drawnSize; i++) {\n                            const x = ((i / drawnSize) * innerWidth) + this.styles.left;\n                            const y = -1 * ((data[i] / 255) * innerHeight);\n\n                            // Set style\n                            if (this.styles.wave === 'gradient') {\n                                const upside   = innerHeight + this.styles.top;\n                                const gradient = context.createLinearGradient(0, upside, 0, (upside + y));\n\n                                for (const gradients of this.styles.grad) {\n                                    gradient.addColorStop(gradients.offset, gradients.color);\n                                }\n\n                                context.fillStyle = gradient;\n                            }\n\n                            context.fillRect(x, (innerHeight + this.styles.top), this.styles.width, y);\n                        }\n\n                        break;\n                    default:\n                        break;\n                }\n\n                break;\n        }\n\n        if ((this.styles.grid !== 'none') || (this.styles.text !== 'none')) {\n            // Draw grid and text (X axis)\n            for (let i = 0; i < drawnSize; i++) {\n                if ((i % nTextInterval) === 0) {\n                    const x = Math.floor((i / drawnSize) * innerWidth) + this.styles.left;\n\n                    const f = Math.floor(this.textInterval * (i / nTextInterval));\n                    const t = (f < 1000) ? `${f} Hz` : `${String(f / 1000).slice(0, 3)} kHz`;\n\n                    // Draw grid\n                    if (this.styles.grid !== 'none') {\n                        context.fillStyle = this.styles.grid;\n                        context.fillRect(x, this.styles.top, 1, innerHeight);\n                    }\n\n                    // Draw text\n                    if (this.styles.text !== 'none') {\n                        context.fillStyle = this.styles.text;\n                        context.font      = this.createFontString();\n                        context.fillText(t, (x - (context.measureText(t).width / 2)), (this.styles.top + innerHeight + parseInt(this.styles.font.size, 10)));\n                    }\n                }\n            }\n\n            // Draw grid and text (Y axis)\n            switch (this.type) {\n                case FFT.FLOAT:\n                    for (let i = mindB; i <= maxdB; i += 10) {\n                        const t = `${i} dB`;\n                        const x = Math.floor(this.styles.left - context.measureText(t).width);\n                        const y = Math.floor(((-1 * (i - maxdB)) / range) * innerHeight) + this.styles.top;\n\n                        // Draw grid\n                        if (this.styles.grid !== 'none') {\n                            context.fillStyle = this.styles.grid;\n                            context.fillRect(this.styles.left, y, innerWidth, 1);\n                        }\n\n                        // Draw text\n                        if (this.styles.text !== 'none') {\n                            context.fillStyle = this.styles.text;\n                            context.font      = this.createFontString();\n                            context.fillText(t, x, (y - Math.floor(parseInt(this.styles.font.size, 10) / 4)));\n                        }\n                    }\n\n                    break;\n                case FFT.UINT:\n                default:\n                    const texts = ['0.00', '0.25', '0.50', '0.75', '1.00'];\n\n                    for (const t of texts) {\n                        const x = Math.floor(this.styles.left - context.measureText(t).width);\n                        const y = ((1 - parseFloat(t)) * innerHeight) + this.styles.top;\n\n                        // Draw grid\n                        if (this.styles.grid !== 'none') {\n                            context.fillStyle = this.styles.grid;\n                            context.fillRect(this.styles.left, y, innerWidth, 1);\n                        }\n\n                        // Draw text\n                        if (this.styles.text !== 'none') {\n                            context.fillStyle = this.styles.text;\n                            context.font      = this.createFontString();\n                            context.fillText(t, x, (y - Math.floor(parseInt(this.styles.font.size, 10) / 4)));\n                        }\n                    }\n\n                    break;\n            }\n        }\n\n        return this;\n    }\n\n    /**\n     * This method draws sound wave in frequency domain (spectrum) to SVG.\n     * @param {Uint8Array|Float32Array} data This argument is data for drawing.\n     * @param {number} minDecibels This argument is in order to determine the range of drawing. The default value is -100 dB.\n     * @param {number} maxDecibels This argument is in order to determine the range of drawing. The default value is -30 dB.\n     * @return {FFT} This is returned for method chain.\n     * @override\n     */\n    drawBySVG(data, minDecibels, maxDecibels) {\n        if (!((this.svg instanceof SVGElement) && this.isActive)) {\n            return this;\n        }\n\n        const mindB = parseFloat(minDecibels);\n        const maxdB = parseFloat(maxDecibels);\n\n        const range = maxdB - mindB;\n\n        const svg = this.svg;\n\n        const width       = parseInt(svg.getAttribute('width'), 10);\n        const height      = parseInt(svg.getAttribute('height'), 10);\n        const innerWidth  = width  - (this.styles.left + this.styles.right);\n        const innerHeight = height - (this.styles.top  + this.styles.bottom);\n\n        const drawnSize = (this.size > data.length) ? data.length : this.size;\n\n        // Frequency resolution (sample rate / FFT size)\n        const fsDivN = this.sampleRate / (2 * data.length);\n\n        // Draw text at intervals of `this.textInterval`\n        const nTextInterval = Math.floor(this.textInterval / fsDivN);\n\n        // Erase previous wave\n        svg.innerHTML = '';\n\n        // Begin drawing\n        switch (this.type) {\n            case FFT.FLOAT:\n                // Draw wave\n                const path = document.createElementNS(Visualizer.XMLNS, 'path');\n\n                let d = '';\n\n                for (let i = 0; i < drawnSize; i++) {\n                    const x = Math.floor((i / drawnSize) * innerWidth) + this.styles.left;\n                    const y = Math.floor(-1 * (data[i] - maxdB) * (innerHeight / range)) + this.styles.top;\n\n                    if (i === 0) {\n                        d += `M${x + (this.styles.width / 2)} ${y}`;\n                    } else {\n                        d += ` L${x} ${y}`;\n                    }\n                }\n\n                path.setAttribute('d', d);\n\n                path.setAttribute('stroke',          ((this.styles.wave !== 'gradient') ? this.styles.wave : 'rgba(0, 0, 255, 1.0)'));  // line only\n                path.setAttribute('fill',            'none');\n                path.setAttribute('stroke-width',    this.styles.width);\n                path.setAttribute('stroke-linecap',  this.styles.cap);\n                path.setAttribute('stroke-linejoin', this.styles.join);\n\n                svg.appendChild(path);\n\n                break;\n            case FFT.UINT:\n            default:\n                switch (this.styles.shape) {\n                    case 'line':\n                        // Draw wave\n                        const path = document.createElementNS(Visualizer.XMLNS, 'path');\n\n                        let d = '';\n\n                        for (let i = 0; i < drawnSize; i++) {\n                            const x = Math.floor((i / drawnSize) * innerWidth) + this.styles.left;\n                            const y = Math.floor((1 - (data[i] / 255)) * innerHeight) + this.styles.top;\n\n                            if (i === 0) {\n                                d += `M${x + (this.styles.width / 2)} ${y}`;\n                            } else {\n                                d += ` L${x} ${y}`;\n                            }\n                        }\n\n                        path.setAttribute('d', d);\n\n                        path.setAttribute('stroke',          this.styles.wave);\n                        path.setAttribute('fill',            'none');\n                        path.setAttribute('stroke-width',    this.styles.width);\n                        path.setAttribute('stroke-linecap',  this.styles.cap);\n                        path.setAttribute('stroke-linejoin', this.styles.join);\n\n                        svg.appendChild(path);\n\n                        break;\n                    case 'rect':\n                        // Draw wave\n                        let defs = null;\n\n                        if (this.styles.wave === 'gradient') {\n                            defs = this.createSVGLinearGradient(Visualizer.SVG_LINEAR_GRADIENT_ID_FFT);\n                        }\n\n                        // Draw wave\n                        const g = document.createElementNS(Visualizer.XMLNS, 'g');\n\n                        if (defs !== null) {\n                            g.appendChild(defs);\n                        }\n\n                        for (let i = 0; i < drawnSize; i++) {\n                            const rect = document.createElementNS(Visualizer.XMLNS, 'rect');\n\n                            const x = Math.floor((i / drawnSize) * innerWidth) + this.styles.left;\n                            const y = Math.floor((data[i] / 255) * innerHeight);\n\n                            rect.setAttribute('x',     x);\n                            rect.setAttribute('y',     (this.styles.top + innerHeight));\n                            rect.setAttribute('width', this.styles.width);\n\n                            if (y < 0) {\n                                rect.setAttribute('height', -y);\n                            } else {\n                                rect.setAttribute('height',    y);\n                                rect.setAttribute('transform', `rotate(180 ${x + (this.styles.width / 2)} ${this.styles.top + innerHeight})`);\n                            }\n\n                            rect.setAttribute('stroke', 'none');\n                            rect.setAttribute('fill',   (defs === null) ? this.styles.wave : `url(#${Visualizer.SVG_LINEAR_GRADIENT_ID_FFT})`);\n\n                            g.appendChild(rect);\n                        }\n\n                        svg.appendChild(g);\n\n                        break;\n                    default:\n                        break;\n                }\n\n                break;\n        }\n\n        if ((this.styles.grid !== 'none') || (this.styles.text !== 'none')) {\n            // Draw grid and text (X axis)\n            for (let i = 0; i < drawnSize; i++) {\n                if ((i % nTextInterval) === 0) {\n                    const x = Math.floor((i / drawnSize) * innerWidth) + this.styles.left;\n\n                    const f = Math.floor(this.textInterval * (i / nTextInterval));\n                    const t = (f < 1000) ? `${f} Hz` : `${String(f / 1000).slice(0, 3)} kHz`;\n\n                    // Draw grid\n                    if (this.styles.grid !== 'none') {\n                        const rect = document.createElementNS(Visualizer.XMLNS, 'rect');\n\n                        rect.setAttribute('x',      x);\n                        rect.setAttribute('y',      this.styles.top);\n                        rect.setAttribute('width',  1);\n                        rect.setAttribute('height', innerHeight);\n\n                        rect.setAttribute('stroke', 'none');\n                        rect.setAttribute('fill',   this.styles.grid);\n\n                        svg.appendChild(rect);\n                    }\n\n                    // Draw text\n                    if (this.styles.text !== 'none') {\n                        const text = document.createElementNS(Visualizer.XMLNS, 'text');\n\n                        text.textContent = t;\n\n                        text.setAttribute('x', x);\n                        text.setAttribute('y', (this.styles.top + innerHeight + parseInt(this.styles.font.size, 10)));\n\n                        text.setAttribute('text-anchor', 'middle');\n                        text.setAttribute('stroke',      'none');\n                        text.setAttribute('fill',        this.styles.text);\n                        text.setAttribute('font-family', this.styles.font.family);\n                        text.setAttribute('font-size',   this.styles.font.size);\n                        text.setAttribute('font-style',  this.styles.font.style);\n                        text.setAttribute('font-weight', this.styles.font.weight);\n\n                        svg.appendChild(text);\n                    }\n                }\n            }\n\n            // Draw grid and text (Y axis)\n            switch (this.type) {\n                case FFT.FLOAT:\n                    for (let i = mindB; i <= maxdB; i += 10) {\n                        const t = `${i}dB`;\n                        const x = this.styles.left;\n                        const y = Math.floor(((-1 * (i - maxdB)) / range) * innerHeight) + this.styles.top;\n\n                        // Draw grid\n                        if (this.styles.grid !== 'none') {\n                            const rect = document.createElementNS(Visualizer.XMLNS, 'rect');\n\n                            rect.setAttribute('x',      x);\n                            rect.setAttribute('y',      y);\n                            rect.setAttribute('width',  innerWidth);\n                            rect.setAttribute('height', 1);\n\n                            rect.setAttribute('stroke', 'none');\n                            rect.setAttribute('fill',   this.styles.grid);\n\n                            svg.appendChild(rect);\n                        }\n\n                        // Draw text\n                        if (this.styles.text !== 'none') {\n                            const text = document.createElementNS(Visualizer.XMLNS, 'text');\n\n                            text.textContent = t;\n\n                            text.setAttribute('x', x);\n                            text.setAttribute('y', (y - Math.floor(parseInt(this.styles.font.size, 10) / 4)));\n\n                            text.setAttribute('text-anchor', 'end');\n                            text.setAttribute('stroke',      'none');\n                            text.setAttribute('fill',        this.styles.text);\n                            text.setAttribute('font-family', this.styles.font.family);\n                            text.setAttribute('font-size',   this.styles.font.size);\n                            text.setAttribute('font-style',  this.styles.font.style);\n                            text.setAttribute('font-weight', this.styles.font.weight);\n\n                            svg.appendChild(text);\n                        }\n                    }\n\n                    break;\n                case FFT.UINT:\n                default:\n                    const texts = ['0.00', '0.25', '0.50', '0.75', '1.00'];\n\n                    for (const t of texts) {\n                        const x = this.styles.left;\n                        const y = ((1 - parseFloat(t)) * innerHeight) + this.styles.top;\n\n                        // Draw grid\n                        if (this.styles.grid !== 'none') {\n                            const rect = document.createElementNS(Visualizer.XMLNS, 'rect');\n\n                            rect.setAttribute('x',      x);\n                            rect.setAttribute('y',      y);\n                            rect.setAttribute('width',  innerWidth);\n                            rect.setAttribute('height', 1);\n\n                            rect.setAttribute('stroke', 'none');\n                            rect.setAttribute('fill',   this.styles.grid);\n\n                            svg.appendChild(rect);\n                        }\n\n                        // Draw text\n                        if (this.styles.text !== 'none') {\n                            const text = document.createElementNS(Visualizer.XMLNS, 'text');\n\n                            text.textContent = t;\n\n                            text.setAttribute('x', x);\n                            text.setAttribute('y', (y - Math.floor(parseInt(this.styles.font.size, 10) / 4)));\n\n                            text.setAttribute('text-anchor', 'end');\n                            text.setAttribute('stroke',      'none');\n                            text.setAttribute('fill',        this.styles.text);\n                            text.setAttribute('font-family', this.styles.font.family);\n                            text.setAttribute('font-size',   this.styles.font.size);\n                            text.setAttribute('font-style',  this.styles.font.style);\n                            text.setAttribute('font-weight', this.styles.font.weight);\n\n                            svg.appendChild(text);\n                        }\n                    }\n\n                    break;\n            }\n        }\n\n        return this;\n    }\n\n    /** @override */\n    toString() {\n        return '[SoundModule Analyser FFT]';\n    }\n}\n","'use strict';\n\nimport { TimeOverview } from './TimeOverview';\nimport { Time } from './Time';\nimport { FFT } from './FFT';\n\n/**\n * This private class manages 3 private classes (`TimeOverview`, `Time`, `FFT`) for drawing sound wave.\n * @constructor\n */\nexport class Analyser {\n    /**\n     * @param {AudioContext} context This argument is This argument is in order to use the interfaces of Web Audio API.\n     */\n    constructor(context) {\n        this.analyser = context.createAnalyser();\n        this.input    = context.createGain();\n\n        // GainNode (Input) -> AnalyserNode\n        this.input.connect(this.analyser);\n\n        this.timeOverviewL = new TimeOverview(context.sampleRate);\n        this.timeOverviewR = new TimeOverview(context.sampleRate);\n        this.time          = new Time(context.sampleRate);\n        this.fft           = new FFT(context.sampleRate);\n\n        // Set default value\n        this.analyser.fftSize               = 2048;\n        this.analyser.minDecibels           = -100;\n        this.analyser.maxDecibels           = -30;\n        this.analyser.smoothingTimeConstant = 0.8;\n    }\n\n    /**\n     * This method is getter or setter for parameters.\n     * @param {string|object} key This argument is property name in the case of string type.\n     *     This argument is pair of property and value in the case of associative array.\n     * @param {number|} value This argument is the value of designated property. If this argument is omitted, This method is getter.\n     * @return {number|Analyser} This is returned as the value of designated property in the case of getter. Otherwise, this is returned for method chain.\n     */\n    param(key, value) {\n        if (Object.prototype.toString.call(arguments[0]) === '[object Object]') {\n            // Associative array\n            for (const k in arguments[0]) {\n                this.param(k, arguments[0][k]);\n            }\n        } else {\n            const k = String(key).replace(/-/g, '').toLowerCase();\n\n            let v   = null;\n            let min = null;\n            let max = null;\n\n            switch (k) {\n                case 'fftsize':\n                    if (value === undefined) {\n                        return this.analyser.fftSize;\n                    }\n\n                    v = parseInt(value, 10);\n\n                    switch (v) {\n                        case   32:\n                        case   64:\n                        case  128:\n                        case  256:\n                        case  512:\n                        case 1024:\n                        case 2048:\n                            this.analyser.fftSize = v;\n                            break;\n                        default:\n                            break;\n                    }\n\n                    break;\n                case 'frequencybincount':\n                    return this.analyser.frequencyBinCount;  // Getter only\n                case 'mindecibels':\n                    if (value === undefined) {\n                        return this.analyser.minDecibels;\n                    }\n\n                    v   = parseFloat(value);\n                    max = -30;\n\n                    if (v < max) {\n                        this.analyser.minDecibels = v;\n                    }\n\n                    break;\n                case 'maxdecibels':\n                    if (value === undefined) {\n                        return this.analyser.maxDecibels;\n                    }\n\n                    v   = parseFloat(value);\n                    min = -100;\n\n                    if (v > min) {\n                        this.analyser.maxDecibels = v;\n                    }\n\n                    break;\n                case 'smoothingtimeconstant':\n                    if (value === undefined) {\n                        return this.analyser.smoothingTimeConstant;\n                    }\n\n                    v   = parseFloat(value);\n                    min = 0;\n                    max = 1;\n\n                    if ((v >= min) && (v <= max)) {\n                        this.analyser.smoothingTimeConstant = v;\n                    }\n\n                    break;\n                default:\n                    break;\n            }\n        }\n\n        return this;\n    }\n\n    /**\n     * This method creates data for drawing and executes drawing.\n     * @param {string} domain This argument is one of 'timeOverviewL', 'timeOverviewR', 'time', 'fft'.\n     * @param {AudioBuffer} buffer This argument is the instance of `AudioBuffer`. The data for drawing audio wave in overview of time domain is gotten from this argument.\n     * @return {Analyser} This is returned for method chain.\n     */\n    start(domain, buffer) {\n        const d = String(domain).replace(/-/g, '').toLowerCase();\n\n        let data = null;\n\n        switch (d) {\n            case 'timeoverviewl':\n                if (buffer instanceof AudioBuffer) {\n                    if (buffer.numberOfChannels > 0) {\n                        data = new Float32Array(buffer.length);\n                        data.set(buffer.getChannelData(0));\n                        this.timeOverviewL.start(data);\n                    }\n                }\n\n                break;\n            case 'timeoverviewr':\n                if (buffer instanceof AudioBuffer) {\n                    if (buffer.numberOfChannels > 1) {\n                        data = new Float32Array(buffer.length);\n                        data.set(buffer.getChannelData(1));\n                        this.timeOverviewR.start(data);\n                    }\n                }\n\n                break;\n            case 'time':\n                if (this.time.param('type') === 'uint') {\n                    data = new Uint8Array(this.analyser.fftSize);\n                    this.analyser.getByteTimeDomainData(data);\n                    this.time.start(data);\n                } else {\n                    data = new Float32Array(this.analyser.fftSize);\n                    this.analyser.getFloatTimeDomainData(data);\n                    this.time.start(data);\n                }\n\n                if (this.time.param('interval') === 'auto') {\n                    this.time.timerid = window.requestAnimationFrame(() => {\n                        this.start(domain);\n                    });\n                } else {\n                    this.time.timerid = window.setTimeout(() => {\n                        this.start(domain);\n                    }, this.time.param('interval'));\n                }\n\n                break;\n            case 'fft':\n                if (this.fft.param('type') === 'uint') {\n                    data = new Uint8Array(this.analyser.frequencyBinCount);\n                    this.analyser.getByteFrequencyData(data);\n                    this.fft.start(data);\n                } else {\n                    data = new Float32Array(this.analyser.frequencyBinCount);\n                    this.analyser.getFloatFrequencyData(data);\n                    this.fft.start(data, this.analyser.minDecibels, this.analyser.maxDecibels);\n                }\n\n                if (this.fft.param('interval') === 'auto') {\n                    this.fft.timerid = window.requestAnimationFrame(() => {\n                        this.start(domain);\n                    });\n                } else {\n                    this.fft.timerid = window.setTimeout(() => {\n                        this.start(domain);\n                    }, this.fft.param('interval'));\n                }\n\n                break;\n            default:\n                break;\n        }\n\n        return this;\n    }\n\n    /**\n     * This method stops drawing.\n     * @param {string} domain This argument is one of 'timeOverviewL', 'timeOverviewR', 'time', 'fft'.\n     * @return {Analyser} This is returned for method chain.\n     */\n    stop(domain) {\n        const d = String(domain).replace(/-/g, '').toLowerCase();\n\n        switch (d) {\n            case 'timeoverviewl':\n            case 'timeoverviewr':\n                break;\n            case 'time':\n                if (this.time.param('interval') === 'auto') {\n                    window.cancelAnimationFrame(this.time.timerid);\n                } else {\n                    window.clearTimeout(this.time.timerid);\n                }\n\n                this.time.timerid = null;\n\n                break;\n            case 'fft':\n                if (this.fft.param('interval') === 'auto') {\n                    window.cancelAnimationFrame(this.fft.timerid);\n                } else {\n                    window.clearTimeout(this.fft.timerid);\n                }\n\n                this.fft.timerid = null;\n\n                break;\n            default:\n                break;\n        }\n\n        return this;\n    }\n\n    /**\n     * This method selects domain for drawing.\n     * @param {string} domain This argument is one of 'timeOverviewL', 'timeOverviewR', 'time', 'fft'.\n     * @return {TimeOverview|Time|FFT|Analyser} This value is the instance of selected class.\n     */\n    domain(domain) {\n        const d = String(domain).replace(/-/g, '').toLowerCase();\n\n        switch (d) {\n            case 'timeoverviewl':\n            case 'timeoverviewr':\n                return this[`timeOverview${d.slice(-1).toUpperCase()}`];\n            case 'time':\n            case 'fft' :\n                return this[d];\n            default:\n                return this;\n        }\n    }\n\n    /**\n     * This method gets the instance of `AnalyserNode`.\n     * @return {AnalyserNode}\n     */\n    get() {\n        return this.analyser;\n    }\n\n    /** @override */\n    toString() {\n        return '[SoundModule Analyser]';\n    }\n}\n","'use strict';\n\n/**\n * This private class defines properties for multi track recording.\n * @constructor\n */\nexport class Recorder {\n    /**\n     * @param {AudioContext} context This argument is in order to use the interfaces of Web Audio API.\n     * @param {number} bufferSize This argument is buffer size for `ScriptProcessorNode`.\n     * @param {number} numberOfInputs This argument is the number of inputs for `ScriptProcessorNode`.\n     * @param {number} numberOfOutputs This argument the number of outputs for `ScriptProcessorNode`.\n     */\n    constructor(context, bufferSize, numberOfInputs, numberOfOutputs) {\n        this.sampleRate = context.sampleRate;\n\n        this.context   = context;\n        this.processor = context.createScriptProcessor(bufferSize, numberOfInputs, numberOfOutputs);\n\n        this.mixedLs = null;  /** @type {Float32Array} */\n        this.mixedRs = null;  /** @type {Float32Array} */\n\n        this.numberOfTracks = 0;\n        this.trackLs        = [];  /** @type {Array.<Array.<Float32Array>>} 2 dimensions array */\n        this.trackRs        = [];  /** @type {Array.<Array.<Float32Array>>} 2 dimensions array */\n\n        this.activeTrack = -1;    // There is not any active track in the case of -1\n        this.paused      = true;  // for preventing from the duplicate `onaudioprocess` event (`start` method)\n\n        this.gainL = 1;  // Gain of Left  channel\n        this.gainR = 1;  // Gain of Right channel\n    }\n\n    /**\n     * This method sets the max number of tracks.\n     * @param {number} numberOfTracks This argument is the max number of tracks. The default value is 1.\n     * @return {Recorder} This is returned for method chain.\n     */\n    setup(numberOfTracks) {\n        const n = parseInt(numberOfTracks, 10);\n\n        if (n > 0) {\n            this.numberOfTracks = n;\n\n            this.trackLs = new Array(this.numberOfTracks);\n            this.trackRs = new Array(this.numberOfTracks);\n\n            for (let i = 0; i < n; i++) { this.trackLs[i] = []; }  // n x array\n            for (let i = 0; i < n; i++) { this.trackRs[i] = []; }  // n x array\n        } else {\n            this.numberOfTracks = 1;\n\n            this.trackLs = new Array(this.numberOfTracks);\n            this.trackRs = new Array(this.numberOfTracks);\n\n            this.trackLs[0] = [];  // 1 * array\n            this.trackRs[0] = [];  // 1 * array\n        }\n\n        return this;\n    }\n\n    /**\n     * This method is getter or setter for parameters.\n     * @param {string|object} key This argument is property name in the case of string type.\n     *     This argument is pair of property and value in the case of associative array.\n     * @param {number} value This argument is the value of designated property. If this argument is omitted, This method is getter.\n     * @return {number|Recorder} This is returned as the value of designated property in the case of getter. Otherwise, this is returned for method chain.\n     */\n    param(key, value) {\n        if (Object.prototype.toString.call(arguments[0]) === '[object Object]') {\n            // Associative array\n            for (const k in arguments[0]) {\n                this.param(k, arguments[0][k]);\n            }\n        } else {\n            const k = String(key).replace(/-/g, '').toLowerCase();\n\n            let v   = null;\n            let min = null;\n            let max = null;\n\n            switch (k) {\n                case 'gainl':\n                case 'gainr':\n                    if (value === undefined) {\n                        return this[`gain${k.slice(-1).toUpperCase()}`];\n                    }\n\n                    v   = parseFloat(value);\n                    min = 0;\n                    max = 1;\n\n                    if ((v >= min) && (v <= max)) {\n                        this[`gain${k.slice(-1).toUpperCase()}`] = v;\n                    }\n\n                    break;\n                default:\n                    break;\n            }\n        }\n\n        return this;\n    }\n\n    /**\n     * This method selects active track.\n     * @param {number} track This argument is in order to select active track.\n     * @return {Recorder} This is returned for method chain.\n     */\n    ready(track) {\n        if (this.isTrack(track)) {\n            this.activeTrack = track;\n        } else {\n            this.activeTrack = -1;\n        }\n\n        return this;\n    }\n\n    /**\n     * This method starts recording. If there is not any active track, this method stops `onaudioprocess` event handler in the instance of `ScriptProcessorNode`.\n     * @return {Recorder} This is returned for method chain.\n     */\n    start() {\n        if ((this.activeTrack !== -1) && this.paused) {\n            this.paused = false;\n\n            const bufferSize = this.processor.bufferSize;\n\n            this.processor.onaudioprocess = event => {\n                if (this.activeTrack !== -1) {\n                    const inputLs = event.inputBuffer.getChannelData(0);\n                    const inputRs = event.inputBuffer.getChannelData(1);\n\n                    const recordedLs = new Float32Array(bufferSize);\n                    const recordedRs = new Float32Array(bufferSize);\n\n                    for (let i = 0; i < bufferSize; i++) {\n                        recordedLs[i] = this.gainL * inputLs[i];\n                        recordedRs[i] = this.gainR * inputRs[i];\n                    }\n\n                    this.trackLs[this.activeTrack].push(recordedLs);\n                    this.trackRs[this.activeTrack].push(recordedRs);\n                } else {\n                    this.processor.disconnect(0);\n                    this.processor.onaudioprocess = null;\n                }\n            };\n        }\n\n        return this;\n    }\n\n    /**\n     * This method turns off the all of tracks, and stops `onaudioprocess` event handler in the instance of `ScriptProcessorNode`.\n     * @return {Recorder} This is returned for method chain.\n     */\n    stop() {\n        this.activeTrack = -1;  // Flag becomes inactive\n        this.paused      = true;\n\n        // Stop `onaudioprocess` event\n        this.processor.disconnect(0);\n        this.processor.onaudioprocess = null;\n\n        return this;\n    }\n\n    /**\n     * This method determines whether the designated track number is valid.\n     * @param {number} track This argument is track number for validation.\n     * @return {boolean} If the designated track is valid range, this value is `true`. Otherwise, this value is `false`.\n     */\n    isTrack(track) {\n        const t = parseInt(track, 10);\n\n        return (t >= 0) && (t < this.numberOfTracks);\n    }\n\n    /**\n     * This method determines whether active track exists.\n     * @return {number} This is returned as active track.\n     */\n    getActiveTrack() {\n        return this.activeTrack;\n    }\n\n    /**\n     * This method flats recorded sounds in track.\n     * @param {string} channel This argument is either 'L' or 'R'.\n     * @param {number} track This argument is track number.\n     * @return {Float32Array} This is returned as array for flatten sound.\n     */\n    flatTrack(channel, track) {\n        if (!this.isTrack(track)) {\n            return null;\n        }\n\n        const tracks     = this[`track${channel}s`][track];\n        const bufferSize = this.processor.bufferSize;\n\n        const flattenTrack = new Float32Array(tracks.length * bufferSize);\n\n        for (let i = 0, len = tracks.length; i < len; i++) {\n            for (let j = 0; j < bufferSize; j++) {\n                flattenTrack[(i * bufferSize) + j] = tracks[i][j];\n            }\n        }\n\n        return flattenTrack;\n    }\n\n    /**\n     * This method synthesizes recorded sounds in track.\n     * @param {string} channel This argument is either 'L' or 'R'.\n     * @return {Float32Array} This is returned as array for synthesized sound.\n     */\n    mixTrack(channel) {\n        const tracks      = this[`track${channel}s`];\n        const mixes       = { 'values' : null, 'sum' : 0, 'num' : 0 };\n        const bufferSize  = this.processor.bufferSize;\n        let currentBuffer = 0;\n        let index         = 0;\n\n        // Calculate sound data size\n        let numberOfMaxBuffers = 0;\n\n        // Search the max number of Float32Arrays each track\n        for (const track of tracks) {\n            if (numberOfMaxBuffers < track.length) {\n                numberOfMaxBuffers = track.length;\n            }\n        }\n\n        mixes.values = new Float32Array(numberOfMaxBuffers * bufferSize);\n\n        while (true) {\n            for (let currentTrack = 0, len = tracks.length; currentTrack < len; currentTrack++) {\n                if (tracks[currentTrack][currentBuffer] instanceof Float32Array) {\n                    mixes.sum += tracks[currentTrack][currentBuffer][index];\n                    mixes.num++;\n                }\n            }\n\n            if (mixes.num > 0) {\n                const offset = currentBuffer * bufferSize;\n\n                // Average\n                mixes.values[offset + index] = mixes.sum / mixes.num;\n\n                // Clear\n                mixes.sum = 0;\n                mixes.num = 0;\n\n                // Next data\n                if (index < (bufferSize - 1)) {\n                    // Next element in Float32Array\n                    index++;\n                } else {\n                    // Next Float32Array\n                    currentBuffer++;\n                    index = 0;\n                }\n            } else {\n                return mixes.values;\n            }\n        }\n    }\n\n    /**\n     * This method synthesizes the all of recorded sounds in track.\n     * @return {Recorder} This is returned for method chain.\n     */\n    mix() {\n        // on the way of recording ?\n        if (this.activeTrack !== -1) {\n            this.stop();\n        }\n\n        this.mixedLs = this.mixTrack('L');\n        this.mixedRs = this.mixTrack('R');\n\n        return this;\n    }\n\n    /**\n     * This method clears recorded sound of the designated track.\n     * @param {number|string} track This argument is track for clearing.\n     * @return {Recorder} This is returned for method chain.\n     */\n    clear(track) {\n        // on the way of recording ?\n        if (this.activeTrack !== -1) {\n            this.stop();\n        }\n\n        if (String(track).toLowerCase() === 'all') {\n            for (const track of this.trackLs) { track.length = 0; }\n            for (const track of this.trackRs) { track.length = 0; }\n        } else {\n            if (this.isTrack(track)) {\n                this.trackLs[track].length = 0;\n                this.trackRs[track].length = 0;\n            }\n        }\n\n        return this;\n    }\n\n    /**\n     * This method creates WAVE file as Object URL or Data URL.\n     * @param {string|number} track This argument is the target track.\n     * @param {number} numberOfChannels This argument is in order to select stereo or monaural of WAVE file. The default value is 2.\n     * @param {number} qbit This argument is quantization bit of PCM. The default value is 16 (bit).\n     * @param {string} type This argument is one of 'blob', 'objecturl', 'base64', 'dataurl'.\n     * @return {Blob|string} This is returned as `Blob` or Object URL or Base64 or Data URL for WAVE file.\n     */\n    create(track, numberOfChannels, qbit, type) {\n        // on the way of recording ?\n        if (this.activeTrack !== -1) {\n            this.stop();\n        }\n\n        /** @type {Float32Array} */\n        let soundLs = null;\n\n        /** @type {Float32Array} */\n        let soundRs = null;\n\n        if (String(track).toLowerCase() === 'all') {\n            this.mix();\n\n            soundLs = this.mixedLs;\n            soundRs = this.mixedRs;\n        } else if (this.isTrack(track)) {\n            soundLs = this.flatTrack('L', track);\n            soundRs = this.flatTrack('R', track);\n        }\n\n        // Sound data exists ?\n        if ((soundLs.length === 0) && (soundRs.length === 0)) {\n            return '';\n        }\n\n        // PCM parameters\n        const CHANNEL = (numberOfChannels === 1) ? 1 : 2;\n        const QBIT    = (qbit === 8) ? 8 : 16;\n        const SIZE    = (CHANNEL === 1) ? Math.min(soundLs.length, soundRs.length) : (2 * Math.min(soundLs.length, soundRs.length));\n\n        // Parameters for WAVE file\n        const FMT_CHUNK  = 28;\n        const DATA_CHUNK =  8 + (SIZE * (QBIT / 8));\n        const CHUNK_SIZE = 36 + (SIZE * (QBIT / 8));\n        const RIFF_CHUNK =  8 + (FMT_CHUNK + DATA_CHUNK);\n        const RATE       = this.sampleRate;\n        const BPS        = RATE * CHANNEL * (QBIT / 8);\n        const DATA_SIZE  = SIZE * (QBIT / 8);\n\n        /** @type {Uint8Array|Int16Array} */\n        let sounds = null;\n\n        switch (QBIT) {\n            case 8:\n                sounds = new Uint8Array(SIZE);\n\n                for (let i = 0; i < SIZE; i++) {\n                    // Convert 8 bit unsigned integer (-1 -> 0, 0 -> 128, 1 -> 255)\n                    let binary = 0;\n\n                    if ((i % CHANNEL) === 0) {\n                        binary = ((soundLs[Math.floor(i / CHANNEL)] + 1) / 2) * (Math.pow(2, 8) - 1);  // Left channel\n                    } else {\n                        binary = ((soundRs[Math.floor(i / CHANNEL)] + 1) / 2) * (Math.pow(2, 8) - 1);  // Right channel\n                    }\n\n                    // for preventing from clipping\n                    if (binary > (Math.pow(2, 8) - 1)) { binary = (Math.pow(2, 8) - 1); }\n                    if (binary < (Math.pow(2, 0) - 1)) { binary = (Math.pow(2, 0) - 1); }\n\n                    sounds[i] = binary;\n                }\n\n                break;\n            case 16:\n                sounds = new Int16Array(SIZE);\n\n                for (let i = 0; i < SIZE; i++) {\n                    // Convert 16 bit integer (-1 -> -32768, 0 -> 0, 1 -> 32767)\n                    let binary = 0;\n\n                    if ((i % CHANNEL) === 0) {\n                        binary = soundLs[Math.floor(i / CHANNEL)] * Math.pow(2, 15);  // Left channel\n                    } else {\n                        binary = soundRs[Math.floor(i / CHANNEL)] * Math.pow(2, 15);  // Right channel\n                    }\n\n                    // for preventing from clipping\n                    if (binary > (+Math.pow(2, 15) - 1)) { binary =  Math.pow(2, 15) - 1; }\n                    if (binary < (-Math.pow(2, 15) - 1)) { binary = -Math.pow(2, 15) - 1; }\n\n                    sounds[i] = binary;\n                }\n\n                break;\n            default:\n                break;\n        }\n\n        // Create WAVE file (Object URL or Data URL)\n        const t = String(type).toLowerCase();\n\n        switch (t) {\n            case 'base64' :\n            case 'dataurl':\n                let wave = '';\n\n                wave += 'RIFF';\n                wave += String.fromCharCode(((CHUNK_SIZE >> 0) & 0xFF), ((CHUNK_SIZE >> 8) & 0xFF), ((CHUNK_SIZE >> 16) & 0xFF), ((CHUNK_SIZE >> 24) & 0xFF));\n                wave += 'WAVE';\n\n                // fmt chunk\n                wave += `fmt ${String.fromCharCode(16, 0, 0, 0)}`;\n                wave += String.fromCharCode(1, 0);\n\n                // fmt chunk -> Channels (Monaural or Stereo)\n                wave += String.fromCharCode(CHANNEL, 0);\n\n                // fmt chunk -> Sample rate\n                wave += String.fromCharCode(((RATE >> 0) & 0xFF), ((RATE >> 8) & 0xFF), ((RATE >> 16) & 0xFF), ((RATE >> 24) & 0xFF));\n\n                // fmt chunk -> Byte per second\n                wave += String.fromCharCode(((BPS >> 0) & 0xFF), ((BPS >> 8) & 0xFF), ((BPS >> 16) & 0xFF), ((BPS >> 24) & 0xFF));\n\n                // fmt chunk -> Block size\n                wave += String.fromCharCode((CHANNEL * (QBIT / 8)), 0);\n\n                // fmt chunk -> Byte per Sample\n                wave += String.fromCharCode(QBIT, 0);\n\n                // data chunk\n                wave += 'data';\n                wave += String.fromCharCode(((DATA_SIZE >> 0) & 0xFF), ((DATA_SIZE >> 8) & 0xFF), ((DATA_SIZE >> 16) & 0xFF), ((DATA_SIZE >> 24) & 0xFF));\n\n                for (let i = 0; i < SIZE; i++) {\n                    switch (QBIT) {\n                        case  8:\n                            wave += String.fromCharCode(sounds[i]);\n                            break;\n                        case 16:\n                            // The byte order in WAVE file is little endian\n                            wave += String.fromCharCode(((sounds[i] >> 0) & 0xFF), ((sounds[i] >> 8) & 0xFF));\n                            break;\n                        default:\n                            break;\n                    }\n                }\n\n                const base64 = window.btoa(wave);\n\n                if (t === 'base64') {\n                    return base64;\n                }\n\n                return `data:audio/wav;base64,${base64}`;\n            case 'blob'     :\n            case 'objecturl':\n            default         :\n                const waves = [];\n\n                waves[0] = 0x52;  // 'R'\n                waves[1] = 0x49;  // 'I'\n                waves[2] = 0x46;  // 'F'\n                waves[3] = 0x46;  // 'F'\n\n                waves[4] = (CHUNK_SIZE >>  0) & 0xFF;\n                waves[5] = (CHUNK_SIZE >>  8) & 0xFF;\n                waves[6] = (CHUNK_SIZE >> 16) & 0xFF;\n                waves[7] = (CHUNK_SIZE >> 24) & 0xFF;\n\n                waves[8]  = 0x57;  // 'W'\n                waves[9]  = 0x41;  // 'A'\n                waves[10] = 0x56;  // 'V'\n                waves[11] = 0x45;  // 'E'\n\n                // fmt chunk\n                waves[12] = 0x66;  // 'f'\n                waves[13] = 0x6D;  // 'm'\n                waves[14] = 0x74;  // 't'\n                waves[15] = 0x20;  // ' '\n\n                waves[16] = 16;\n                waves[17] =  0;\n                waves[18] =  0;\n                waves[19] =  0;\n\n                waves[20] = 1;\n                waves[21] = 0;\n\n                // fmt chunk -> Channels (Monaural or Stereo)\n                waves[22] = CHANNEL;\n                waves[23] = 0;\n\n                // fmt chunk -> Sample rate\n                waves[24] = (RATE >>  0) & 0xFF;\n                waves[25] = (RATE >>  8) & 0xFF;\n                waves[26] = (RATE >> 16) & 0xFF;\n                waves[27] = (RATE >> 24) & 0xFF;\n\n                // fmt chunk -> Byte per second\n                waves[28] = (BPS >>  0) & 0xFF;\n                waves[29] = (BPS >>  8) & 0xFF;\n                waves[30] = (BPS >> 16) & 0xFF;\n                waves[31] = (BPS >> 24) & 0xFF;\n\n                // fmt chunk -> Block size\n                waves[32] = CHANNEL * (QBIT / 8);\n                waves[33] = 0;\n\n                // fmt chunk -> Byte per Sample\n                waves[34] = QBIT;\n                waves[35] = 0;\n\n                // data chunk\n                waves[36] = 0x64;  // 'd'\n                waves[37] = 0x61;  // 'a'\n                waves[38] = 0x74;  // 't\n                waves[39] = 0x61;  // 'a'\n\n                waves[40] = (DATA_SIZE >>  0) & 0xFF;\n                waves[41] = (DATA_SIZE >>  8) & 0xFF;\n                waves[42] = (DATA_SIZE >> 16) & 0xFF;\n                waves[43] = (DATA_SIZE >> 24) & 0xFF;\n\n                for (let i = 0; i < SIZE; i++) {\n                    switch (QBIT) {\n                        case  8:\n                            waves[(RIFF_CHUNK - DATA_SIZE) + i] = sounds[i];\n                            break;\n                        case 16:\n                            // The byte order in WAVE file is little endian\n                            waves[(RIFF_CHUNK - DATA_SIZE) + (2 * i) + 0] = ((sounds[i] >> 0) & 0xFF);\n                            waves[(RIFF_CHUNK - DATA_SIZE) + (2 * i) + 1] = ((sounds[i] >> 8) & 0xFF);\n                            break;\n                        default:\n                            break;\n                    }\n                }\n\n                const blob = new Blob([new Uint8Array(waves)], { 'type' : 'audio/wav' });\n\n                if (t === 'blob') {\n                    return blob;\n                }\n\n                return window.URL.createObjectURL(blob);\n        }\n    }\n\n    /** @override */\n    toString() {\n        return '[SoundModule Recorder]';\n    }\n}\n","'use strict';\n\n/**\n * This private class defines properties for sound session on network.\n * @constructor\n */\nexport class Session {\n    static BUFFER_SIZE = 2048;\n\n    /**\n     * @param {AudioContext} context This argument is in order to use the interfaces of Web Audio API.\n     * @param {number} bufferSize This argument is buffer size for `ScriptProcessorNode`.\n     * @param {number} numberOfInputs This argument is the number of inputs for `ScriptProcessorNode`.\n     * @param {number} numberOfOutputs This argument the number of outputs for `ScriptProcessorNode`.\n     * @param {Analyser} analyser This argument is the instance of `Analyser`.\n     */\n    constructor(context, bufferSize, numberOfInputs, numberOfOutputs, analyser) {\n        this.isActive = false;\n\n        this.context  = context;\n        this.analyser = analyser;  // the instance of `Analyser`\n\n        // HACK: Fix buffer size on different environments\n        this.sender   = context.createScriptProcessor(Session.BUFFER_SIZE, numberOfInputs, numberOfOutputs);\n        this.receiver = context.createScriptProcessor(Session.BUFFER_SIZE, numberOfInputs, numberOfOutputs);\n\n        this.websocket = null;  // for the instance of `WebSocket`\n        this.paused    = true;  // for preventing from the duplicate `onaudioprocess` event (`start` method)\n    }\n\n    /**\n     * This method creates the instance of `WebSocket` and registers event handlers.\n     * @param {boolean} tls This argument is in order to select protocol (either `wss` or `ws`).\n     * @param {string} host This argument is server's hostname.\n     * @param {number} port This argument is port number for connection.\n     * @param {string} path This argument is file that is executed in server side.\n     * @param {function} openCallback This argument is invoked as `onopen` event handler in the instance of `WebSocket`.\n     * @param {function} closeCallback This argument is invoked as `onclose` event handler in the instance of `WebSocket`.\n     * @param {function} errorCallback This argument is invoked as `onerror` event handler in the instance of `WebSocket`.\n     * @return {Session} This is returned for method chain.\n     */\n    setup(tls, host, port, path, openCallback, closeCallback, errorCallback) {\n        /*\n        if (!navigator.onLine) {\n            // Clear\n            this.isActive = false;\n            this.paused   = true;\n            this.connect();\n            this.websocket = null;\n\n            throw new Error('Now Offline.');\n        }\n        */\n\n        // The argument is associative array ?\n        if (Object.prototype.toString.call(arguments[0]) === '[object Object]') {\n            const properties = arguments[0];\n\n            if ('tls' in properties) {\n                tls = properties.tls;\n            }\n\n            if ('host' in properties) {\n                host = properties.host;\n            }\n\n            if ('port' in properties) {\n                port = properties.port;\n            }\n\n            if ('path' in properties) {\n                path = properties.path;\n            }\n\n            if ('open' in properties) {\n                openCallback = properties.open;\n            }\n\n            if ('close' in properties) {\n                closeCallback = properties.close;\n            }\n\n            if ('error' in properties) {\n                errorCallback = properties.error;\n            }\n        }\n\n        const scheme = tls ? 'wss://' : 'ws://';\n\n        if (path.charAt(0) !== '/') {\n            path = `/${path}`;\n        }\n\n        const p = parseInt(port, 10);\n\n        if (isNaN(p) || (p < 0) || (p > 65535)) {\n            return this;\n        }\n\n        this.websocket = new WebSocket(`${scheme}${host}:${p}${path}`);\n        this.websocket.binaryType = 'arraybuffer';\n\n        this.websocket.onopen = event => {\n            if (Object.prototype.toString.call(openCallback) === '[object Function]') {\n                openCallback(event);\n            }\n        };\n\n        this.websocket.onclose = event => {\n            this.isActive = false;\n            this.paused   = true;\n\n            this.connect();\n\n            if (Object.prototype.toString.call(closeCallback) === '[object Function]') {\n                closeCallback(event);\n            }\n        };\n\n        this.websocket.onerror = event => {\n            this.isActive = false;\n            this.paused   = true;\n\n            this.connect();\n\n            if (Object.prototype.toString.call(errorCallback) === '[object Function]') {\n                errorCallback(event);\n            }\n        };\n\n        this.websocket.onmessage = event => {\n            if (!this.isActive) {\n                this.analyser.stop('time');\n                this.analyser.stop('fft');\n\n                return;\n            }\n\n            if (event.data instanceof ArrayBuffer) {\n                const total  = event.data.byteLength / Float32Array.BYTES_PER_ELEMENT;\n                const length = Math.floor(total / 2);\n                const offset = length * Float32Array.BYTES_PER_ELEMENT;\n\n                const bufferLs = new Float32Array(event.data,      0, length);  // Get Left  channel data\n                const bufferRs = new Float32Array(event.data, offset, length);  // Get Right channel data\n\n                // Start drawing sound wave\n                this.analyser.start('time');\n                this.analyser.start('fft');\n\n                this.receiver.onaudioprocess = event => {\n                    const outputLs = event.outputBuffer.getChannelData(0);\n                    const outputRs = event.outputBuffer.getChannelData(1);\n\n                    if (bufferLs instanceof Float32Array) { outputLs.set(bufferLs); }\n                    if (bufferRs instanceof Float32Array) { outputRs.set(bufferRs); }\n\n                    // bufferLs = null;\n                    // bufferRs = null;\n\n                    if (!this.isActive || (this.websocket === null)) {\n                        this.analyser.stop('time');\n                        this.analyser.stop('fft');\n                    }\n                };\n            }\n        };\n\n        return this;\n    }\n\n    /**\n     * This method connects nodes according to state.\n     * @return {Session} This is returned for method chain.\n     */\n    connect() {\n        // Clear connection\n        this.receiver.disconnect(0);\n        this.sender.disconnect(0);\n\n        this.receiver.onaudioprocess = null;\n        this.sender.onaudioprocess   = null;\n\n        if (this.isActive) {\n            // ScriptProcessorNode (Input) -> Analyser\n            this.receiver.connect(this.analyser.input);\n\n            // ScriptProcessorNode (Input) -> AudioDestinationNode (Output)\n            this.receiver.connect(this.context.destination);\n        } else {\n            this.paused = true;\n        }\n\n        return this;\n    }\n\n    /**\n     * This method sends sound data to server.\n     * @return {Session} This is returned for method chain.\n     */\n    start() {\n        if (this.isActive && this.isConnected() && this.paused) {\n            this.paused = false;\n\n            const bufferSize = this.sender.bufferSize;\n\n            this.sender.onaudioprocess = event => {\n                if (this.isActive && this.isConnected()) {\n                    const inputLs = event.inputBuffer.getChannelData(0);\n                    const inputRs = event.inputBuffer.getChannelData(1);\n\n                    const buffer = new Float32Array(2 * bufferSize);\n                    const offset = parseInt((buffer.length / 2), 10);\n\n                    for (let i = 0; i < bufferSize; i++) {\n                        buffer[i]          = inputLs[i];\n                        buffer[offset + i] = inputRs[i];\n                    }\n\n                    if (this.websocket.bufferedAmount === 0) {\n                        this.websocket.send(buffer);\n                    }\n                }\n            };\n        }\n\n        return this;\n    }\n\n    /**\n     * This method closes connection to server and destroys the instance of `WebSocket`.\n     * @return {Session} This is returned for method chain.\n     */\n    close() {\n        if (this.websocket instanceof WebSocket) {\n            this.isActive = false;\n            this.paused   = true;\n\n            this.connect();\n            this.websocket.close();\n\n            this.websocket = null;\n        }\n\n        return this;\n    }\n\n    /**\n     * This method determines whether there is the connection to server.\n     * @return {boolean} If the connection to server exists, this value is `true`. Otherwise, this value is `false`.\n     */\n    isConnected() {\n        return (this.websocket instanceof WebSocket) && (this.websocket.readyState === WebSocket.OPEN);\n    }\n\n    /**\n     * This method toggles active state or inactive state.\n     * @param {boolean|string} state If this argument is boolean, state is changed the designated.\n     *     If this argument is 'toggle', state is changed automatically.\n     *     If this argument is omitted, this method is getter.\n     * @param {function} stateCallback This argument is invoked when `bufferedAmount` equals to 0.\n     * @param {function} waitCallback This argument is invoked until `bufferedAmount` equals to 0.\n     * @return {Session} This is returned for method chain.\n     */\n    state(state, stateCallback, waitCallback) {\n        if (state === undefined) {\n            return this.isActive;\n        }\n\n        if (Object.prototype.toString.call(waitCallback) === '[object Function]') {\n            waitCallback();\n        }\n\n        const intervalid = window.setInterval(() => {\n            if ((this.websocket instanceof WebSocket) && (this.websocket.bufferedAmount !== 0)) {\n                return;\n            }\n\n            if (String(state).toLowerCase() === 'toggle') {\n                this.isActive = !this.isActive;\n            } else {\n                this.isActive = Boolean(state);\n            }\n\n            this.connect();\n\n            if (Object.prototype.toString.call(stateCallback) === '[object Function]') {\n                stateCallback();\n            }\n\n            window.clearInterval(intervalid);\n        }, 10);\n\n        return this;\n    }\n\n    /**\n     * This method gets the instance of `WebSocket`.\n     * @return {WebSocket}\n     */\n    get() {\n        return this.websocket;\n    }\n\n    /** @override */\n    toString() {\n        return '[SoundModule Session]';\n    }\n}\n","'use strict';\n\n/**\n * This private class defines common properties for effector classes.\n * @constructor\n */\nexport class Effector {\n    /**\n     * @param {AudioContext} context This argument is in order to use the interfaces of Web Audio API.\n     * @param {number} bufferSize This argument is buffer size for `ScriptProcessorNode`.\n     */\n    constructor(context, bufferSize) {\n        this.isActive = true;\n\n        this.context = context;\n\n        // for connecting external node\n        this.input  = context.createGain();\n        this.output = context.createGain();\n\n        // for LFO (Low Frequency Oscillator)\n        // LFO changes parameter cyclically\n        this.lfo       = context.createOscillator();\n        this.depth     = context.createGain();\n        this.rate      = this.lfo.frequency;\n        this.processor = context.createScriptProcessor(bufferSize, 2, 2);\n\n        // for legacy browsers\n        this.lfo.start = this.lfo.start || this.lfo.noteOn;\n        this.lfo.stop  = this.lfo.stop  || this.lfo.noteOff;\n\n        this.values = {};\n\n        this.isStop = true;\n    }\n\n    /**\n     * This abstract method gets or sets parameter.\n     * @param {string|object} key This argument is property name in the case of string type.\n     *     This argument is pair of property and value in the case of associative array.\n     * @param {number|string} value This argument is the value of designated property. If this argument is omitted, This method is getter.\n     * @return {number|Effector} This is returned as the value of designated property in the case of getter. Otherwise, this is returned for method chain.\n     * @abstract\n     */\n    param() {\n        return this;\n    }\n\n    /**\n     * This abstract method connects nodes according to state.\n     * @return {Effector} This is returned for method chain.\n     * @abstract\n     */\n    connect() {\n        return this;\n    }\n\n    /**\n     * This method starts LFO. Namely, this method starts effector.\n     * @param {number} startTime This argument is in order to schedule parameter.\n     * @return {Effector} This is returned for method chain.\n     */\n    start(startTime) {\n        if (this.isActive && this.isStop) {\n            let s = parseFloat(startTime);\n\n            if (isNaN(s) || (s < this.context.currentTime)) {\n                s = this.context.currentTime;\n            }\n\n            this.lfo.start(s);\n            this.isStop = false;\n        }\n\n        return this;\n    }\n\n    /**\n     * This method stops LFO, and creates the instance of `OscillatorNode` again.\n     * @param {number} stopTime This argument is in order to schedule parameter.\n     * @param {number} releaseTime This argument is in order to schedule parameter when it is necessary to consider release time.\n     * @return {Effector} This is returned for method chain.\n     */\n    stop(stopTime, releaseTime) {\n        if (this.isActive && !this.isStop) {\n            let s = parseFloat(stopTime);\n            let r = parseFloat(releaseTime);\n\n            if (isNaN(s) || (s < this.context.currentTime)) {\n                s = this.context.currentTime;\n            }\n\n            if (isNaN(r) || (r < 0)) {\n                r = 0;\n            }\n\n            // for saving value\n            const type = this.lfo.type;\n            const rate = this.lfo.frequency.value;\n\n            // Destroy the instance of `OscillatorNode`\n            this.lfo.stop(s + r);\n\n            // Create the instance of `OscillatorNode` again\n            this.lfo = this.context.createOscillator();\n\n            // for legacy browsers\n            this.lfo.start = this.lfo.start || this.lfo.noteOn;\n            this.lfo.stop  = this.lfo.stop  || this.lfo.noteOff;\n\n            // Set the saved value\n            this.lfo.type            = type;\n            this.lfo.frequency.value = rate;\n\n            this.rate = this.lfo.frequency;\n\n            this.isStop = true;\n        }\n\n        return this;\n    }\n\n    /**\n     * This method toggles active state or inactive state.\n     * @param {boolean|string} state If this argument is boolean, state is changed the designated.\n     *     If this argument is 'toggle', state is changed automatically.\n     *     If this argument is omitted, this method is getter.\n     * @return {boolean|Effector} This is returned as current state. Otherwise, this is returned for method chain.\n     */\n    state(state) {\n        if (state === undefined) {\n            return this.isActive;\n        }\n\n        if (String(state).toLowerCase() === 'toggle') {\n            this.isActive = !this.isActive;\n        } else {\n            this.isActive = Boolean(state);\n        }\n\n        // Change connection\n        this.connect();\n\n        // Start LFO\n        this.start(this.context.currentTime);\n\n        return this;\n    }\n\n    /**\n     * This method gets effecter's parameters as associative array.\n     * @return {object}\n     * @abstract\n     */\n    params() {\n        return {};\n    }\n\n    /**\n     * This method gets effecter's parameters as JSON.\n     * @return {string}\n     * @abstract\n     */\n    toJSON() {\n        return JSON.stringify(this.params());\n    }\n\n    /** @override */\n    toString() {\n        return '[SoundModule Effector]';\n    }\n}\n","'use strict';\n\nimport { Effector } from './Effector';\n\n/**\n * Effector's subclass\n * @constructor\n * @extends {Effector}\n */\nexport class Stereo extends Effector {\n    static MAX_DELAY_TIME = 1;  // Max delay time is 1000 [ms]\n\n    /**\n     * @param {AudioContext} context This argument is in order to use the interfaces of Web Audio API.\n     * @param {number} bufferSize This argument is buffer size for `ScriptProcessorNode`.\n     */\n    constructor(context, bufferSize) {\n        super(context, bufferSize);\n\n        this.splitter = context.createChannelSplitter(2);\n        this.merger   = context.createScriptProcessor(bufferSize, 2, 2);\n        this.delayL   = context.createDelay(Stereo.MAX_DELAY_TIME);\n        this.delayR   = context.createDelay(Stereo.MAX_DELAY_TIME);\n\n        // Initialize parameters\n        this.delayL.delayTime.value = 0;\n        this.delayR.delayTime.value = 0;\n\n        // `Stereo` is not connected by default\n        this.state(false);\n    }\n\n    /** @override */\n    param(key, value) {\n        if (Object.prototype.toString.call(arguments[0]) === '[object Object]') {\n            // Associative array\n            for (const k in arguments[0]) {\n                this.param(k, arguments[0][k]);\n            }\n        } else {\n            const k = String(key).replace(/-/g, '').toLowerCase();\n\n            let v   = null;\n            let min = null;\n            let max = null;\n\n            switch (k) {\n                case 'delaytime':\n                case 'time'     :\n                    if (value === undefined) {\n                        return this.delayL.delayTime.value;\n                    }\n\n                    v   = parseFloat(value);\n                    min = 0;\n                    max = Stereo.MAX_DELAY_TIME;\n\n                    if ((v >= min) && (v <= max)) {\n                        this.delayL.delayTime.value = v;\n                        this.delayR.delayTime.value = v;\n                    }\n\n                    break;\n                default:\n                    break;\n            }\n        }\n\n        return this;\n    }\n\n    /** @override */\n    connect() {\n        // Clear connection\n        this.input.disconnect(0);\n        this.splitter.disconnect(0);\n        this.delayL.disconnect(0);\n        this.delayR.disconnect(0);\n        this.merger.disconnect(0);\n\n        if (this.isActive) {\n            // Effect ON\n\n            // GainNode (Input) -> ChannelSplitterNode -> DelayNode (L) / (R) -> ScriptProcessorNode -> GainNode (Output)\n            this.input.connect(this.splitter);\n            this.splitter.connect(this.delayL, 0, 0);\n            this.splitter.connect(this.delayR, 1, 0);\n            this.delayL.connect(this.merger);\n            this.delayR.connect(this.merger);\n            this.merger.connect(this.output);\n        } else {\n            // Effect OFF\n\n            // GainNode (Input) -> GainNode (Output)\n            this.input.connect(this.output);\n        }\n\n        return this;\n    }\n\n    /** @override */\n    start() {\n        if (this.isActive && this.isStop) {\n            this.isStop = false;\n\n            const bufferSize = this.merger.bufferSize;\n\n            this.merger.onaudioprocess = event => {\n                const inputLs  = event.inputBuffer.getChannelData(0);\n                const inputRs  = event.inputBuffer.getChannelData(1);\n                const outputLs = event.outputBuffer.getChannelData(0);\n                const outputRs = event.outputBuffer.getChannelData(1);\n\n                if (this.isActive && (this.delayL.delayTime.value !== 0) && (this.delayR.delayTime.value !== 0)) {\n                    for (let i = 0; i < bufferSize; i++) {\n                        outputLs[i] =  inputLs[i];\n                        outputRs[i] = -inputRs[i];\n                    }\n                } else {\n                    outputLs.set(inputLs);\n                    outputRs.set(inputRs);\n                }\n            };\n        }\n\n        return this;\n    }\n\n    /** @override */\n    stop() {\n        // Effector's state is active ?\n        if (this.isActive) {\n            // Stop `onaudioprocess` event\n            this.merger.disconnect(0);\n            this.merger.onaudioprocess = null;\n        }\n\n        return this;\n    }\n\n    /** @override */\n    params() {\n        const params = {\n            'state' : this.isActive,\n            'time'  : this.delayL.delayTime.value\n        };\n\n        return params;\n    }\n\n    /** @override */\n    toString() {\n        return '[SoundModule Stereo]';\n    }\n}\n","'use strict';\n\nimport { Effector } from './Effector';\n\n/**\n * Effector's subclass\n * @constructor\n * @extends {Effector}\n */\nexport class Compressor extends Effector {\n    /**\n     * @param {AudioContext} context This argument is in order to use the interfaces of Web Audio API.\n     * @param {number} bufferSize This argument is buffer size for `ScriptProcessorNode`.\n     */\n    constructor(context, bufferSize) {\n        super(context, bufferSize);\n\n        this.compressor = context.createDynamicsCompressor();\n\n        // Set default value\n        this.compressor.threshold.value = -24;\n        this.compressor.knee.value      = 30;\n        this.compressor.ratio.value     = 12;\n        this.compressor.attack.value    = 0.003;\n        this.compressor.release.value   = 0.25;\n\n        // `Compressor` is connected by default\n        this.state(true);\n    }\n\n    /** @override */\n    param(key, value) {\n        if (Object.prototype.toString.call(arguments[0]) === '[object Object]') {\n            // Associative array\n            for (const k in arguments[0]) {\n                this.param(k, arguments[0][k]);\n            }\n        } else {\n            const k = String(key).replace(/-/g, '').toLowerCase();\n\n            if (k in this.compressor) {\n                if (value === undefined) {\n                    return this.compressor[k].value;\n                }\n\n                const v = parseFloat(value);\n\n                const minValues = {\n                    'threshold' : -100,\n                    'knee'      : 0,\n                    'ratio'     : 1,\n                    'attack'    : 0,\n                    'release'   : 0\n                };\n\n                const maxValues = {\n                    'threshold' : 0,\n                    'knee'      : 40,\n                    'ratio'     : 20,\n                    'attack'    : 1,\n                    'release'   : 1\n                };\n\n                const min = minValues[k];\n                const max = maxValues[k];\n\n                if ((v >= min) && (v <= max)) {\n                    this.compressor[k].value = v;\n                }\n            }\n        }\n\n        return this;\n    }\n\n    /** @override */\n    connect() {\n        // Clear connection\n        this.input.disconnect(0);\n        this.compressor.disconnect(0);\n\n        if (this.isActive) {\n            // Effect ON\n            // GainNode (Input) -> DynamicsCompressorNode -> GainNode (Output)\n            this.input.connect(this.compressor);\n            this.compressor.connect(this.output);\n        } else {\n            // Effect OFF\n            // GainNode (Input) -> GainNode (Output)\n            this.input.connect(this.output);\n        }\n\n        return this;\n    }\n\n    /** @override */\n    params() {\n        const params = {\n            'state'     : this.isActive,\n            'threshold' : this.compressor.threshold.value,\n            'knee'      : this.compressor.knee.value,\n            'ratio'     : this.compressor.ratio.value,\n            'attack'    : this.compressor.attack.value,\n            'release'   : this.compressor.release.value\n        };\n\n        return params;\n    }\n\n    /** @override */\n    toString() {\n        return '[SoundModule Compressor]';\n    }\n}\n","'use strict';\n\nimport { Effector } from './Effector';\n\n/**\n * Effector's subclass\n * @constructor\n * @extends {Effector}\n */\nexport class Distortion extends Effector {\n    static CLEAN      = 'clean';\n    static CRUNCH     = 'crunch';\n    static OVERDRIVE  = 'overdrive';\n    static DISTORTION = 'distortion';\n    static FUZZ       = 'fuzz';\n\n    /**\n     * This class (static) method creates the instance of `Float32Array` for distortion.\n     * @param {string} type This argument is one of 'clean', 'crunch', 'overdrive', 'distortion', 'fuzz'.\n     * @param {number} amount This argument is the depth of distortion.\n     * @param {number} numberOfSamples This argument is the size of `Float32Array`.\n     * @return {Float32Array|null} This is `curve` property in `WaveShaperNode`.\n     */\n    static createCurve = (type, amount, numberOfSamples) => {\n        // This algorithms are from https://github.com/Theodeus/tuna/blob/master/tuna.js#L1301,L1359\n        if ((amount > 0) && (amount < 1)) {\n            const curves = new Float32Array(numberOfSamples);\n\n            let x   = 0;\n            let y   = 0;\n            let a   = 0;\n            let k   = 0;\n            let abx = 0;\n\n            switch (type) {\n                case Distortion.CRUNCH:\n                    a = 1 - amount > 0.99 ? 0.99 : 1 - amount;\n\n                    for (let i = 0; i < numberOfSamples; i++) {\n                        x = i * 2 / numberOfSamples - 1;\n                        abx = Math.abs(x);\n\n                        if (abx < a) {\n                            y = abx;\n                        } else if (abx > a) {\n                            y = a + (abx - a) / (1 + Math.pow((abx - a) / (1 - a), 2));\n                        } else if (abx > 1) {\n                            y = abx;\n                        }\n\n                        curves[i] = (x === 0 ? 1 : Math.abs(x) / x) * y * (1 / ((a + 1) / 2));\n                    }\n\n                    /*\n                    const a    = 2 + Math.round(amount * 14);\n                    const bits = Math.round(Math.pow(2, a - 1));\n\n                    let x = 0;\n\n                    for (let i = 0; i < numberOfSamples; i++) {\n                        x = i * 2 / numberOfSamples - 1;\n                        curves[i] = Math.round(x * bits) / bits;\n                    }\n                    */\n\n                    break;\n                case Distortion.OVERDRIVE:\n                    k = (2 * amount) / (1 - amount);\n\n                    for (let i = 0; i < numberOfSamples; i++) {\n                        // LINEAR INTERPOLATION: x := (c - a) * (z - y) / (b - a) + y\n                        // a = 0, b = 2048, z = 1, y = -1, c = i\n                        const x = (((i - 0) * (1 - (-1))) / (numberOfSamples - 0)) + (-1);\n                        curves[i] = ((1 + k) * x) / (1 + k * Math.abs(x));\n                    }\n\n                    /*\n                    let x = 0;\n\n                    for (let i = 0; i < numberOfSamples; i++) {\n                        x = i * 2 / numberOfSamples - 1;\n\n                        if (x < -0.08905) {\n                            curves[i] = (-3 / 4) * (1 - (Math.pow((1 - (Math.abs(x) - 0.032857)), 12)) + (1 / 3) * (Math.abs(x) - 0.032847)) + 0.01;\n                        } else if (x >= -0.08905 && x < 0.320018) {\n                            curves[i] = (-6.153 * (x * x)) + 3.9375 * x;\n                        } else {\n                            curves[i] = 0.630035;\n                        }\n                    }\n                    */\n\n                    break;\n                case Distortion.DISTORTION:\n                    a = 1 - amount;\n\n                    for (let i = 0; i < numberOfSamples; i++) {\n                        x = i * 2 / numberOfSamples - 1;\n                        y = x < 0 ? -Math.pow(Math.abs(x), a + 0.04) : Math.pow(x, a);\n                        curves[i] = (Math.exp(2 * y) - Math.exp(-2 * y)) / (Math.exp(2 * y) + Math.exp(-2 * y));\n                    }\n\n                    break;\n                case Distortion.FUZZ:\n                    for (let i = 0; i < numberOfSamples; i++) {\n                        x = ((i * 2) / numberOfSamples) - 1;\n                        y = ((0.5 * Math.pow((x + 1.4), 2)) - 1) * y >= 0 ? 5.8 : 1.2;\n\n                        curves[i] = (Math.exp(y) - Math.exp(-y)) / (Math.exp(y) + Math.exp(-y));\n                    }\n\n                    break;\n                case Distortion.CLEAN:\n                default:\n                    return null;\n            }\n\n            return curves;\n        }\n\n        return null;  // Clean sound (default value)\n    };\n\n    /**\n     * @param {AudioContext} context This argument is in order to use the interfaces of Web Audio API.\n     * @param {number} bufferSize This argument is buffer size for `ScriptProcessorNode`.\n     */\n    constructor(context, bufferSize) {\n        super(context, bufferSize);\n\n        this.distortion = context.createWaveShaper();\n        this.drive      = context.createGain();\n        this.color      = context.createBiquadFilter();\n        this.tone       = context.createBiquadFilter();\n\n        // Distortion type\n        this.type = Distortion.CLEAN;\n\n        // for creating curve\n        this.amount          = 0.5;\n        this.numberOfSamples = 4096;\n\n        // Initialize parameters\n        this.drive.gain.value      = 1;\n        this.color.type            = (typeof this.color.type === 'string') ? 'bandpass' : (this.color.BANDPASS || 2);\n        this.color.frequency.value = 350;\n        this.color.Q.value         = Math.SQRT1_2;\n        this.color.gain.value      = 0;  // Not used\n        this.tone.type             = (typeof this.tone.type === 'string') ? 'lowpass' : (this.tone.LOWPASS || 0);\n        this.tone.frequency.value  = 350;\n        this.tone.Q.value          = Math.SQRT1_2;\n        this.tone.gain.value       = 0;  // Not used\n\n        // `Distortion` is not connected by default\n        this.state(false);\n    }\n\n    /** @override */\n    param(key, value) {\n        if (Object.prototype.toString.call(arguments[0]) === '[object Object]') {\n            // Associative array\n            for (const k in arguments[0]) {\n                this.param(k, arguments[0][k]);\n            }\n        } else  {\n            const k = String(key).replace(/-/g, '').toLowerCase();\n\n            let v   = null;\n            let min = null;\n            let max = null;\n\n            switch (k) {\n                case 'curve':\n                    if (value === undefined) {\n                        return this.distortion.curve;\n                    }\n\n                    let curve = null;\n\n                    switch (String(value).toLowerCase()) {\n                        case Distortion.CLEAN:\n                            this.type = Distortion.CLEAN;\n                            curve = Distortion.createCurve(Distortion.CLEAN, this.amount, this.numberOfSamples);\n                            break;\n                        case Distortion.CRUNCH:\n                            this.type = Distortion.CRUNCH;\n                            curve = Distortion.createCurve(Distortion.CRUNCH, this.amount, this.numberOfSamples);\n                            break;\n                        case Distortion.OVERDRIVE:\n                            this.type = Distortion.OVERDRIVE;\n                            curve = Distortion.createCurve(Distortion.OVERDRIVE, this.amount, this.numberOfSamples);\n                            break;\n                        case Distortion.DISTORTION:\n                            this.type = Distortion.DISTORTION;\n                            curve = Distortion.createCurve(Distortion.DISTORTION, this.amount, this.numberOfSamples);\n                            break;\n                        case Distortion.FUZZ:\n                            this.type = Distortion.FUZZ;\n                            curve = Distortion.createCurve(Distortion.FUZZ, this.amount, this.numberOfSamples);\n                            break;\n                        default:\n                            if (value instanceof Float32Array) {\n                                curve = value;\n                            }\n\n                            break;\n                    }\n\n                    this.distortion.curve = curve;\n\n                    break;\n                case 'amount':\n                    if (value === undefined) {\n                        return this.amount;\n                    }\n\n                    v = parseFloat(value);\n\n                    if ((v > 0) && (v < 1)) {\n                        this.amount = v;\n                        this.param('curve', this.type);\n                    }\n\n                    break;\n                case 'samples':\n                    if (value === undefined) {\n                        return this.numberOfSamples;\n                    }\n\n                    v = parseInt(value, 10);\n\n                    if (v >= 0) {\n                        this.numberOfSamples = v;\n                        this.param('curve', this.type);\n                    }\n\n                    break;\n                case 'drive':\n                    if (value === undefined) {\n                        return this.drive.gain.value;\n                    }\n\n                    v   = parseFloat(value);\n                    min = 0;\n                    max = 100;\n\n                    if ((v >= min) && (v <= max)) {\n                        this.drive.gain.value = v;\n                    }\n\n                    break;\n                case 'color':\n                case 'tone' :\n                    if (value === undefined) {\n                        return this[k].frequency.value;\n                    }\n\n                    v   = parseFloat(value);\n                    min = 10;\n                    max = this.context.sampleRate / 2;\n\n                    if ((v >= min) && (v <= max)) {\n                        this[k].frequency.value = v;\n                    }\n\n                    break;\n                default:\n                    break;\n            }\n        }\n\n        return this;\n    }\n\n    /** @override */\n    connect() {\n        // Clear connection\n        this.input.disconnect(0);\n        this.color.disconnect(0);\n        this.drive.disconnect(0);\n        this.distortion.disconnect(0);\n        this.tone.disconnect(0);\n\n        if (this.isActive) {\n            // Effect ON\n\n            // GainNode (Input) -> BiquadFilterNode (Color) -> WaveShaperNode (Distortion) -> GainNode (Drive) -> BiquadFilterNode (Tone) -> GainNode (Output)\n            this.input.connect(this.color);\n            this.color.connect(this.drive);\n            this.drive.connect(this.distortion);\n            this.distortion.connect(this.tone);\n            this.tone.connect(this.output);\n        } else {\n            // Effect OFF\n\n            // GainNode (Input) -> GainNode (Output)\n            this.input.connect(this.output);\n        }\n\n        return this;\n    }\n\n    /** @override */\n    params() {\n        const params = {\n            'state'   : this.isActive,\n            'curve'   : this.type,\n            'amount'  : this.amount,\n            'samples' : this.numberOfSamples,\n            'drive'   : this.drive.gain.value,\n            'color'   : this.color.frequency.value,\n            'tone'    : this.tone.frequency.value\n        };\n\n        return params;\n    }\n\n    /** @override */\n    toString() {\n        return '[SoundModule Distortion]';\n    }\n}\n","'use strict';\n\nimport { Effector }  from './Effector';\n\n/**\n * Effector's subclass\n * @constructor\n * @extends {Effector}\n */\nexport class Wah extends Effector {\n    /**\n     * @param {AudioContext} context This argument is in order to use the interfaces of Web Audio API.\n     * @param {number} bufferSize This argument is buffer size for `ScriptProcessorNode`.\n     */\n    constructor(context, bufferSize) {\n        super(context, bufferSize);\n\n        this.autoWah = false;\n\n        this.lowpass          = context.createBiquadFilter();\n        this.envelopeFollower = context.createWaveShaper();\n        this.sensitivity      = context.createBiquadFilter();\n\n        // Initialize parameters\n        this.lowpass.type            = (typeof this.lowpass.type === 'string') ? 'lowpass' : (this.lowpass.LOWPASS || 0);\n        this.lowpass.frequency.value = this.autoWah ? 20 : 350;\n        this.lowpass.Q.value         = 1;\n        this.lowpass.gain.value      = 0;  // Not used\n\n        this.envelopeFollower.curve = new Float32Array([1, 0, 1]);\n\n        this.sensitivity.type            = (typeof this.lowpass.type === 'string') ? 'lowpass' : (this.lowpass.LOWPASS || 0);\n        this.sensitivity.frequency.value = 350;\n        this.sensitivity.Q.value         = 1;\n        this.sensitivity.gain.value      = 0;  // Not used\n\n        this.depth.gain.value  = 0;\n        this.rate.value        = 0;\n        this.depthRate         = 0;\n\n        // `Wah` is not connected by default\n        this.state(false);\n        this.connect();\n    }\n\n    /** @override */\n    param(key, value) {\n        if (Object.prototype.toString.call(arguments[0]) === '[object Object]') {\n            // Associative array\n            for (const k in arguments[0]) {\n                this.param(k, arguments[0][k]);\n            }\n        } else {\n            const k = String(key).replace(/-/g, '').toLowerCase();\n\n            let v   = null;\n            let min = null;\n            let max = null;\n\n            switch (k) {\n                case 'auto':\n                    if (value === undefined) {\n                        return this.autoWah;\n                    }\n\n                    this.autoWah = Boolean(value);\n                    this.connect();\n\n                    break;\n                case 'frequency':\n                case 'cutoff'   :\n                    if (value === undefined) {\n                        return this.autoWah ? this.sensitivity.frequency.value : this.lowpass.frequency.value;\n                    }\n\n                    v   = parseFloat(value);\n                    min = 10;\n                    max = this.context.sampleRate / 2;\n\n                    if ((v >= min) && (v <= max)) {\n                        if (this.autoWah) {\n                            this.sensitivity.frequency.value = v;\n                            this.lowpass.frequency.value     = 20;\n                        } else {\n                            this.lowpass.frequency.value = v;\n                        }\n                    }\n\n                    break;\n                case 'depth':\n                    if (value === undefined) {\n                        return this.depthRate;\n                    }\n\n                    v   = parseFloat(value);\n                    min = 0;\n                    max = 1;\n\n                    if ((v >= min) && (v <= max)) {\n                        this.depth.gain.value = this.autoWah ? 10000 * v : this.lowpass.frequency.value * v;\n                        this.depthRate        = v;\n                    }\n\n                    break;\n                case 'rate':\n                    if (value === undefined) {\n                        return this.rate.value;\n                    }\n\n                    v   = parseFloat(value);\n                    min = 0;\n                    max = this.context.sampleRate / 2;\n\n                    if ((v >= min) && (v <= max)) {\n                        this.rate.value = v;\n                    }\n\n                    break;\n                case 'resonance':\n                    if (value === undefined) {\n                        return this.autoWah ? this.sensitivity.Q.value : this.lowpass.Q.value;\n                    }\n\n                    v   = parseFloat(value);\n                    min = 0.0001;\n                    max = 1000;\n\n                    if ((v >= min) && (v <= max)) {\n                        if (this.autoWah) {\n                            this.sensitivity.Q.value = v;\n                            this.lowpass.Q.value     = 1;\n                        } else {\n                            this.lowpass.Q.value = v;\n                        }\n                    }\n\n                    break;\n                default:\n                    break;\n            }\n        }\n\n        return this;\n    }\n\n    /** @override */\n    stop(stopTime, releaseTime) {\n        super.stop(stopTime, releaseTime);\n\n        if (!this.autoWah && this.isActive) {\n            // Connect nodes again\n            this.lfo.connect(this.depth);\n            this.depth.connect(this.lowpass.frequency);\n        }\n\n        return this;\n    }\n\n    /** @override */\n    connect() {\n        // Clear connection\n        this.input.disconnect(0);\n        this.sensitivity.disconnect(0);\n        this.envelopeFollower.disconnect(0);\n        this.lowpass.disconnect(0);\n        this.depth.disconnect(0);\n\n        if (this.isActive) {\n            // Effect ON\n\n            if (this.autoWah) {\n                // GainNode (Input) -> BiquadFilterNode (Sensitivity) -> GainNode (Output)\n                this.input.connect(this.sensitivity);\n                this.sensitivity.connect(this.output);\n\n                // WaveShaperNode (Envelope Follower) -> BiquadFilterNode (Low-Pass Filter) -> GainNode (Depth) -> AudioParam (frequency)\n                this.input.connect(this.envelopeFollower);\n                this.envelopeFollower.connect(this.lowpass);\n                this.lowpass.connect(this.depth);\n                this.depth.connect(this.sensitivity.frequency);\n            } else {\n                // GainNode (Input) -> BiquadFilterNode (Low-Pass Filter) -> GainNode (Output)\n                this.input.connect(this.lowpass);\n                this.lowpass.connect(this.output);\n\n                // LFO\n                // OscillatorNode (LFO) -> GainNode (Depth) -> AudioParam (frequency)\n                this.lfo.connect(this.depth);\n                this.depth.connect(this.lowpass.frequency);\n            }\n        } else {\n            // Effect OFF\n\n            // GainNode (Input) -> GainNode (Output)\n            this.input.connect(this.output);\n        }\n\n        return this;\n    }\n\n    /** @override */\n    params() {\n        const params = {\n            'state'     : this.isActive,\n            'auto'      : this.autoWah,\n            'cutoff'    : this.autoWah ? this.sensitivity.frequency.value : this.lowpass.frequency.value,\n            'depth'     : this.autoWah ? this.depth.gain.value : this.depthRate,\n            'rate'      : this.rate.value,\n            'resonance' : this.autoWah ? this.sensitivity.Q.value : this.lowpass.Q.value\n        };\n\n        return params;\n    }\n\n    /** @override */\n    toString() {\n        return '[SoundModule Wah]';\n    }\n}\n","'use strict';\n\nimport { Effector } from './Effector';\n\n/**\n * Effector's subclass\n * @constructor\n * @extends {Effector}\n */\nexport class PitchShifter extends Effector {\n    /**\n     * This class (static) method executes FFT.\n     * @param {Float32Array} reals This argument is the instance of `Float32Array` for real number.\n     * @param {Float32Array} imags This argument is the instance of `Float32Array` for imaginary number.\n     * @param {number} size This argument is FFT size (power of two).\n     */\n    static FFT(reals, imags, size) {\n        const pow2 = n => Math.pow(2, n);\n\n        const indexes = new Float32Array(size);\n\n        const numberOfStages = Math.log2(size);\n\n        for (let stage = 1; stage <= numberOfStages; stage++) {\n            for (let i = 0; i < pow2(stage - 1); i++) {\n                const rest = numberOfStages - stage;\n\n                for (let j = 0; j < pow2(rest); j++) {\n                    const n = i * pow2(rest + 1) + j;\n                    const m = pow2(rest) + n;\n                    const r = j * pow2(stage - 1);\n\n                    const areal = reals[n];\n                    const aimag = imags[n];\n                    const breal = reals[m];\n                    const bimag = imags[m];\n                    const creal = Math.cos((2.0 * Math.PI * r) / size);\n                    const cimag = -1 * Math.sin((2.0 * Math.PI * r) / size);\n\n                    if (stage < numberOfStages) {\n                        reals[n] = areal + breal;\n                        imags[n] = aimag + bimag;\n                        reals[m] = (creal * (areal - breal)) - (cimag * (aimag - bimag));\n                        imags[m] = (creal * (aimag - bimag)) + (cimag * (areal - breal));\n                    } else {\n                        reals[n] = areal + breal;\n                        imags[n] = aimag + bimag;\n                        reals[m] = areal - breal;\n                        imags[m] = aimag - bimag;\n                    }\n                }\n            }\n        }\n\n        for (let stage = 1; stage <= numberOfStages; stage++) {\n            const rest = numberOfStages - stage;\n\n            for (let i = 0; i < pow2(stage - 1); i++) {\n                indexes[pow2(stage - 1) + i] = indexes[i] + pow2(rest);\n            }\n        }\n\n        for (let k = 0; k < size; k++) {\n            if (indexes[k] <= k) {\n                continue;\n            }\n\n            const real = reals[indexes[k]];\n            const imag = imags[indexes[k]];\n\n            reals[indexes[k]] = reals[k];\n            imags[indexes[k]] = imags[k];\n\n            reals[k] = real;\n            imags[k] = imag;\n        }\n    }\n\n    /**\n     * This class (static) method executes IFFT.\n     * @param {Float32Array} reals This argument is the instance of `Float32Array` for real number.\n     * @param {Float32Array} imags This argument is the instance of `Float32Array` for imaginary number.\n     * @param {number} size This argument is IFFT size (power of two).\n     */\n    static IFFT(reals, imags, size) {\n        const pow2 = n => Math.pow(2.0, n);\n\n        const indexes = new Float32Array(size);\n\n        const numberOfStages = Math.log2(size);\n\n        for (let stage = 1; stage <= numberOfStages; stage++) {\n            for (let i = 0; i < pow2(stage - 1); i++) {\n                const rest = numberOfStages - stage;\n\n                for (let j = 0; j < pow2(rest, 2); j++) {\n                    const n = i * pow2(rest + 1) + j;\n                    const m = pow2(rest) + n;\n                    const r = j * pow2(stage - 1);\n\n                    const areal = reals[n];\n                    const aimag = imags[n];\n                    const breal = reals[m];\n                    const bimag = imags[m];\n                    const creal = Math.cos((2.0 * Math.PI * r) / size);\n                    const cimag = Math.sin((2.0 * Math.PI * r) / size);\n\n                    if (stage < numberOfStages) {\n                        reals[n] = areal + breal;\n                        imags[n] = aimag + bimag;\n                        reals[m] = (creal * (areal - breal)) - (cimag * (aimag - bimag));\n                        imags[m] = (creal * (aimag - bimag)) + (cimag * (areal - breal));\n                    } else {\n                        reals[n] = areal + breal;\n                        imags[n] = aimag + bimag;\n                        reals[m] = areal - breal;\n                        imags[m] = aimag - bimag;\n                    }\n                }\n            }\n        }\n\n        for (let stage = 1; stage <= numberOfStages; stage++) {\n            const rest = numberOfStages - stage;\n\n            for (let i = 0; i < pow2(stage - 1); i++) {\n                indexes[pow2(stage - 1) + i] = indexes[i] + pow2(rest);\n            }\n        }\n\n        for (let k = 0; k < size; k++) {\n            if (indexes[k] <= k) {\n                continue;\n            }\n\n            const real = reals[indexes[k]];\n            const imag = imags[indexes[k]];\n\n            reals[indexes[k]] = reals[k];\n            imags[indexes[k]] = imags[k];\n\n            reals[k] = real;\n            imags[k] = imag;\n        }\n\n        for (let k = 0; k < size; k++) {\n            reals[k] /= size;\n            imags[k] /= size;\n        }\n    }\n\n    /**\n     * @param {AudioContext} context This argument is in order to use the interfaces of Web Audio API.\n     * @param {number} bufferSize This argument is buffer size for `ScriptProcessorNode`.\n     */\n    constructor(context, bufferSize) {\n        super(context, bufferSize);\n\n        this.pitch = 1;\n\n        // `PitchShifter` is not connected by default\n        this.state(false);\n\n        this.connect();\n    }\n\n    /** @override */\n    param(key, value) {\n        if (Object.prototype.toString.call(arguments[0]) === '[object Object]') {\n            // Associative array\n            for (const k in arguments[0]) {\n                this.param(k, arguments[0][k]);\n            }\n        } else {\n            const k = String(key).replace(/-/g, '').toLowerCase();\n\n            let v   = null;\n            let min = null;\n\n            switch (k) {\n                case 'pitch':\n                    if (value === undefined) {\n                        return this.pitch;\n                    }\n\n                    v   = parseFloat(value);\n                    min = 0;\n\n                    if (v > min) {\n                        this.pitch = v;\n                    }\n\n                    break;\n                default:\n                    break;\n            }\n        }\n\n        return this;\n    }\n\n    /** @override */\n    connect() {\n        // Clear connection\n        this.input.disconnect(0);\n        this.processor.disconnect(0);\n\n        if (this.isActive) {\n            // GainNode (Input) -> ScriptProcessorNode -> GainNode (Output);\n            this.input.connect(this.processor);\n            this.processor.connect(this.output);\n        } else {\n            // GainNode (Input) -> GainNode (Output)\n            this.input.connect(this.output);\n        }\n\n        return this;\n    }\n\n    /** @override */\n    start() {\n        if (this.isActive && this.isStop) {\n            this.isStop = false;\n\n            const bufferSize = this.processor.bufferSize;\n\n            this.processor.onaudioprocess = event => {\n                const inputLs  = event.inputBuffer.getChannelData(0);\n                const inputRs  = event.inputBuffer.getChannelData(1);\n                const outputLs = event.outputBuffer.getChannelData(0);\n                const outputRs = event.outputBuffer.getChannelData(1);\n\n                if (this.isActive && (this.pitch !== 1)) {\n                    const realLs = new Float32Array(inputLs);\n                    const realRs = new Float32Array(inputRs);\n                    const imagLs = new Float32Array(bufferSize);\n                    const imagRs = new Float32Array(bufferSize);\n\n                    PitchShifter.FFT(realLs, imagLs, bufferSize);\n                    PitchShifter.FFT(realRs, imagRs, bufferSize);\n\n                    const arealLs = new Float32Array(bufferSize);\n                    const arealRs = new Float32Array(bufferSize);\n                    const aimagLs = new Float32Array(bufferSize);\n                    const aimagRs = new Float32Array(bufferSize);\n\n                    for (let i = 0; i < bufferSize; i++) {\n                        const offset = Math.floor(this.pitch * i);\n\n                        let eq = 1;\n\n                        if (i > (bufferSize / 2)) {\n                            eq = 0;\n                        }\n\n                        if ((offset >= 0) && (offset < bufferSize)) {\n                            arealLs[offset] += eq * realLs[i];\n                            aimagLs[offset] += eq * imagLs[i];\n                            arealRs[offset] += eq * realRs[i];\n                            aimagRs[offset] += eq * imagRs[i];\n                        }\n                    }\n\n                    PitchShifter.IFFT(arealLs, aimagLs, bufferSize);\n                    PitchShifter.IFFT(arealRs, aimagRs, bufferSize);\n\n                    outputLs.set(arealLs);\n                    outputRs.set(arealRs);\n                } else {\n                    outputLs.set(inputLs);\n                    outputRs.set(inputRs);\n                }\n            };\n        }\n\n        return this;\n    }\n\n    /** @override */\n    stop() {\n        // Effector's state is active ?\n        if (this.isActive) {\n            // Stop `onaudioprocess` event\n            this.processor.disconnect(0);\n            this.processor.onaudioprocess = null;\n\n            // Connect nodes again\n            this.connect();\n        }\n\n        return this;\n    }\n\n    /** @override */\n    params() {\n        const params = {\n            'state' : this.isActive,\n            'pitch' : this.pitch\n        };\n\n        return params;\n    }\n\n    /** @override */\n    toString() {\n        return '[SoundModule PitchShifter]';\n    }\n}\n","'use strict';\n\nimport { Effector } from './Effector';\n\n/**\n * Effector's subclass\n * @constructor\n * @extends {Effector}\n */\nexport class Equalizer extends Effector {\n    /**\n     * @param {AudioContext} context This argument is in order to use the interfaces of Web Audio API.\n     * @param {number} bufferSize This argument is buffer size for `ScriptProcessorNode`.\n     **/\n    constructor(context, bufferSize) {\n        super(context, bufferSize);\n\n        this.bass     = context.createBiquadFilter();\n        this.middle   = context.createBiquadFilter();\n        this.treble   = context.createBiquadFilter();\n        this.presence = context.createBiquadFilter();\n\n        // Set filter type\n        this.bass.type     = (typeof this.bass.type     === 'string') ? 'lowshelf'  : (this.bass.LOWSHELF      || 3);\n        this.middle.type   = (typeof this.middle.type   === 'string') ? 'peaking'   : (this.middle.PEAKING     || 5);\n        this.treble.type   = (typeof this.treble.type   === 'string') ? 'peaking'   : (this.treble.PEAKING     || 5);\n        this.presence.type = (typeof this.presence.type === 'string') ? 'highshelf' : (this.presence.HIGHSHELF || 4);\n\n        // Set cutoff frequency\n        this.bass.frequency.value     =  500;  // 500 Hz\n        this.middle.frequency.value   = 1000;  // 1 kHz\n        this.treble.frequency.value   = 2000;  // 2 kHz\n        this.presence.frequency.value = 4000;  // 4 kHz\n\n        // Set Q\n        // this.bass.Q.value     = Math.SQRT1_2;  // Not used\n        this.middle.Q.value   = Math.SQRT1_2;\n        this.treble.Q.value   = Math.SQRT1_2;\n        // this.presence.Q.value = Math.SQRT1_2;  // Not used\n\n        // Set Gain\n        this.bass.gain.value     = 0;\n        this.middle.gain.value   = 0;\n        this.treble.gain.value   = 0;\n        this.presence.gain.value = 0;\n\n        // `Equalizer` is not connected by default\n        this.state(false);\n    }\n\n    /** @override */\n    param(key, value) {\n        if (Object.prototype.toString.call(arguments[0]) === '[object Object]') {\n            // Associative array\n            for (const k in arguments[0]) {\n                this.param(k, arguments[0][k]);\n            }\n        } else {\n            const k = String(key).replace(/-/g, '').toLowerCase();\n\n            let v   = null;\n            let min = null;\n            let max = null;\n\n            switch (k) {\n                case 'bass'    :\n                case 'middle'  :\n                case 'treble'  :\n                case 'presence':\n                    if (value === undefined) {\n                        return this[k].gain.value;\n                    }\n\n                    v   = parseFloat(value);\n                    min = -40;\n                    max =  40;\n\n                    if ((v >= min) && (v <= max)) {\n                        this[k].gain.value = v;\n                    }\n\n                    break;\n                default:\n                    break;\n            }\n        }\n\n        return this;\n    }\n\n    /** @override */\n    connect() {\n        // Clear connection\n        this.input.disconnect(0);\n        this.bass.disconnect(0);\n        this.middle.disconnect(0);\n        this.treble.disconnect(0);\n        this.presence.disconnect(0);\n\n        if (this.isActive) {\n            // Effect ON\n\n            // GainNode (Input) -> BiquadFilterNode (Bass) -> BiquadFilterNode (Middle) -> BiquadFilterNode (Treble) -> BiquadFilterNode (Presence) -> GainNode (Output)\n            this.input.connect(this.bass);\n            this.bass.connect(this.middle);\n            this.middle.connect(this.treble);\n            this.treble.connect(this.presence);\n            this.presence.connect(this.output);\n        } else {\n            // Effect OFF\n\n            // GainNode (Input) -> GainNode (Output)\n            this.input.connect(this.output);\n        }\n\n        return this;\n    }\n\n    /** @override */\n    params() {\n        const params = {\n            'state'    : this.isActive,\n            'bass'     : this.bass.gain.value,\n            'middle'   : this.middle.gain.value,\n            'treble'   : this.treble.gain.value,\n            'presence' : this.presence.gain.value\n        };\n\n        return params;\n    }\n\n    /** @override */\n    toString() {\n        return '[SoundModule Equalizer]';\n    }\n}\n","'use strict';\n\nimport { Effector } from './Effector';\n\n/**\n * Effector's subclass\n * @constructor\n * @extends {Effector}\n */\nexport class Filter extends Effector {\n    // for legacy browsers\n    static FILTER_TYPES = {\n        'lowpass'   : 0,\n        'highpass'  : 1,\n        'bandpass'  : 2,\n        'lowshelf'  : 3,\n        'highshelf' : 4,\n        'peaking'   : 5,\n        'notch'     : 6,\n        'allpass'   : 7\n    };\n\n    /**\n     * @param {AudioContext} context This argument is in order to use the interfaces of Web Audio API.\n     * @param {number} bufferSize This argument is buffer size for `ScriptProcessorNode`.\n     */\n    constructor(context, bufferSize) {\n        super(context, bufferSize);\n\n        this.filter = context.createBiquadFilter();\n\n        // for legacy browsers\n        this.filter.frequency.setTargetAtTime = this.filter.frequency.setTargetAtTime || this.filter.frequency.setTargetValueAtTime;\n\n        // Initialize parameters\n        this.filter.type            = (typeof this.filter.type === 'string') ? 'lowpass' : (this.filter.LOWPASS || 0);\n        this.filter.frequency.value = 350;\n        this.filter.Q.value         = 1;\n        this.filter.gain.value      = 0;\n\n        this.maxFrequency = this.filter.frequency.value;\n        this.range        = 0.1;  // 10% -> between `this.maxFrequency * 0.1` and `this.maxFrequency`\n\n        this.attack  = 0.01;\n        this.decay   = 0.3;\n        this.sustain = 1.0;\n        this.release = 1.0;\n\n        // `Filter` is not connected by default\n        this.state(false);\n    }\n\n    /** @override */\n    param(key, value) {\n        if (Object.prototype.toString.call(arguments[0]) === '[object Object]') {\n            // Associative array\n            for (const k in arguments[0]) {\n                this.param(k, arguments[0][k]);\n            }\n        } else {\n            const k = String(key).replace(/-/g, '').toLowerCase();\n\n            let v   = null;\n            let min = null;\n            let max = null;\n\n            switch (k) {\n                case 'type':\n                    if (value === undefined) {\n                        return this.filter.type;\n                    }\n\n                    v = String(value).toLowerCase();\n\n                    if (v in Filter.FILTER_TYPES) {\n                        this.filter.type = (typeof this.filter.type === 'string') ? v : Filter.FILTER_TYPES[v];\n                    }\n\n                    break;\n                case 'frequency':\n                case 'cutoff'   :\n                    if (value === undefined) {\n                        return this.filter.frequency.value;\n                    }\n\n                    v   = parseFloat(value);\n                    min = 10;\n                    max = this.context.sampleRate / 2;\n\n                    if ((v >= min) && (v <= max)) {\n                        this.maxFrequency           = v;\n                        this.filter.frequency.value = v;\n                    }\n\n                    break;\n                case 'gain':\n                    if (value === undefined) {\n                        return this.filter.gain.value;\n                    }\n\n                    v   = parseFloat(value);\n                    min = -40;\n                    max =  40;\n\n                    if ((v >= min) && (v <= max)) {\n                        this.filter.gain.value = v;\n                    }\n\n                    break;\n                case 'q':\n                    if (value === undefined) {\n                        return this.filter.Q.value;\n                    }\n\n                    v   = parseFloat(value);\n                    min = 0.0001;\n                    max = 1000;\n\n                    if ((v >= min) && (v <= max)) {\n                        this.filter.Q.value = v;\n                    }\n\n                    break;\n                case 'range':\n                    if (value === undefined) {\n                        return this.range;\n                    }\n\n                    v   = parseFloat(value);\n                    min = 0;\n                    max = 1;\n\n                    if ((v >= min) && (v <= max)) {\n                        this.range = v;\n                    }\n\n                    break;\n                case 'attack' :\n                case 'sustain':\n                    if (value === undefined) {\n                        return this[k];\n                    }\n\n                    v = parseFloat(value);\n\n                    if (v >= 0) {\n                        this[k] = v;\n                    }\n\n                    break;\n                case 'decay'  :\n                case 'release':\n                    if (value === undefined) {\n                        return this[k];\n                    }\n\n                    v = parseFloat(value);\n\n                    if (v > 0) {\n                        this[k] = v;\n                    }\n\n                    break;\n                default:\n                    break;\n            }\n        }\n\n        return this;\n    }\n\n    /** @override */\n    connect() {\n        // Clear connection\n        this.input.disconnect(0);\n        this.filter.disconnect(0);\n\n        if (this.isActive) {\n            // Effector ON\n\n            // GainNode (Input) -> BiquadFilterNode -> GainNode (Output)\n            this.input.connect(this.filter);\n            this.filter.connect(this.output);\n        } else {\n            // Effector OFF\n\n            // GainNode (Input) -> GainNode (Output)\n            this.input.connect(this.output);\n        }\n\n        return this;\n    }\n\n    /** @override */\n    start(startTime) {\n        if (this.isActive) {\n            let s = parseFloat(startTime);\n\n            if (isNaN(s) || (s < this.context.currentTime)) {\n                s = this.context.currentTime;\n            }\n\n            const t0      = s;\n            const t1      = t0 + this.attack;\n            const t2      = this.decay;\n            const t2Value = this.sustain * this.maxFrequency;\n\n            const minFrequnecy = this.maxFrequency * this.range;\n\n            // Envelope Generator for filter\n            this.filter.frequency.cancelScheduledValues(t0);\n            this.filter.frequency.setValueAtTime(minFrequnecy, t0);\n            this.filter.frequency.linearRampToValueAtTime(this.maxFrequency, t1);  // Attack\n            this.filter.frequency.setTargetAtTime(t2Value, t1, t2);  // Decay -> Sustain\n        }\n\n        return this;\n    }\n\n    /** @override */\n    stop(stopTime) {\n        if (this.isActive) {\n            let s = parseFloat(stopTime) - this.release;\n\n            if (isNaN(s) || (s < this.context.currentTime)) {\n                s = this.context.currentTime;\n            }\n\n            const t3 = s;\n            const t4 = this.release;\n\n            const minFrequnecy = this.maxFrequency * this.range;\n\n            // Envelope Generator for filter\n            this.filter.frequency.cancelScheduledValues(t3);\n            this.filter.frequency.setValueAtTime(this.filter.frequency.value, t3);\n            this.filter.frequency.setTargetAtTime(minFrequnecy, t3, t4);  // Sustain -> Release\n        }\n\n        return this;\n    }\n\n    /** @override */\n    state(state) {\n        if (state === undefined) {\n            return this.isActive;\n        }\n\n        if (String(state).toLowerCase() === 'toggle') {\n            this.isActive = !this.isActive;\n        } else {\n            this.isActive = Boolean(state);\n        }\n\n        // Change connection\n        this.connect();\n\n        return this;\n    }\n\n    /** @override */\n    params() {\n        const params = {\n            'state'     : this.isActive,\n            'type'      : this.filter.type,\n            'frequency' : this.filter.frequency.value,\n            'Q'         : this.filter.Q.value,\n            'gain'      : this.filter.gain.value,\n            'range'     : this.range,\n            'attack'    : this.attack,\n            'decay'     : this.decay,\n            'sustain'   : this.sustain,\n            'release'   : this.release\n        };\n\n        return params;\n    }\n\n    /** @override */\n    toString() {\n        return '[SoundModule Filter]';\n    }\n}\n","'use strict';\n\nimport { Effector } from './Effector';\n\n/**\n * Effector's subclass\n * @constructor\n * @extends {Effector}\n */\nexport class Autopanner extends Effector {\n    /**\n     * @param {AudioContext} context This argument is in order to use the interfaces of Web Audio API.\n     * @param {number} bufferSize This argument is buffer size for `ScriptProcessorNode`.\n     */\n    constructor(context, bufferSize) {\n        super(context, bufferSize);\n\n        this.panner = context.createStereoPanner();\n\n        // Initialize parameters\n        this.panner.pan.value = 0;\n        this.depth.gain.value = 0;\n        this.rate.value       = 0;\n\n        // `Autopanner` is not connected by default\n        this.state(false);\n\n        // LFO\n        // OscillatorNode (LFO) -> GainNode (Depth) -> AudioParam (pan)\n        this.lfo.connect(this.depth);\n        this.depth.connect(this.panner.pan);\n    }\n\n    /** @override */\n    param(key, value) {\n        if (Object.prototype.toString.call(arguments[0]) === '[object Object]') {\n            // Associative array\n            for (const k in arguments[0]) {\n                this.param(k, arguments[0][k]);\n            }\n        } else {\n            const k = String(key).replace(/-/g, '').toLowerCase();\n\n            let v   = null;\n            let min = null;\n            let max = null;\n\n            switch (k) {\n                case 'depth':\n                    if (value === undefined) {\n                        return this.depth.gain.value;\n                    }\n\n                    v   = parseFloat(value);\n                    min = 0;\n                    max = 1;\n\n                    if ((v >= min) && (v <= max)) {\n                        this.depth.gain.value = v;\n                    }\n\n                    break;\n                case 'rate':\n                    if (value === undefined) {\n                        return this.rate.value;\n                    }\n\n                    v   = parseFloat(value);\n                    min = 0;\n                    max = this.context.sampleRate / 2;\n\n                    if ((v >= min) && (v <= max)) {\n                        this.rate.value = v;\n                    }\n\n                    break;\n                default:\n                    break;\n            }\n        }\n\n        return this;\n    }\n\n    /** @override */\n    connect() {\n        // Clear connection\n        this.input.disconnect(0);\n        this.panner.disconnect(0);\n\n        if (this.isActive) {\n            // Effect ON\n\n            // GainNode (Input) -> StereoPannerNode -> GainNode (Output)\n            this.input.connect(this.panner);\n            this.panner.connect(this.output);\n        } else {\n            // Effect OFF\n\n            // GainNode (Input) -> GainNode (Output)\n            this.input.connect(this.output);\n        }\n\n        return this;\n    }\n\n    /** @override */\n    stop(stopTime, releaseTime) {\n        super.stop(stopTime, releaseTime);\n\n        if (this.isActive) {\n            // Connect nodes again\n            this.lfo.connect(this.depth);\n            this.depth.connect(this.panner.pan);\n        }\n\n        return this;\n    }\n\n    /** @override */\n    params() {\n        const params = {\n            'state' : this.isActive,\n            'depth' : this.depth.gain.value,\n            'rate'  : this.rate.value\n        };\n\n        return params;\n    }\n\n    /** @override */\n    toString() {\n        return '[SoundModule Autopanner]';\n    }\n}\n","'use strict';\n\nimport { Effector } from './Effector';\n\n/**\n * Effector's subclass\n * @constructor\n * @extends {Effector}\n */\nexport class AutopannerFallback extends Effector {\n    /**\n     * @param {AudioContext} context This argument is in order to use the interfaces of Web Audio API.\n     * @param {number} bufferSize This argument is buffer size for `ScriptProcessorNode`.\n     */\n    constructor(context, bufferSize) {\n        super(context, bufferSize);\n\n        this.amplitudeL = context.createGain();\n        this.amplitudeR = context.createGain();\n        this.splitter   = context.createChannelSplitter(2);\n        this.merger     = context.createChannelMerger(2);\n\n        this.amplitudeL.gain.value = 1;  // 1 +- depth\n        this.amplitudeR.gain.value = 1;  // 1 +- depth\n\n        // Initialize parameters\n        this.depth.gain.value = 0;\n        this.rate.value       = 0;\n\n        // `AutopannerFallback` is not connected by default\n        this.state(false);\n\n        // LFO\n        this.lfoSplitter = context.createChannelSplitter(2);\n\n        // OscillatorNode (LFO) -> GainNode (Depth) -> ScriptProcessorNode -> ChannelSplitterNode -> AudioParam (gain) (L) / (R)\n        this.lfo.connect(this.depth);\n        this.depth.connect(this.processor);\n        this.processor.connect(this.lfoSplitter);\n        this.lfoSplitter.connect(this.amplitudeL.gain, 0);\n        this.lfoSplitter.connect(this.amplitudeR.gain, 1);\n    }\n\n    /** @override */\n    param(key, value) {\n        if (Object.prototype.toString.call(arguments[0]) === '[object Object]') {\n            // Associative array\n            for (const k in arguments[0]) {\n                this.param(k, arguments[0][k]);\n            }\n        } else {\n            const k = String(key).replace(/-/g, '').toLowerCase();\n\n            let v   = null;\n            let min = null;\n            let max = null;\n\n            switch (k) {\n                case 'depth':\n                    if (value === undefined) {\n                        return this.depth.gain.value;\n                    }\n\n                    v   = parseFloat(value);\n                    min = 0;\n                    max = 1;\n\n                    if ((v >= min) && (v <= max)) {\n                        this.depth.gain.value = v;\n                    }\n\n                    break;\n                case 'rate':\n                    if (value === undefined) {\n                        return this.rate.value;\n                    }\n\n                    v   = parseFloat(value);\n                    min = 0;\n                    max = this.context.sampleRate / 2;\n\n                    if ((v >= min) && (v <= max)) {\n                        this.rate.value = v;\n                    }\n\n                    break;\n                default:\n                    break;\n            }\n        }\n\n        return this;\n    }\n\n    /** @override */\n    connect() {\n        // Clear connection\n        this.input.disconnect(0);\n        this.amplitudeL.disconnect(0);\n        this.amplitudeR.disconnect(0);\n        this.splitter.disconnect(0);\n        this.splitter.disconnect(1);\n        this.merger.disconnect(0);\n\n        if (this.isActive) {\n            // GainNode (Input) -> ChannelSplitterNode -> GainNode (L) / (R) -> ChannelMergerNode -> GainNode (Output)\n            this.input.connect(this.splitter);\n            this.splitter.connect(this.amplitudeL, 0, 0);\n            this.splitter.connect(this.amplitudeR, 1, 0);\n            this.amplitudeL.connect(this.merger, 0, 0);\n            this.amplitudeR.connect(this.merger, 0, 1);\n            this.merger.connect(this.output);\n        } else {\n            // GainNode (Input) -> GainNode (Output)\n            this.input.connect(this.output);\n        }\n\n        return this;\n    }\n\n    /** @override */\n    start(startTime) {\n        if (this.isActive && this.isStop) {\n            let s = parseFloat(startTime);\n\n            if (isNaN(s) || (s < this.context.currentTime)) {\n                s = this.context.currentTime;\n            }\n\n            this.lfo.start(s);\n            this.isStop = false;\n\n            const bufferSize = this.processor.bufferSize;\n\n            this.processor.onaudioprocess = event => {\n                const inputs   = event.inputBuffer.getChannelData(0);\n                const outputLs = event.outputBuffer.getChannelData(0);\n                const outputRs = event.outputBuffer.getChannelData(1);\n\n                if (this.isActive && (this.depth.gain.value !== 0) && (this.rate.value !== 0)) {\n                    for (let i = 0; i < bufferSize; i++) {\n                        outputLs[i] =  inputs[i];\n                        outputRs[i] = -inputs[i];\n                    }\n                } else {\n                    for (let i = 0; i < bufferSize; i++) {\n                        outputLs[i] = 0;\n                        outputRs[i] = 0;\n                    }\n                }\n            };\n        }\n\n        return this;\n    }\n\n    /** @override */\n    stop(stopTime, releaseTime) {\n        super.stop(stopTime, releaseTime);\n\n        // Effector's state is active ?\n        if (this.isActive) {\n            // Stop `onaudioprocess` event\n            this.processor.disconnect(0);\n            this.processor.onaudioprocess = null;\n\n            // Connect nodes again\n            this.lfo.connect(this.depth);\n            this.depth.connect(this.processor);\n            this.processor.connect(this.lfoSplitter);\n            this.lfoSplitter.connect(this.amplitudeL.gain, 0);\n            this.lfoSplitter.connect(this.amplitudeR.gain, 1);\n        }\n\n        return this;\n    }\n\n    /** @override */\n    params() {\n        const params = {\n            'state' : this.isActive,\n            'depth' : this.depth.gain.value,\n            'rate'  : this.rate.value\n        };\n\n        return params;\n    }\n\n    /** @override */\n    toString() {\n        return '[SoundModule AutopannerFallback]';\n    }\n}\n","'use strict';\n\nimport { Effector } from './Effector';\n\n/**\n * Effector's subclass\n * @constructor\n * @extends {Effector}\n */\nexport class Tremolo extends Effector {\n    // for legacy browsers\n    static WAVE_TYPES = {\n        'sine'     : 0,\n        'square'   : 1,\n        'sawtooth' : 2,\n        'triangle' : 3\n    };\n\n    /**\n     * @param {AudioContext} context This argument is in order to use the interfaces of Web Audio API.\n     * @param {number} bufferSize This argument is buffer size for `ScriptProcessorNode`.\n     */\n    constructor(context, bufferSize) {\n        super(context, bufferSize);\n\n        this.amplitude = context.createGain();\n\n        this.amplitude.gain.value = 1;  // 1 +- depth\n\n        // Initialize parameter\n        this.depth.gain.value = 0;\n        this.rate.value       = 0;\n\n        // `Tremolo` is not connected by default\n        this.state(false);\n\n        // LFO\n        // OscillatorNode (LFO) -> GainNode (Depth) -> AudioParam (gain)\n        this.lfo.connect(this.depth);\n        this.depth.connect(this.amplitude.gain);\n    }\n\n    /** @override */\n    param(key, value) {\n        if (Object.prototype.toString.call(arguments[0]) === '[object Object]') {\n            // Associative array\n            for (const k in arguments[0]) {\n                this.param(k, arguments[0][k]);\n            }\n        } else {\n            const k = String(key).replace(/-/g, '').toLowerCase();\n\n            let v   = null;\n            let min = null;\n            let max = null;\n\n            switch (k) {\n                case 'depth':\n                    if (value === undefined) {\n                        return this.depth.gain.value;\n                    }\n\n                    v   = parseFloat(value);\n                    min = 0;\n                    max = 1;\n\n                    if ((v >= min) && (v <= max)) {\n                        this.depth.gain.value = v;\n                    }\n\n                    break;\n                case 'rate':\n                    if (value === undefined) {\n                        return this.rate.value;\n                    }\n\n                    v   = parseFloat(value);\n                    min = 0;\n                    max = this.context.sampleRate / 2;\n\n                    if ((v >= min) && (v <= max)) {\n                        this.rate.value = v;\n                    }\n\n                    break;\n                case 'wave':\n                    if (value === undefined) {\n                        return this.lfo.type;\n                    }\n\n                    v = String(value).toLowerCase();\n\n                    if (v in Tremolo.WAVE_TYPES) {\n                        this.lfo.type = (typeof this.lfo.type === 'string') ? v : Tremolo.WAVE_TYPES[v];\n                    }\n\n                    break;\n                default:\n                    break;\n            }\n        }\n\n        return this;\n    }\n\n    /** @override */\n    connect() {\n        // Clear connection\n        this.input.disconnect(0);\n        this.amplitude.disconnect(0);\n\n        if (this.isActive) {\n            // Effect ON\n\n            // GainNode (Input) -> GainNode -> GainNode (Output)\n            this.input.connect(this.amplitude);\n            this.amplitude.connect(this.output);\n        } else {\n            // Effect OFF\n\n            // GainNode (Input) -> GainNode (Output)\n            this.input.connect(this.output);\n        }\n\n        return this;\n    }\n\n    /** @override */\n    stop(stopTime, releaseTime) {\n        super.stop(stopTime, releaseTime);\n\n        if (this.isActive) {\n            // Connect nodes again\n            this.lfo.connect(this.depth);\n            this.depth.connect(this.amplitude.gain);\n        }\n\n        return this;\n    }\n\n    /** @override */\n    params() {\n        const params = {\n            'state' : this.isActive,\n            'depth' : this.depth.gain.value,\n            'rate'  : this.rate.value,\n            'wave'  : this.lfo.type\n        };\n\n        return params;\n    }\n\n    /** @override */\n    toString() {\n        return '[SoundModule Tremolo]';\n    }\n}\n","'use strict';\n\nimport { Effector } from './Effector';\n\n/**\n * Effector's subclass\n * @constructor\n * @extends {Effector}\n */\nexport class Ringmodulator extends Effector {\n    /**\n     * @param {AudioContext} context This argument is in order to use the interfaces of Web Audio API.\n     * @param {number} bufferSize This argument is buffer size for `ScriptProcessorNode`.\n     */\n    constructor(context, bufferSize) {\n        super(context, bufferSize);\n\n        this.amplitude = context.createGain();\n\n        this.amplitude.gain.value = 0;  // 0 +- depth\n\n        // Initialize parameter\n        this.depth.gain.value = 1;\n        this.rate.value       = 0;\n\n        // `Ringmodulator` is not connected by default\n        this.state(false);\n\n        // LFO\n        // OscillatorNode (LFO) -> GainNode (Depth) -> AudioParam (gain)\n        this.lfo.connect(this.depth);\n        this.depth.connect(this.amplitude.gain);\n    }\n\n    /** @override */\n    param(key, value) {\n        if (Object.prototype.toString.call(arguments[0]) === '[object Object]') {\n            // Associative array\n            for (const k in arguments[0]) {\n                this.param(k, arguments[0][k]);\n            }\n        } else {\n            const k = String(key).replace(/-/g, '').toLowerCase();\n\n            let v   = null;\n            let min = null;\n            let max = null;\n\n            switch (k) {\n                case 'depth':\n                    if (value === undefined) {\n                        return this.depth.gain.value;\n                    }\n\n                    v   = parseFloat(value);\n                    min = 0;\n                    max = 1;\n\n                    if ((v >= min) && (v <= max)) {\n                        this.depth.gain.value = v;\n                    }\n\n                    break;\n                case 'rate':\n                    if (value === undefined) {\n                        return this.rate.value;\n                    }\n\n                    v   = parseFloat(value);\n                    min = 0;\n                    max = this.context.sampleRate / 2;\n\n                    if ((v >= min) && (v <= max)) {\n                        this.rate.value = v;\n                    }\n\n                    break;\n                default:\n                    break;\n            }\n        }\n\n        return this;\n    }\n\n    /** @override */\n    connect() {\n        // Clear connection\n        this.input.disconnect(0);\n        this.amplitude.disconnect(0);\n\n        if (this.isActive) {\n            // Effect ON\n\n            // GainNode (Input) -> GainNode -> GainNode (Output)\n            this.input.connect(this.amplitude);\n            this.amplitude.connect(this.output);\n        } else {\n            // Effect OFF\n\n            // GainNode (Input) -> GainNode (Output)\n            this.input.connect(this.output);\n        }\n\n        return this;\n    }\n\n    /** @override */\n    stop(stopTime, releaseTime) {\n        super.stop(stopTime, releaseTime);\n\n        if (this.isActive) {\n            // Connect nodes again\n            this.lfo.connect(this.depth);\n            this.depth.connect(this.amplitude.gain);\n        }\n\n        return this;\n    }\n\n    /** @override */\n    params() {\n        const params = {\n            'state' : this.isActive,\n            'depth' : this.depth.gain.value,\n            'rate'  : this.rate.value\n        };\n\n        return params;\n    }\n\n    /** @override */\n    toString() {\n        return '[SoundModule Ringmodulator]';\n    }\n}\n","'use strict';\n\nimport { Effector } from './Effector';\n\n/**\n * Effector's subclass\n * @constructor\n * @extends {Effector}\n */\nexport class Phaser extends Effector {\n    static MAXIMUM_STAGES = 24;  // The maximum number of All-Pass Filters\n\n    /**\n     * @param {AudioContext} context This argument is in order to use the interfaces of Web Audio API.\n     * @param {number} bufferSize This argument is buffer size for `ScriptProcessorNode`.\n     */\n    constructor(context, bufferSize) {\n        super(context, bufferSize);\n\n        this.numberOfStages = 12;  // The default number of All-Pass Filters\n        this.filters        = new Array(Phaser.MAXIMUM_STAGES);\n\n        for (let i = 0; i < Phaser.MAXIMUM_STAGES; i++) {\n            this.filters[i]                 = context.createBiquadFilter();\n            this.filters[i].type            = (typeof this.filters[i].type === 'string') ? 'allpass' : (this.filters[i].ALLPASS || 7);\n            this.filters[i].frequency.value = 350;\n            this.filters[i].Q.value         = 1;\n            this.filters[i].gain.value      = 0;  // Not used\n        }\n\n        this.mix      = context.createGain();\n        this.feedback = context.createGain();\n\n        // Initialize parameters\n        this.depth.gain.value    = 0;\n        this.rate.value          = 0;\n        this.mix.gain.value      = 0;\n        this.feedback.gain.value = 0;\n        this.depthRate           = 0;\n\n        // `Phaser` is not connected by default\n        this.state(false);\n\n        // LFO\n        // GainNode (LFO) -> GainNode (Depth) -> AudioParam (frequency)\n        this.lfo.connect(this.depth);\n\n        for (let i = 0; i < Phaser.MAXIMUM_STAGES; i++) {\n            this.depth.connect(this.filters[i].frequency);\n        }\n    }\n\n    /** @override */\n    param(key, value) {\n        if (Object.prototype.toString.call(arguments[0]) === '[object Object]') {\n            // Associative array\n            for (const k in arguments[0]) {\n                this.param(k, arguments[0][k]);\n            }\n        } else {\n            const k = String(key).replace(/-/g, '').toLowerCase();\n\n            let v   = null;\n            let min = null;\n            let max = null;\n\n            switch (k) {\n                case 'stage':\n                    if (value === undefined) {\n                        return this.numberOfStages;\n                    }\n\n                    v = parseInt(value, 10);\n\n                    switch (v) {\n                        case  0:\n                        case  2:\n                        case  4:\n                        case  8:\n                        case 12:\n                        case 24:\n                            this.numberOfStages = v;\n                            this.connect();\n                            break;\n                        default:\n                            break;\n                    }\n\n                    break;\n                case 'frequency':\n                case 'cutoff'   :\n                    if (value === undefined) {\n                        return this.filters[0].frequency.value;\n                    }\n\n                    v   = parseFloat(value);\n                    min = 10;\n                    max = this.context.sampleRate / 2;\n\n                    if ((v >= min) && (v <= max)) {\n                        for (let i = 0; i < Phaser.MAXIMUM_STAGES; i++) {\n                            this.filters[i].frequency.value = v;\n                        }\n\n                        this.depth.gain.value = this.filters[0].frequency.value * this.depthRate;\n                    }\n\n                    break;\n                case 'resonance':\n                    if (value === undefined) {\n                        return this.filters[0].Q.value;\n                    }\n\n                    v   = parseFloat(value);\n                    min = 0.0001;\n                    max = 1000;\n\n                    if ((v >= min) && (v <= max)) {\n                        for (let i = 0; i < Phaser.MAXIMUM_STAGES; i++) {\n                            this.filters[0].Q.value = v;\n                        }\n                    }\n\n                    break;\n                case 'depth':\n                    if (value === undefined) {\n                        return this.depthRate;\n                    }\n\n                    v   = parseFloat(value);\n                    min = 0;\n                    max = 1;\n\n                    if ((v >= min) && (v <= max)) {\n                        this.depth.gain.value = this.filters[0].frequency.value * v;\n                        this.depthRate        = v;\n                    }\n\n                    break;\n                case 'rate':\n                    if (value === undefined) {\n                        return this.rate.value;\n                    }\n\n                    v   = parseFloat(value);\n                    min = 0;\n                    max = this.context.sampleRate / 2;\n\n                    if ((v >= min) && (v <= max)) {\n                        this.rate.value = v;\n                    }\n\n                    break;\n                case 'mix'     :\n                case 'feedback':\n                    if (value === undefined) {\n                        return this[k].gain.value;\n                    }\n\n                    v   = parseFloat(value);\n                    min = 0;\n                    max = 1;\n\n                    if ((v >= min) && (v <= max)) {\n                        this[k].gain.value = v;\n                    }\n\n                    break;\n                default:\n                    break;\n            }\n        }\n\n        return this;\n    }\n\n    /** @override */\n    connect() {\n        // Clear connection\n        this.input.disconnect(0);\n\n        for (let i = 0; i < Phaser.MAXIMUM_STAGES; i++) {\n            this.filters[i].disconnect(0);\n        }\n\n        this.mix.disconnect(0);\n        this.feedback.disconnect(0);\n\n        // GainNode (Input) -> GainNode (Output)\n        this.input.connect(this.output);\n\n        // Effect ON\n        if (this.isActive && (this.numberOfStages > 0)) {\n            // GainNode (Input) -> BiquadFilterNode (All-Pass Filter x N) -> GainNode (Mix) -> GainNode (Output)\n            this.input.connect(this.filters[0]);\n\n            for (let i = 0; i < this.numberOfStages; i++) {\n                if (i < (this.numberOfStages - 1)) {\n                    this.filters[i].connect(this.filters[i + 1]);\n                } else {\n                    this.filters[i].connect(this.mix);\n                    this.mix.connect(this.output);\n\n                    // Feedback\n                    // GainNode (Input) -> BiquadFilterNode (All-Pass Filter x N) -> GainNode (Feedback) -> BiquadFilterNode (All-Pass Filter x N) ...\n                    this.filters[i].connect(this.feedback);\n                    this.feedback.connect(this.filters[0]);\n                }\n            }\n        }\n\n        return this;\n    }\n\n    /** @override */\n    stop(stopTime, releaseTime) {\n        super.stop(stopTime, releaseTime);\n\n        if (this.isActive) {\n            // Connect nodes again\n            this.lfo.connect(this.depth);\n\n            for (let i = 0; i < Phaser.MAXIMUM_STAGES; i++) {\n                this.depth.connect(this.filters[i].frequency);\n            }\n        }\n\n        return this;\n    }\n\n    /** @override */\n    params() {\n        const params = {\n            'state'     : this.isActive,\n            'stage'     : this.numberOfStages,\n            'frequency' : this.filters[0].frequency.value,\n            'resonance' : this.filters[0].Q.value,\n            'depth'     : this.depthRate,\n            'rate'      : this.rate.value,\n            'mix'       : this.mix.gain.value,\n            'feedback'  : this.feedback.gain.value\n        };\n\n        return params;\n    }\n\n    /** @override */\n    toString() {\n        return '[SoundModule Phaser]';\n    }\n}\n","'use strict';\n\nimport { Effector } from './Effector';\n\n/**\n * Effector's subclass\n * @constructor\n * @extends {Effector}\n */\nexport class Flanger extends Effector {\n    /**\n     * @param {AudioContext} context This argument is in order to use the interfaces of Web Audio API.\n     * @param {number} bufferSize This argument is buffer size for `ScriptProcessorNode`.\n     */\n    constructor(context, bufferSize) {\n        super(context, bufferSize);\n\n        this.delay    = context.createDelay();\n        this.mix      = context.createGain();\n        this.tone     = context.createBiquadFilter();\n        this.feedback = context.createGain();\n\n        // Initialize parameters\n        this.delay.delayTime.value = 0;\n        this.depth.gain.value      = 0;\n        this.rate.value            = 0;\n        this.mix.gain.value        = 0;\n        this.tone.type             = (typeof this.tone.type === 'string') ? 'lowpass' : (this.tone.LOWPASS || 0);\n        this.tone.frequency.value  = 350;\n        this.tone.Q.value          = Math.SQRT1_2;\n        this.tone.gain.value       = 0;  // Not used\n        this.feedback.gain.value   = 0;\n        this.depthRate             = 0;\n\n        // `Flanger` is not connected by default\n        this.state(false);\n\n        // LFO\n        // OscillatorNode (LFO) -> GainNode (Depth) -> AudioParam (delayTime)\n        this.lfo.connect(this.depth);\n        this.depth.connect(this.delay.delayTime);\n    }\n\n    /** @override */\n    param(key, value) {\n        if (Object.prototype.toString.call(arguments[0]) === '[object Object]') {\n            // Associative array\n            for (const k in arguments[0]) {\n                this.param(k, arguments[0][k]);\n            }\n        } else {\n            const k = String(key).replace(/-/g, '').toLowerCase();\n\n            let v   = null;\n            let min = null;\n            let max = null;\n\n            switch (k) {\n                case 'delaytime':\n                case 'time'     :\n                    if (value === undefined) {\n                        return this.delay.delayTime.value;\n                    }\n\n                    v   = parseFloat(value);\n                    min = 0;\n                    max = 1;\n\n                    if ((v >= min) && (v <= max)) {\n                        this.delay.delayTime.value = v;\n                        this.depth.gain.value      = this.delay.delayTime.value * this.depthRate;\n                    }\n\n                    break;\n                case 'depth':\n                    if (value === undefined) {\n                        return this.depthRate;\n                    }\n\n                    v   = parseFloat(value);\n                    min = 0;\n                    max = 1;\n\n                    if ((v >= min) && (v <= max)) {\n                        this.depth.gain.value = this.delay.delayTime.value * v;\n                        this.depthRate        = v;\n                    }\n\n                    break;\n                case 'rate':\n                    if (value === undefined) {\n                        return this.rate.value;\n                    }\n\n                    v   = parseFloat(value);\n                    min = 0;\n                    max = this.context.sampleRate / 2;\n\n                    if ((v >= min) && (v <= max)) {\n                        this.rate.value = v;\n                    }\n\n                    break;\n                case 'mix'     :\n                case 'feedback':\n                    if (value === undefined) {\n                        return this[k].gain.value;\n                    }\n\n                    v   = parseFloat(value);\n                    min = 0;\n                    max = 1;\n\n                    if ((v >= min) && (v <= max)) {\n                        this[k].gain.value = v;\n                    }\n\n                    break;\n                case 'tone':\n                    if (value === undefined) {\n                        return this.tone.frequency.value;\n                    }\n\n                    v   = parseFloat(value);\n                    min = 10;\n                    max = this.context.sampleRate / 2;\n\n                    if ((v >= min) && (v <= max)) {\n                        this.tone.frequency.value = v;\n                    }\n\n                    break;\n                default:\n                    break;\n            }\n        }\n\n        return this;\n    }\n\n    /** @override */\n    connect() {\n        // Clear connection\n        this.input.disconnect(0);\n        this.delay.disconnect(0);\n        this.mix.disconnect(0);\n        this.tone.disconnect(0);\n        this.feedback.disconnect(0);\n\n        // GainNode (Input) -> GainNode (Output)\n        this.input.connect(this.output);\n\n        // Effect ON\n        if (this.isActive) {\n            // GainNode (Input) -> BiquadFilterNode (Tone) -> DelayNode -> GainNode (Mix) -> GainNode (Output)\n            this.input.connect(this.tone);\n            this.tone.connect(this.delay);\n            this.delay.connect(this.mix);\n            this.mix.connect(this.output);\n\n            // Feedback\n            // GainNode (Input) -> DelayNode -> GainNode (Feedback) -> DelayNode ...\n            this.delay.connect(this.feedback);\n            this.feedback.connect(this.delay);\n        }\n\n        return this;\n    }\n\n    /** @override */\n    stop(stopTime, releaseTime) {\n        super.stop(stopTime, releaseTime);\n\n        if (this.isActive) {\n            // Connect nodes again\n            this.lfo.connect(this.depth);\n            this.depth.connect(this.delay.delayTime);\n        }\n\n        return this;\n    }\n\n    /** @override */\n    params() {\n        const params = {\n            'state'    : this.isActive,\n            'time'     : this.delay.delayTime.value,\n            'depth'    : this.depthRate,\n            'rate'     : this.rate.value,\n            'mix'      : this.mix.gain.value,\n            'tone'     : this.tone.frequency.value,\n            'feedback' : this.feedback.gain.value\n        };\n\n        return params;\n    }\n\n    /** @override */\n    toString() {\n        return '[SoundModule Flanger]';\n    }\n}\n","'use strict';\n\nimport { Effector } from './Effector';\n\n/**\n * Effector's subclass\n * @constructor\n * @extends {Effector}\n */\nexport class Chorus extends Effector {\n    /**\n     * @param {AudioContext} context This argument is in order to use the interfaces of Web Audio API.\n     * @param {number} bufferSize This argument is buffer size for `ScriptProcessorNode`.\n     */\n    constructor(context, bufferSize) {\n        super(context, bufferSize);\n\n        this.delay    = context.createDelay();\n        this.mix      = context.createGain();\n        this.tone     = context.createBiquadFilter();\n        this.feedback = context.createGain();\n\n        // Initialize parameters\n        this.delay.delayTime.value = 0;\n        this.depth.gain.value      = 0;\n        this.rate.value            = 0;\n        this.mix.gain.value        = 0;\n        this.tone.type             = (typeof this.tone.type === 'string') ? 'lowpass' : (this.tone.LOWPASS || 0);\n        this.tone.frequency.value  = 350;\n        this.tone.Q.value          = Math.SQRT1_2;\n        this.tone.gain.value       = 0;  // Not used\n        this.feedback.gain.value   = 0;\n        this.depthRate             = 0;\n\n        // `Chorus` is not connected by default\n        this.state(false);\n\n        // LFO\n        // OscillatorNode (LFO) -> GainNode (Depth) -> AudioParam (elayTime)\n        this.lfo.connect(this.depth);\n        this.depth.connect(this.delay.delayTime);\n    }\n\n    /** @override */\n    param(key, value) {\n        if (Object.prototype.toString.call(arguments[0]) === '[object Object]') {\n            // Associative array\n            for (const k in arguments[0]) {\n                this.param(k, arguments[0][k]);\n            }\n        } else {\n            const k = String(key).replace(/-/g, '').toLowerCase();\n\n            let v   = null;\n            let min = null;\n            let max = null;\n\n            switch (k) {\n                case 'delaytime':\n                case 'time'     :\n                    if (value === undefined) {\n                        return this.delay.delayTime.value;\n                    }\n\n                    v   = parseFloat(value);\n                    min = 0;\n                    max = 1;\n\n                    if ((v >= min) && (v <= max)) {\n                        this.delay.delayTime.value = v;\n                        this.depth.gain.value      = this.delay.delayTime.value * this.depthRate;\n                    }\n\n                    break;\n                case 'depth':\n                    if (value === undefined) {\n                        return this.depthRate;\n                    }\n\n                    v   = parseFloat(value);\n                    min = 0;\n                    max = 1;\n\n                    if ((v >= min) && (v <= max)) {\n                        this.depth.gain.value = this.delay.delayTime.value * v;\n                        this.depthRate        = v;\n                    }\n\n                    break;\n                case 'rate':\n                    if (value === undefined) {\n                        return this.rate.value;\n                    }\n\n                    v   = parseFloat(value);\n                    min = 0;\n                    max = this.context.sampleRate / 2;\n\n                    if ((v >= min) && (v <= max)) {\n                        this.rate.value = v;\n                    }\n\n                    break;\n                case 'mix'     :\n                case 'feedback':\n                    if (value === undefined) {\n                        return this[k].gain.value;\n                    }\n\n                    v   = parseFloat(value);\n                    min = 0;\n                    max = 1;\n\n                    if ((v >= min) && (v <= max)) {\n                        this[k].gain.value = v;\n                    }\n\n                    break;\n                case 'tone':\n                    if (value === undefined) {\n                        return this.tone.frequency.value;\n                    }\n\n                    v   = parseFloat(value);\n                    min = 10;\n                    max = this.context.sampleRate / 2;\n\n                    if ((v >= min) && (v <= max)) {\n                        this.tone.frequency.value = v;\n                    }\n\n                    break;\n                default:\n                    break;\n            }\n        }\n\n        return this;\n    }\n\n    /** @override */\n    connect() {\n        // Clear connection\n        this.input.disconnect(0);\n        this.delay.disconnect(0);\n        this.mix.disconnect(0);\n        this.tone.disconnect(0);\n        this.feedback.disconnect(0);\n\n        // GainNode (Input) -> GainNode (Output)\n        this.input.connect(this.output);\n\n        // Effect ON\n        if (this.isActive) {\n            // GainNode (Input) -> BiquadFilterNode (Tone) -> DelayNode -> GainNode (Mix) -> GainNode (Output)\n            this.input.connect(this.tone);\n            this.tone.connect(this.delay);\n            this.delay.connect(this.mix);\n            this.mix.connect(this.output);\n\n            // Feedback\n            // GainNode (Input) -> DelayNode -> GainNode (Feedback) -> DelayNode ...\n            this.delay.connect(this.feedback);\n            this.feedback.connect(this.delay);\n        }\n\n        return this;\n    }\n\n    /** @override */\n    stop(stopTime, releaseTime) {\n        super.stop(stopTime, releaseTime);\n\n        if (this.isActive) {\n            // Connect nodes again\n            this.lfo.connect(this.depth);\n            this.depth.connect(this.delay.delayTime);\n        }\n\n        return this;\n    }\n\n    /** @override */\n    params() {\n        const params = {\n            'state'    : this.isActive,\n            'time'     : this.delay.delayTime.value,\n            'depth'    : this.depthRate,\n            'rate'     : this.rate.value,\n            'mix'      : this.mix.gain.value,\n            'tone'     : this.tone.frequency.value,\n            'feedback' : this.feedback.gain.value\n        };\n\n        return params;\n    }\n\n    /** @override */\n    toString() {\n        return '[SoundModule Chorus]';\n    }\n}\n","'use strict';\n\nimport { Effector } from './Effector';\n\n/**\n * Effector's subclass\n * @constructor\n * @extends {Effector}\n */\nexport class Delay extends Effector {\n    static MAX_DELAY_TIME = 5;  // Max delay time is 5000 [ms]\n\n    /**\n     * @param {AudioContext} context This argument is in order to use the interfaces of Web Audio API.\n     * @param {number} bufferSize This argument is buffer size for `ScriptProcessorNode`.\n     */\n    constructor(context, bufferSize) {\n        super(context, bufferSize);\n\n        this.delay    = context.createDelay(Delay.MAX_DELAY_TIME);\n        this.dry      = context.createGain();\n        this.wet      = context.createGain();\n        this.tone     = context.createBiquadFilter();\n        this.feedback = context.createGain();\n\n        // Initialize parameters\n        this.delay.delayTime.value = 0;\n        this.dry.gain.value        = 1;\n        this.wet.gain.value        = 0;\n        this.tone.type             = (typeof this.tone.type === 'string') ? 'lowpass' : (this.tone.LOWPASS || 0);\n        this.tone.frequency.value  = 350;\n        this.tone.Q.value          = Math.SQRT1_2;\n        this.tone.gain.value       = 0;  // Not used\n        this.feedback.gain.value   = 0;\n\n        // `Delay` is not connected by default\n        this.state(false);\n    }\n\n    /** @override */\n    param(key, value) {\n        if (Object.prototype.toString.call(arguments[0]) === '[object Object]') {\n            // Associative array\n            for (const k in arguments[0]) {\n                this.param(k, arguments[0][k]);\n            }\n        } else {\n            const k = String(key).replace(/-/g, '').toLowerCase();\n\n            let v   = null;\n            let min = null;\n            let max = null;\n\n            switch (k) {\n                case 'delaytime':\n                case 'time'     :\n                    if (value === undefined) {\n                        return this.delay.delayTime.value;\n                    }\n\n                    v   = parseFloat(value);\n                    min = 0;\n                    max = Delay.MAX_DELAY_TIME;\n\n                    if ((v >= min) && (v <= max)) {\n                        this.delay.delayTime.value = v;\n                    }\n\n                    break;\n                case 'dry'     :\n                case 'wet'     :\n                case 'feedback':\n                    if (value === undefined) {\n                        return this[k].gain.value;\n                    }\n\n                    v   = parseFloat(value);\n                    min = 0;\n                    max = 1;\n\n                    if ((v >= min) && (v <= max)) {\n                        this[k].gain.value = v;\n                    }\n\n                    break;\n                case 'tone':\n                    if (value === undefined) {\n                        return this.tone.frequency.value;\n                    }\n\n                    v   = parseFloat(value);\n                    min = 10;\n                    max = this.context.sampleRate / 2;\n\n                    if ((v >= min) && (v <= max)) {\n                        this.tone.frequency.value = v;\n                    }\n\n                    break;\n                default:\n                    break;\n            }\n        }\n\n        return this;\n    }\n\n    /** @override */\n    connect() {\n        // Clear connection\n        this.input.disconnect(0);\n        this.delay.disconnect(0);\n        this.dry.disconnect(0);\n        this.wet.disconnect(0);\n        this.tone.disconnect(0);\n        this.feedback.disconnect(0);\n\n        if (this.isActive) {\n            // Effect ON\n\n            // GainNode (Input) -> GainNode (Dry) -> GainNode (Output)\n            this.input.connect(this.dry);\n            this.dry.connect(this.output);\n\n            // GainNode (Input) -> BiquadFilterNode (Tone) -> DelayNode -> GainNode (Wet) -> GainNode (Output)\n            this.input.connect(this.tone);\n            this.tone.connect(this.delay);\n            this.delay.connect(this.wet);\n            this.wet.connect(this.output);\n\n            // Feedback\n            // GainNode (Input) -> DelayNode -> GainNode (Feedback) -> DelayNode ...\n            this.delay.connect(this.feedback);\n            this.feedback.connect(this.delay);\n        } else {\n            // Effect OFF\n\n            // GainNode (Input) -> GainNode (Output)\n            this.input.connect(this.output);\n        }\n\n        return this;\n    }\n\n    /** @override */\n    params() {\n        const params = {\n            'state'    : this.isActive,\n            'time'     : this.delay.delayTime.value,\n            'dry'      : this.dry.gain.value,\n            'wet'      : this.wet.gain.value,\n            'tone'     : this.tone.frequency.value,\n            'feedback' : this.feedback.gain.value\n        };\n\n        return params;\n    }\n\n    /** @override */\n    toString() {\n        return '[SoundModule Delay]';\n    }\n}\n","'use strict';\n\nimport { Effector } from './Effector';\n\n/**\n * Effector's subclass\n * @constructor\n * @extends {Effector}\n */\nexport class Reverb extends Effector {\n    static ERROR_AJAX         = 'error';\n    static ERROR_AJAX_TIMEOUT = 'timeout';\n    static ERROR_DECODE       = 'decode';\n\n    /**\n     * @param {AudioContext} context This argument is in order to use the interfaces of Web Audio API.\n     * @param {number} bufferSize This argument is buffer size for `ScriptProcessorNode`.\n     */\n    constructor(context, bufferSize) {\n        super(context, bufferSize);\n\n        this.rirs      = [];\n        this.convolver = context.createConvolver();\n        this.dry       = context.createGain();\n        this.wet       = context.createGain();\n        this.tone      = context.createBiquadFilter();\n\n        // Initialize parameters\n        this.dry.gain.value       = 1;\n        this.wet.gain.value       = 0;\n        this.tone.type            = (typeof this.tone.type === 'string') ? 'lowpass' : (this.tone.LOWPASS || 0);\n        this.tone.frequency.value = 350;\n        this.tone.Q.value         = Math.SQRT1_2;\n        this.tone.gain.value      = 0;  // Not used\n\n        // `Reverb` is not connected by default\n        this.state(false);\n    }\n\n    /** @override */\n    param(key, value) {\n        if (Object.prototype.toString.call(arguments[0]) === '[object Object]') {\n            // Associative array\n            for (const k in arguments[0]) {\n                this.param(k, arguments[0][k]);\n            }\n        } else {\n            const k = String(key).replace(/-/g, '').toLowerCase();\n\n            let v   = null;\n            let min = null;\n            let max = null;\n\n            switch (k) {\n                case 'type':\n                    if (value === undefined) {\n                        return this.convolver.buffer;\n                    }\n\n                    v   = parseInt(value, 10);\n                    min = 0;\n                    max = this.rirs.length - 1;\n\n                    if (value === null) {\n                        this.convolver.buffer = null;\n\n                        // If `buffer` in `ConvolverNode` is `null` after setting the instance of `AudioBuffer`, `Reverb` is not OFF.\n                        // Therefore, `Reverb` is OFF by disconnecting nodes.\n                        this.input.disconnect(0);\n                        this.input.connect(this.output);\n                    } else if ((v >= min) && (v <= max)) {\n                        this.convolver.buffer = this.rirs[v];\n                        this.connect();\n                    }\n\n                    break;\n                case 'dry':\n                case 'wet':\n                    if (value === undefined) {\n                        return this[k].gain.value;\n                    }\n\n                    v   = parseFloat(value);\n                    min = 0;\n                    max = 1;\n\n                    if ((v >= min) && (v <= max)) {\n                        this[k].gain.value = v;\n                    }\n\n                    break;\n                case 'tone':\n                    if (value === undefined) {\n                        return this.tone.frequency.value;\n                    }\n\n                    v   = parseFloat(value);\n                    min = 10;\n                    max = this.context.sampleRate / 2;\n\n                    if ((v >= min) && (v <= max)) {\n                        this.tone.frequency.value = v;\n                    }\n\n                    break;\n                case 'rirs':\n                    return this.rirs;  // Getter only\n                default:\n                    break;\n            }\n        }\n\n        return this;\n    }\n\n    /** @override */\n    connect() {\n        // Clear connection\n        this.input.disconnect(0);\n        this.convolver.disconnect(0);\n        this.dry.disconnect(0);\n        this.wet.disconnect(0);\n        this.tone.disconnect(0);\n\n        if (this.isActive) {\n            // Effect ON\n\n            // GainNode (Input) -> GainNode (Dry) -> GainNode (Output)\n            this.input.connect(this.dry);\n            this.dry.connect(this.output);\n\n            // GainNode (Input) -> BiquadFilterNode (Tone) -> ConvolverNode -> GainNode (Mix) -> GainNode (Output)\n            this.input.connect(this.tone);\n            this.tone.connect(this.convolver);\n            this.convolver.connect(this.wet);\n            this.wet.connect(this.output);\n        } else {\n            // Effect OFF\n\n            // GainNode (Input) -> GainNode (Output)\n            this.input.connect(this.output);\n        }\n\n        return this;\n    }\n\n    /**\n     * This method sets instance of `AudioBuffer` to `ConvolverNode`.\n     * @param {AudioBuffer|ArrayBuffer} impulse This argument is in order to convolve impulse response.\n     *     This argument is the instance of `AudioBuffer` or `ArrayBuffer` for impulse response.\n     * @param {function} errorCallback This argument is in order to be invoked when error occurs.\n     * @return {Reverb} This is returned for method chain.\n     * @override\n     */\n    start(impulse, errorCallback) {\n        if ((impulse instanceof AudioBuffer) || (impulse === null)) {\n            this.convolver.buffer = impulse;\n            this.rirs.push(impulse);  // Add to preset\n        } else if (impulse instanceof ArrayBuffer) {\n            const successCallback = buffer => {\n                this.convolver.buffer = buffer;\n                this.rirs.push(buffer);  // Add to preset\n            };\n\n            if (Object.prototype.toString.call(errorCallback) !== '[object Function]') {\n                errorCallback = () => {};\n            }\n\n            this.context.decodeAudioData(impulse, successCallback, errorCallback);\n        }\n\n        return this;\n    }\n\n    /**\n     * This method creates the instances of `AudioBuffer` by Ajax for Revreb presets.\n     * @param {Array.<string>|Array.<AudioBuffer>} rirs This argument is either URLs or the instances of `AudioBuffer` for impulse response.\n     * @param {number} timeout This argument is timeout of Ajax. The default value is 60000 msec (1 minutes).\n     * @param {function} successCallback This argument is invoked when the creating the instances of `AudioBuffer` was completed.\n     * @param {function} errorCallback This argument is invoked when error occurred.\n     * @param {function} progressCallback This argument is invoked during receiving audio data.\n     * @return {Reverb} This is returned for method chain.\n     */\n    preset(rirs, timeout, successCallback, errorCallback, progressCallback) {\n        // The argument is associative array ?\n        if (Object.prototype.toString.call(arguments[0]) === '[object Object]') {\n            const properties = arguments[0];\n\n            if ('rirs' in properties) {\n                rirs = properties.rirs;\n            }\n\n            if ('timeout' in properties) {\n                timeout = properties.timeout;\n            }\n\n            if ('success' in properties) {\n                successCallback = properties.success;\n            }\n\n            if ('error' in properties) {\n                errorCallback = properties.error;\n            }\n\n            if ('progress' in properties) {\n                progressCallback = properties.progress;\n            }\n        }\n\n        if (!Array.isArray(rirs)) {\n            rirs = [rirs];\n        }\n\n        this.rirs = new Array(rirs.length);\n\n        // If the error is at least 1, this method aborts the all of connections.\n        // Therefore, this flag are shared with the all instances of `XMLHttpRequest`.\n        let isError = false;\n\n        const t = parseInt(timeout, 10);\n\n        // Get `ArrayBuffer` by Ajax -> Create the instances of `AudioBuffer`\n        const load = (url, index) => {\n            const xhr = new XMLHttpRequest();\n\n            xhr.timeout = (t > 0) ? t : 60000;\n\n            xhr.ontimeout = event => {\n                if (!isError && (Object.prototype.toString.call(errorCallback) === '[object Function]')) {\n                    errorCallback(event, Reverb.ERROR_AJAX_TIMEOUT);\n                }\n\n                isError = true;\n            };\n\n            xhr.onprogresss = event => {\n                if (isError) {\n                    xhr.abort();\n                } else if (Object.prototype.toString.call(progressCallback) === '[object Function]') {\n                    progressCallback(event);\n                }\n            };\n\n            xhr.onerror = event => {\n                if (!isError && (Object.prototype.toString.call(errorCallback) === '[object Function]')) {\n                    errorCallback(event, Reverb.ERROR_AJAX);\n                }\n\n                isError = true;\n            };\n\n            xhr.onload = event => {\n                if (xhr.status === 200) {\n                    const arrayBuffer = xhr.response;\n\n                    if (!(arrayBuffer instanceof ArrayBuffer)) {\n                        return;\n                    }\n\n                    const decodeSuccessCallback = audioBuffer => {\n                        this.rirs[index] = audioBuffer;\n\n                        // The creating the instances of `AudioBuffer` has completed ?\n                        for (let i = 0, len = this.rirs.length; i < len; i++) {\n                            if (this.rirs[i] === undefined) {\n                                return;\n                            }\n                        }\n\n                        if (Object.prototype.toString.call(successCallback) === '[object Function]') {\n                            successCallback(event);\n                        }\n                    };\n\n                    const decodeErrorCallback = error => {\n                        if (Object.prototype.toString.call(errorCallback) === '[object Function]') {\n                            errorCallback(error, Reverb.ERROR_DECODE);\n                        }\n                    };\n\n                    this.context.decodeAudioData(arrayBuffer, decodeSuccessCallback, decodeErrorCallback);\n                }\n            };\n\n            xhr.open('GET', url, true);\n            xhr.responseType = 'arraybuffer';  // XMLHttpRequest Level 2\n            xhr.send(null);\n        };\n\n        for (let i = 0, len = rirs.length; i < len; i++) {\n            if (typeof rirs[i] === 'string') {\n                // Get the instances of `AudioBuffer` from the designated URLs.\n                load(rirs[i], i);\n            } else if (rirs[i] instanceof AudioBuffer) {\n                // Get the instances of `AudioBuffer` directly\n                this.rirs[i] = rirs[i];\n            }\n        }\n\n        return this;\n    }\n\n    /** @override */\n    state(state) {\n        if (state === undefined) {\n            return this.isActive;\n        }\n\n        if (String(state).toLowerCase() === 'toggle') {\n            this.isActive = !this.isActive;\n        } else {\n            this.isActive = Boolean(state);\n        }\n\n        // Change connection\n        this.connect();\n\n        return this;\n    }\n\n    /** @override */\n    params() {\n        const params = {\n            'state' : this.isActive,\n            'dry'   : this.dry.gain.value,\n            'wet'   : this.wet.gain.value,\n            'tone'  : this.tone.frequency.value\n        };\n\n        return params;\n    }\n\n    /** @override */\n    toString() {\n        return '[SoundModule Reverb]';\n    }\n}\n","'use strict';\n\nimport { Effector } from './Effector';\n\n/**\n * Effector's subclass\n * @constructor\n * @extends {Effector}\n */\nexport class Panner extends Effector {\n    static PANNING_MODELS = {\n        'equalpower' : 0,\n        'HRTF'       : 1\n    };\n\n    static DISTANCE_MODELS = {\n        'linear'      : 0,\n        'inverse'     : 1,\n        'exponential' : 2\n    };\n\n    /**\n     * @param {AudioContext} context This argument is in order to use the interfaces of Web Audio API.\n     * @param {number} bufferSize This argument is buffer size for `ScriptProcessorNode`.\n     */\n    constructor(context, bufferSize) {\n        super(context, bufferSize);\n\n        this.panner = context.createPanner();\n\n        this.positions    = { 'x' : 0, 'y' : 0, 'z' : 0 };\n        this.orientations = { 'x' : 1, 'y' : 0, 'z' : 0 };\n\n        this.panner.refDistance   = 1;\n        this.panner.maxDistance   = 10000;\n        this.panner.rolloffFactor = 1;\n\n        this.panner.coneInnerAngle = 360;\n        this.panner.coneOuterAngle = 360;\n        this.panner.coneOuterGain  = 0;\n\n        this.panner.panningModel  = (typeof this.panner.panningModel  === 'string') ? 'HRTF'    : (this.panner.HRTF || 1);\n        this.panner.distanceModel = (typeof this.panner.distanceModel === 'string') ? 'inverse' : (this.panner.INVERSE_DISTANCE || 1);\n\n        if ((this.panner.positionX instanceof AudioParam) && (this.panner.positionY instanceof AudioParam) && (this.panner.positionZ instanceof AudioParam)) {\n            this.panner.positionX.setValueAtTime(this.positions.x, context.currentTime);\n            this.panner.positionY.setValueAtTime(this.positions.y, context.currentTime);\n            this.panner.positionZ.setValueAtTime(this.positions.z, context.currentTime);\n        } else {\n            this.panner.setPosition(this.positions.x, this.positions.y, this.positions.z);\n        }\n\n        if ((this.panner.orientationX instanceof AudioParam) && (this.panner.orientationY instanceof AudioParam) && (this.panner.orientationZ instanceof AudioParam)) {\n            this.panner.orientationX.setValueAtTime(this.orientations.x, context.currentTime);\n            this.panner.orientationY.setValueAtTime(this.orientations.y, context.currentTime);\n            this.panner.orientationZ.setValueAtTime(this.orientations.z, context.currentTime);\n        } else {\n            this.panner.setOrientation(this.orientations.x, this.orientations.y, this.orientations.z);\n        }\n\n        // `Panner` is not connected by default\n        this.state(false);\n    }\n\n    /** @override */\n    param(key, value) {\n        if (Object.prototype.toString.call(arguments[0]) === '[object Object]') {\n            // Associative array\n            for (const k in arguments[0]) {\n                this.param(k, arguments[0][k]);\n            }\n        } else {\n            const k = String(key).replace(/-/g, '').toLowerCase();\n\n            let v = null;\n\n            switch (k) {\n                case 'x':\n                case 'y':\n                case 'z':\n                    if (value === undefined) {\n                        return this.positions[k];\n                    }\n\n                    v = parseFloat(value);\n\n                    if (!isNaN(v)) {\n                        this.positions[k] = v;\n\n                        if ((this.panner.positionX instanceof AudioParam) && (this.panner.positionY instanceof AudioParam) && (this.panner.positionZ instanceof AudioParam)) {\n                            this.panner.positionX.setValueAtTime(this.positions.x, this.context.currentTime);\n                            this.panner.positionY.setValueAtTime(this.positions.y, this.context.currentTime);\n                            this.panner.positionZ.setValueAtTime(this.positions.z, this.context.currentTime);\n                        } else {\n                            this.panner.setPosition(this.positions.x, this.positions.y, this.positions.z);\n                        }\n                    }\n\n                    break;\n                case 'ox':\n                case 'oy':\n                case 'oz':\n                    if (value === undefined) {\n                        return this.orientations[k.charAt(1)];\n                    }\n\n                    v = parseFloat(value);\n\n                    if (!isNaN(v)) {\n                        this.orientations[k.charAt(1)] = v;\n\n                        if ((this.panner.orientationX instanceof AudioParam) && (this.panner.orientationY instanceof AudioParam) && (this.panner.orientationZ instanceof AudioParam)) {\n                            this.panner.orientationX.setValueAtTime(this.orientations.x, this.context.currentTime);\n                            this.panner.orientationY.setValueAtTime(this.orientations.y, this.context.currentTime);\n                            this.panner.orientationZ.setValueAtTime(this.orientations.z, this.context.currentTime);\n                        } else {\n                            this.panner.setOrientation(this.orientations.x, this.orientations.y, this.orientations.z);\n                        }\n                    }\n\n                    break;\n                case 'refdistance':\n                    if (value === undefined) {\n                        return this.panner.refDistance;\n                    }\n\n                    v = parseFloat(value);\n\n                    if (v >= 0) {\n                        this.panner.refDistance = v;\n                    }\n\n                    break;\n                case 'maxdistance':\n                    if (value === undefined) {\n                        return this.panner.maxDistance;\n                    }\n\n                    v = parseFloat(value);\n\n                    if (v > 0) {\n                        this.panner.maxDistance = v;\n                    }\n\n                    break;\n                case 'rollofffactor':\n                    if (value === undefined) {\n                        return this.panner.rolloffFactor;\n                    }\n\n                    v = parseFloat(value);\n\n                    if (v >= 0) {\n                        this.panner.rolloffFactor = v;\n                    }\n\n                    break;\n                case 'coneinnerangle':\n                    if (value === undefined) {\n                        return this.panner.coneInnerAngle;\n                    }\n\n                    v = parseFloat(value);\n\n                    if ((v >= 0) && (v <= 360)) {\n                        this.panner.coneInnerAngle = v;\n                    }\n\n                    break;\n                case 'coneouterangle':\n                    if (value === undefined) {\n                        return this.panner.coneOuterAngle;\n                    }\n\n                    v = parseFloat(value);\n\n                    if ((v >= 0) && (v <= 360)) {\n                        this.panner.coneOuterAngle = v;\n                    }\n\n                    break;\n                case 'coneoutergain':\n                    if ((v >= 0) && (v <= 1)) {\n                        return this.panner.coneOuterGain;\n                    }\n\n                    v = parseFloat(value);\n\n                    if (!isNaN(v)) {\n                        this.panner.coneOuterGain = v;\n                    }\n\n                    break;\n                case 'panningmodel':\n                    if (value === undefined) {\n                        return this.panner.panningModel;\n                    }\n\n                    v = /HRTF/i.test(value) ? String(value).toUpperCase() : String(value).toLowerCase();\n\n                    if (v in Panner.PANNING_MODELS) {\n                        this.panner.panningModel = (typeof this.panner.panningModel === 'string') ? v : Panner.PANNING_MODELS[v];\n                    }\n\n                    break;\n                case 'distancemodel':\n                    if (value === undefined) {\n                        return this.panner.distanceModel;\n                    }\n\n                    v = String(value).replace(/-/g, '').toLowerCase();\n\n                    if (v in Panner.DISTANCE_MODELS) {\n                        this.panner.distanceModel = (typeof this.panner.distanceModel === 'string') ? v : Panner.DISTANCE_MODELS[v];\n                    }\n\n                    break;\n                default:\n                    break;\n            }\n        }\n\n        return this;\n    }\n\n    /** @override */\n    connect() {\n        // Clear connection\n        this.input.disconnect(0);\n        this.panner.disconnect(0);\n\n        if (this.isActive) {\n            // Effect ON\n\n            // GainNode (Input) -> PannerNode -> GainNode (Output)\n            this.input.connect(this.panner);\n            this.panner.connect(this.output);\n        } else {\n            // Effect OFF\n\n            // GainNode (Input) -> GainNode (Output)\n            this.input.connect(this.output);\n        }\n\n        return this;\n    }\n\n    /** @override */\n    params() {\n        const params = {\n            'state'          : this.isActive,\n            'positions'      : this.positions,\n            'orientations'   : this.orientations,\n            'refDistance'    : this.panner.refDistance,\n            'maxDistance'    : this.panner.maxDistance,\n            'rolloffFactor'  : this.panner.rolloffFactor,\n            'coneInnerAngle' : this.panner.coneInnerAngle,\n            'coneOuterAngle' : this.panner.coneOuterAngle,\n            'coneOuterGain'  : this.panner.coneOuterGain,\n            'panningModel'   : this.panner.panningModel,\n            'distanceModel'  : this.panner.distanceModel\n        };\n\n        return params;\n    }\n\n    /** @override */\n    toString() {\n        return '[SoundModule Panner]';\n    }\n}\n","'use strict';\n\nimport { Effector } from './Effector';\n\n/**\n * Effector's subclass\n * @constructor\n * @extends {Effector}\n */\nexport class Listener extends Effector {\n    /**\n     * @param {AudioContext} context This argument is in order to use the interfaces of Web Audio API.\n     */\n    constructor(context, bufferSize) {\n        super(context, bufferSize);\n\n        // the instance of `AudioListener`\n        this.listener = context.listener;\n\n        // Set default value\n        this.positions = { 'x' : 0, 'y' : 0, 'z' : 0 };\n        this.forwards  = { 'x' : 0, 'y' : 0, 'z' : -1 };\n        this.ups       = { 'x' : 0, 'y' : 1, 'z' : 0 };\n\n        if ((this.listener.positionX instanceof AudioParam) && (this.listener.positionY instanceof AudioParam) && (this.listener.positionZ instanceof AudioParam)) {\n            this.listener.positionX.setValueAtTime(this.positions.x, context.currentTime);\n            this.listener.positionY.setValueAtTime(this.positions.y, context.currentTime);\n            this.listener.positionZ.setValueAtTime(this.positions.z, context.currentTime);\n        } else {\n            this.listener.setPosition(this.positions.x, this.positions.y, this.positions.z);\n        }\n\n        if ((this.listener.forwardX instanceof AudioParam) &&\n            (this.listener.forwardY instanceof AudioParam) &&\n            (this.listener.forwardZ instanceof AudioParam) &&\n            (this.listener.upX instanceof AudioParam) &&\n            (this.listener.upY instanceof AudioParam) &&\n            (this.listener.upZ instanceof AudioParam)) {\n            this.listener.forwardX.setValueAtTime(this.forwards.x, context.currentTime);\n            this.listener.forwardY.setValueAtTime(this.forwards.y, context.currentTime);\n            this.listener.forwardZ.setValueAtTime(this.forwards.z, context.currentTime);\n            this.listener.upX.setValueAtTime(this.ups.x, context.currentTime);\n            this.listener.upY.setValueAtTime(this.ups.y, context.currentTime);\n            this.listener.upZ.setValueAtTime(this.ups.z, context.currentTime);\n        } else {\n            this.listener.setOrientation(this.forwards.x, this.forwards.y, this.forwards.z, this.ups.x, this.ups.y, this.ups.z);\n        }\n    }\n\n    /**\n     * This method is getter or setter for parameters.\n     * @param {string|object} key This argument is property name in the case of string type.\n     *     This argument is pair of property and value in the case of associative array.\n     * @param {number} value This argument is the value of designated property. If this argument is omitted, This method is getter.\n     * @return {number|Listener} This is returned as the value of designated property in the case of getter. Otherwise, this is returned for method chain.\n     */\n    param(key, value) {\n        if (Object.prototype.toString.call(arguments[0]) === '[object Object]') {\n            // Associative array\n            for (const k in arguments[0]) {\n                this.param(k, arguments[0][k]);\n            }\n        } else {\n            const k = String(key).replace(/-/g, '').toLowerCase();\n\n            let v = null;\n\n            switch (k) {\n                case 'x':\n                case 'y':\n                case 'z':\n                    if (value === undefined) {\n                        return this.positions[k];\n                    }\n\n                    v = parseFloat(value);\n\n                    if (!isNaN(v)) {\n                        this.positions[k] = v;\n\n                        if ((this.listener.positionX instanceof AudioParam) && (this.listener.positionY instanceof AudioParam) && (this.listener.positionZ instanceof AudioParam)) {\n                            this.listener.positionX.setValueAtTime(this.positions.x, this.context.currentTime);\n                            this.listener.positionY.setValueAtTime(this.positions.y, this.context.currentTime);\n                            this.listener.positionZ.setValueAtTime(this.positions.z, this.context.currentTime);\n                        } else {\n                            this.listener.setPosition(this.positions.x, this.positions.y, this.positions.z);\n                        }\n                    }\n\n                    break;\n                case 'fx':\n                case 'fy':\n                case 'fz':\n                    if (value === undefined) {\n                        return this.forwards[k.charAt(1)];\n                    }\n\n                    v = parseFloat(value);\n\n                    if (!isNaN(v)) {\n                        this.forwards[k.charAt(1)] = v;\n\n                        if ((this.listener.forwardX instanceof AudioParam) &&\n                            (this.listener.forwardY instanceof AudioParam) &&\n                            (this.listener.forwardZ instanceof AudioParam) &&\n                            (this.listener.upX instanceof AudioParam) &&\n                            (this.listener.upY instanceof AudioParam) &&\n                            (this.listener.upZ instanceof AudioParam)) {\n                            this.listener.forwardX.setValueAtTime(this.forwards.x, this.context.currentTime);\n                            this.listener.forwardY.setValueAtTime(this.forwards.y, this.context.currentTime);\n                            this.listener.forwardZ.setValueAtTime(this.forwards.z, this.context.currentTime);\n                            this.listener.upX.setValueAtTime(this.ups.x, this.context.currentTime);\n                            this.listener.upY.setValueAtTime(this.ups.y, this.context.currentTime);\n                            this.listener.upZ.setValueAtTime(this.ups.z, this.context.currentTime);\n                        } else {\n                            this.listener.setOrientation(this.forwards.x, this.forwards.y, this.forwards.z, this.ups.x, this.ups.y, this.ups.z);\n                        }\n                    }\n\n                    break;\n                case 'ux':\n                case 'uy':\n                case 'uz':\n                    if (value === undefined) {\n                        return this.ups[k.charAt(1)];\n                    }\n\n                    v = parseFloat(value);\n\n                    if (!isNaN(v)) {\n                        this.ups[k.charAt(1)] = v;\n\n                        if ((this.listener.forwardX instanceof AudioParam) &&\n                            (this.listener.forwardY instanceof AudioParam) &&\n                            (this.listener.forwardZ instanceof AudioParam) &&\n                            (this.listener.upX instanceof AudioParam) &&\n                            (this.listener.upY instanceof AudioParam) &&\n                            (this.listener.upZ instanceof AudioParam)) {\n                            this.listener.forwardX.setValueAtTime(this.forwards.x, this.context.currentTime);\n                            this.listener.forwardY.setValueAtTime(this.forwards.y, this.context.currentTime);\n                            this.listener.forwardZ.setValueAtTime(this.forwards.z, this.context.currentTime);\n                            this.listener.upX.setValueAtTime(this.ups.x, this.context.currentTime);\n                            this.listener.upY.setValueAtTime(this.ups.y, this.context.currentTime);\n                            this.listener.upZ.setValueAtTime(this.ups.z, this.context.currentTime);\n                        } else {\n                            this.listener.setOrientation(this.forwards.x, this.forwards.y, this.forwards.z, this.ups.x, this.ups.y, this.ups.z);\n                        }\n                    }\n\n                    break;\n                default:\n                    break;\n            }\n        }\n\n        return this;\n    }\n\n    /**\n     * This method gets effecter's parameters as associative array.\n     * @return {object}\n     */\n    params() {\n        const params = {\n            'state'     : this.isActive,\n            'positions' : this.positions,\n            'forwards'  : this.forwards,\n            'ups'       : this.ups\n        };\n\n        return params;\n    }\n\n    /**\n     * This method gets effecter's parameters as JSON.\n     * @return {string}\n     */\n    toJSON() {\n        return JSON.stringify(this.params());\n    }\n\n    /** @override */\n    toString() {\n        return '[SoundModule Listener]';\n    }\n}\n","'use strict';\n\n/**\n * This private class defines properties for Envelope Generator.\n * @constructor\n */\nexport class EnvelopeGenerator {\n    static MIN_GAIN = 1e-3;\n\n    /**\n     * @param {AudioContext} context This argument is in order to use the interfaces of Web Audio API.\n     */\n    constructor(context) {\n        this.context = context;\n\n        /** @type {Array.<GainNode>} */\n        this.generators = [];\n\n        // for `GainNode`\n        this.activeIndexes = [];\n        this.activeCounter = 0;\n\n        this.attack  = 0.01;\n        this.decay   = 0.3;\n        this.sustain = 0.5;\n        this.release = 1.0;\n    }\n\n    /**\n     * This method is getter or setter for parameters.\n     * @param {string|object} key This argument is property name in the case of string type.\n     *     This argument is pair of property and value in the case of associative array.\n     * @param {number} value This argument is the value of designated property. If this argument is omitted, This method is getter.\n     * @return {number|EnvelopeGenerator} This is returned as the value of designated property in the case of getter. Otherwise, this is returned for method chain.\n     */\n    param(key, value) {\n        if (Object.prototype.toString.call(arguments[0]) === '[object Object]') {\n            // Associative array\n            for (const k in arguments[0]) {\n                this.param(k, arguments[0][k]);\n            }\n        } else {\n            const k = String(key).replace(/-/g, '').toLowerCase();\n\n            let v = null;\n\n            switch (k) {\n                case 'attack' :\n                case 'sustain':\n                    if (value === undefined) {\n                        return this[k];\n                    }\n\n                    v = parseFloat(value);\n\n                    if (v >= 0) {\n                        this[k] = v;\n                    }\n\n                    break;\n                case 'decay'  :\n                case 'release':\n                    if (value === undefined) {\n                        return this[k];\n                    }\n\n                    v = parseFloat(value);\n\n                    if (v > 0) {\n                        this[k] = v;\n                    }\n\n                    break;\n                default:\n                    break;\n            }\n        }\n\n        return this;\n    }\n\n    /**\n     * This method connects the instance of `AudioNode`.\n     * @param {number} index This argument is in order to select the instance of `GainNode` that is Envelope Generator.\n     * @param {AudioNode} input This argument is the instance of `AudioNode` as input.\n     * @param {AudioNode} output This argument is the instance of `AudioNode` as output.\n     * @return {EnvelopeGenerator} This is returned for method chain.\n     */\n    ready(index, input, output) {\n        const i = (parseInt(index, 10) >= 0) ? parseInt(index, 10) : 0;\n\n        if ((input instanceof AudioNode) && (output instanceof AudioNode)) {\n            input.connect(this.generators[i]);\n            this.generators[i].connect(output);\n        } else if (input instanceof AudioNode) {\n            input.connect(this.generators[i]);\n        } else if (output instanceof AudioNode) {\n            this.generators[i].connect(output);\n        }\n\n        this.activeIndexes[i] = i;\n        this.activeCounter++;\n\n        return this;\n    }\n\n    /**\n     * This method changes gain (Attack -> Decay -> Sustain).\n     * @param {number} startTime This argument is the start time of Attack.\n     * @return {EnvelopeGenerator} This is returned for method chain.\n     */\n    start(startTime) {\n        let s = parseFloat(startTime);\n\n        if (isNaN(s) || (s < this.context.currentTime)) {\n            s = this.context.currentTime;\n        }\n\n        // Attack -> Decay -> Sustain\n        const t0      = s;\n        const t1      = t0 + this.attack;\n        const t2      = this.decay;\n        const t2Value = this.sustain;\n\n        for (const activeIndex of this.activeIndexes) {\n            if (activeIndex === undefined) {\n                continue;\n            }\n\n            // Start from `gain.value = 0`\n            this.generators[activeIndex].gain.cancelScheduledValues(t0);\n            this.generators[activeIndex].gain.setValueAtTime(0, t0);\n\n            // Attack : `gain.value` increases linearly until assigned time (t1)\n            this.generators[activeIndex].gain.linearRampToValueAtTime(1, t1);\n\n            // Decay -> Sustain : `gain.value` gradually decreases to value of Sustain during of Decay time (t2) from assigned time (t1)\n            this.generators[activeIndex].gain.setTargetAtTime(t2Value, t1, t2);\n        }\n\n        return this;\n    }\n\n    /**\n     * This method changes gain (Attack or Decay or Sustain -> Release).\n     * @param {number} stopTime This argument is the start time of Release.\n     * @param {boolean} useCurve This argument is to use different methods.\n     * @return {EnvelopeGenerator} This is returned for method chain.\n     */\n    stop(stopTime, useCurve) {\n        let s = parseFloat(stopTime) - this.release;\n\n        if (isNaN(s) || (s < this.context.currentTime)) {\n            s = this.context.currentTime;\n        }\n\n        // Sustain -> Release\n        const t3 = s;\n        const t4 = this.release;\n\n        for (const activeIndex of this.activeIndexes) {\n            if (activeIndex === undefined) {\n                continue;\n            }\n\n            // in the case of mouseup on the way of Decay\n            this.generators[activeIndex].gain.cancelScheduledValues(t3);\n\n            // Release : `gain.value` gradually decreases to 0 during of Release time (t4) from assigned time (t3)\n            // NOTE: https://www.w3.org/TR/webaudio/#dom-audioparam-settargetattime\n            if (useCurve) {\n                this.generators[activeIndex].gain.setValueCurveAtTime(new Float32Array([1, 0.5, 0.25, 0]), t3, t4);\n            } else {\n                this.generators[activeIndex].gain.setTargetAtTime(0, t3, t4);\n            }\n        }\n\n        return this;\n    }\n\n    /**\n     * This method gets the instance of `GainNode` for Envelope Generator.\n     * @param {number} index This argument is the index of array that contains the instance of `GainNode` for Envelope Generator.\n     * @return {GainNode} This is returned as the instance of `GainNode` for Envelope Generator.\n     */\n    getGenerator(index) {\n        const i = (parseInt(index, 10) >= 0) ? parseInt(index, 10) : 0;\n\n        return this.generators[i];\n    }\n\n    /**\n     * This method sets the instance of `GainNode` for Envelope Generator.\n     * @param {number} index This argument is the index of array that contains the instance of `GainNode` for Envelope Generator.\n     * @return {EnvelopeGenerator} This is returned for method chain.\n     */\n    setGenerator(index) {\n        const i = (parseInt(index, 10) >= 0) ? parseInt(index, 10) : 0;\n\n        this.generators[i] = this.context.createGain();\n\n        // for legacy browsers\n        this.generators[i].gain.setTargetAtTime = this.generators[i].gain.setTargetAtTime || this.generators[i].gain.setTargetValueAtTime;\n\n        return this;\n    }\n\n    /**\n     * This method determines whether the all of gain schedulings have ended.\n     * @return {boolean} If the all of gain schedulings have ended, this value is `true`. Otherwise, this value is `false`.\n     */\n    isStop() {\n        let counter = 0;\n\n        for (const activeIndex of this.activeIndexes) {\n            if (activeIndex === undefined) {\n                continue;\n            }\n\n            if (this.generators[activeIndex].gain.value > EnvelopeGenerator.MIN_GAIN) {\n                return false;\n            }\n\n            counter++;\n\n            // the all of schedulings are stopped ?\n            if (counter === this.activeCounter) {\n                return true;\n            }\n        }\n    }\n\n    /**\n     * This method clears variables for managing the instance of `GainNode`.\n     * @param {boolean} isDisconnect This argument is in order to determine whether disconnect `AudioNode`.\n     * @return {EnvelopeGenerator} This is returned for method chain.\n     */\n    clear(isDisconnect) {\n        this.activeIndexes.length = 0;\n        this.activeCounter = 0;\n\n        for (const generator of this.generators) {\n            generator.gain.cancelScheduledValues(this.context.currentTime);\n            generator.gain.value = 1;\n\n            if (isDisconnect) {\n                generator.disconnect(0);\n            }\n        }\n\n        return this;\n    }\n\n    /**\n     * This method gets effecter's parameters as associative array.\n     * @return {object}\n     */\n    params() {\n        const params = {\n            'attack'  : this.attack,\n            'decay'   : this.decay,\n            'sustain' : this.sustain,\n            'release' : this.release\n        };\n\n        return params;\n    }\n\n    /**\n     * This method gets effecter's parameters as JSON.\n     * @return {string}\n     */\n    toJSON() {\n        return JSON.stringify(this.params());\n    }\n\n    /** @override */\n    toString() {\n        return '[SoundModule EnvelopeGenerator]';\n    }\n}\n","'use strict';\n\nimport { Analyser } from './Analyser';\nimport { Recorder } from './Recorder';\nimport { Session } from './Session';\nimport { Effector } from './Effectors/Effector';\nimport { Stereo } from './Effectors/Stereo';\nimport { Compressor } from './Effectors/Compressor';\nimport { Distortion } from './Effectors/Distortion';\nimport { Wah } from './Effectors/Wah';\nimport { PitchShifter } from './Effectors/PitchShifter';\nimport { Equalizer } from './Effectors/Equalizer';\nimport { Filter } from './Effectors/Filter';\nimport { Autopanner } from './Effectors/Autopanner';\nimport { AutopannerFallback } from './Effectors/AutopannerFallback';\nimport { Tremolo } from './Effectors/Tremolo';\nimport { Ringmodulator } from './Effectors/Ringmodulator';\nimport { Phaser } from './Effectors/Phaser';\nimport { Flanger } from './Effectors/Flanger';\nimport { Chorus } from './Effectors/Chorus';\nimport { Delay } from './Effectors/Delay';\nimport { Reverb } from './Effectors/Reverb';\nimport { Panner } from './Effectors/Panner';\nimport { Listener } from './Effectors/Listener';\nimport { EnvelopeGenerator } from './Effectors/EnvelopeGenerator';\n\n/**\n * This class is superclass that is the top in this library.\n * This library's users do not create the instance of `SoundModule`.\n * This class is used for inherit in subclass (`OscillatorModule`, `OneshotModule`, `AudioModule`, `MediaModule`, `StreamModule`, `MixerModule`, `ProcessorModule`).\n * Therefore, this class defines the common properties for each sound sources.\n * @constructor\n */\nexport class SoundModule {\n    static NUMBER_OF_INPUTS  = 2;\n    static NUMBER_OF_OUTPUTS = 2;\n\n    /**\n     * @param {AudioContext} context This argument is in order to use the interfaces of Web Audio API.\n     * @param {number} bufferSize This argument is buffer size for `ScriptProcessorNode`.\n     */\n    constructor(context, bufferSize) {\n        this.init(context, bufferSize);\n    }\n\n    /**\n     * This method initials modules.\n     * @param {AudioContext} context This argument is in order to use the interfaces of Web Audio API.\n     * @param {number} bufferSize This argument is buffer size for `ScriptProcessorNode`.\n     *     However, the opportunity for designating buffer size is not so much.\n     *     The reason why is that the constructor of `SoundModule` selects buffer size automaticly.\n     *     This buffer size can be changed explicitly by calling `resize` method.\n     */\n    init(context, bufferSize) {\n        if (Array.isArray(this.modules) && (this.modules.length > 0)) {\n            this.mastervolume.disconnect(0);\n            this.mastervolume = null;\n\n            this.processor.disconnect(0);\n            this.processor = null;\n\n            this.analyser.input.disconnect(0);\n            this.analyser = null;\n\n            this.recorder.processor.disconnect(0);\n            this.recorder = null;\n\n            this.session.sender.disconnect(0);\n            this.session  = null;\n\n            this.modules.forEach(module => {\n                module.input.disconnect(0);\n                module.output.disconnect(0);\n                module = null;\n            });\n\n            this.modules = [];\n        }\n\n        this.context    = context;\n        this.sampleRate = context.sampleRate;\n\n        let size = parseInt(bufferSize, 10);\n\n        switch (size) {\n            case   256:\n            case   512:\n            case  1024:\n            case  2048:\n            case  4096:\n            case  8192:\n            case 16384:\n                break;\n            default:\n                size = 0;\n                break;\n        }\n\n        this.mastervolume = context.createGain();\n        this.processor    = context.createScriptProcessor(size, SoundModule.NUMBER_OF_INPUTS, SoundModule.NUMBER_OF_OUTPUTS);\n\n        this.analyser          = new Analyser(context);\n        this.recorder          = new Recorder(context, size, SoundModule.NUMBER_OF_INPUTS, SoundModule.NUMBER_OF_OUTPUTS);\n        this.session           = new Session(context, size, SoundModule.NUMBER_OF_INPUTS, SoundModule.NUMBER_OF_OUTPUTS, this.analyser);\n        this.stereo            = new Stereo(context, size);\n        this.compressor        = new Compressor(context, size);\n        this.distortion        = new Distortion(context, size);\n        this.wah               = new Wah(context, size);\n        this.pitchshifter      = new PitchShifter(context, size);\n        this.equalizer         = new Equalizer(context, size);\n        this.filter            = new Filter(context, size);\n        this.autopanner        = context.createStereoPanner ? new Autopanner(context, size) : new AutopannerFallback(context, size);\n        this.tremolo           = new Tremolo(context, size);\n        this.ringmodulator     = new Ringmodulator(context, size);\n        this.phaser            = new Phaser(context, size);\n        this.flanger           = new Flanger(context, size);\n        this.chorus            = new Chorus(context, size);\n        this.delay             = new Delay(context, size);\n        this.reverb            = new Reverb(context, size);\n        this.panner            = new Panner(context, size);\n        this.listener          = new Listener(context, size);\n        this.envelopegenerator = new EnvelopeGenerator(context);\n\n        // The default order for connection\n        this.modules = [\n            this.stereo,\n            this.compressor,\n            this.distortion,\n            this.wah,\n            this.pitchshifter,\n            this.equalizer,\n            this.filter,\n            this.autopanner,\n            this.tremolo,\n            this.ringmodulator,\n            this.phaser,\n            this.flanger,\n            this.chorus,\n            this.delay,\n            this.reverb,\n            this.panner\n        ];\n    }\n\n    /** @abstract */\n    setup() {\n        return this;\n    }\n\n    /**\n     * This method is getter or setter for parameters.\n     * @param {string} key This argument is property name.\n     * @param {number} value This argument is the value of designated property. If this argument is omitted, This method is getter.\n     * @return {number} This is returned as the value of designated property in the case of getter.\n     */\n    param(key, value) {\n        const k = String(key).replace(/-/g, '').toLowerCase();\n\n        let v   = null;\n        let min = null;\n        let max = null;\n\n        switch (k) {\n            case 'mastervolume':\n                if (value === undefined) {\n                    return this.mastervolume.gain.value;\n                }\n\n                v   = parseFloat(value);\n                min = 0;\n                max = 1;\n\n                if ((v >= min) && (v <= max)) {\n                    this.mastervolume.gain.value = v;\n                }\n\n                break;\n            default:\n                break;\n        }\n    }\n\n    /** @abstract */\n    ready() {\n        return this;\n    }\n\n    /** @abstract */\n    start() {\n        return this;\n    }\n\n    /** @abstract */\n    stop() {\n        return this;\n    }\n\n    /** @abstract */\n    get() {\n        return this;\n    }\n\n    /**\n     * This method changes buffer size for `ScriptProcessorNode`.\n     * @param {number} bufferSize This argument is buffer size for `ScriptProcessorNode`.\n     *     This value is one of 0, 256, 512, 1024, 2048, 4096, 8192, 16384.\n     * @return {SoundModule} This is returned for method chain.\n     */\n    resize(bufferSize) {\n        this.init(this.context, bufferSize);\n        return this;\n    }\n\n    /**\n     * This method gets buffer size for `ScriptProcessorNode`.\n     * @return {number} This is returned as buffer size for `ScriptProcessorNode`.\n     */\n    getBufferSize() {\n        return this.processor.bufferSize;\n    }\n\n    /**\n     * This method installs customized effector.\n     * @param {string} name This argument is in order to select effector.\n     * @param {Effector} effector This argument is the subclass that extends `Effector` class.\n     * @return {SoundModule} This is returned for method chain.\n     */\n    install(name, effector) {\n        if (!(effector instanceof Effector)) {\n            return this;\n        }\n\n        if (String(name) in this) {\n            return this;\n        }\n\n        this[name] = effector;\n\n        if (this.modules.every(module => module !== effector)) {\n            this.modules.push(effector);\n        }\n\n        return this;\n    }\n\n    /**\n     * This method connects nodes that are defined by this library and Web Audio API.\n     * @param {AudioNode} source This argument is `AudioNode` for input of sound.\n     * @param {Array.<Effector>} connects This argument is array for changing the default connection.\n     * @return {SoundModule} This is returned for method chain.\n     */\n    connect(source, connects) {\n        // Customize connection ?\n        if (Array.isArray(connects)) {\n            this.modules = connects;\n        }\n\n        // Start connection\n        // AudioSourceNode (Input)-> node -> ... -> node -> GainNode (Master Volume) -> AnalyserNode  -> AudioDestinationNode (Output)\n        source.disconnect(0);  // Clear connection\n\n        if (this.modules.length > 0) {\n            source.connect(this.modules[0].input);\n        } else {\n            source.connect(this.mastervolume);\n        }\n\n        for (let i = 0, len = this.modules.length; i < len; i++) {\n            // Clear connection\n            this.modules[i].output.disconnect(0);\n\n            if (i < (this.modules.length - 1)) {\n                // Connect to next node\n                this.modules[i].output.connect(this.modules[i + 1].input);\n            } else {\n                this.modules[i].output.connect(this.mastervolume);\n            }\n        }\n\n        this.mastervolume.connect(this.context.destination);\n\n        // for analyser\n        this.mastervolume.connect(this.analyser.input);\n\n        // for recording\n        this.mastervolume.connect(this.recorder.processor);\n        this.recorder.processor.connect(this.context.destination);\n\n        // for session\n        this.mastervolume.connect(this.session.sender);\n        this.session.sender.connect(this.context.destination);\n\n        return this;\n    }\n\n    /**\n     * This method gets the instance of module that is defined by this library. This method enables to access the instance of module by unified call.\n     * @param {string} module This argument is module's name.\n     * @return {Analyser|Recorder|Session|Effector|Listener|EnvelopeGenerator|Glide|VocalCanceler|NoiseGate|NoiseSuppressor} This value is the instance of module.\n     */\n    module(module) {\n        const m = String(module).replace(/-/g, '').toLowerCase();\n\n        switch (m) {\n            case 'analyser'     :\n            case 'recorder'     :\n            case 'session'      :\n            case 'stereo'       :\n            case 'compressor'   :\n            case 'distortion'   :\n            case 'wah'          :\n            case 'pitchshifter' :\n            case 'equalizer'    :\n            case 'filter'       :\n            case 'autopanner'   :\n            case 'tremolo'      :\n            case 'ringmodulator':\n            case 'phaser'       :\n            case 'flanger'      :\n            case 'chorus'       :\n            case 'delay'        :\n            case 'reverb'       :\n            case 'panner'       :\n            case 'listener'     :\n                return this[m];\n            case 'envelopegenerator':\n            case 'eg'               :\n                return this.envelopegenerator;\n            case 'glide':\n                if (m in this) {\n                    return this[m];  // OscillatorModule\n                }\n\n                // fall through\n            case 'vocalcanceler':\n                if (m in this) {\n                    return this[m];  // AudioModule, MediaModule\n                }\n\n                // fall through\n            case 'noisegate'      :\n            case 'noisesuppressor':\n                if (m in this) {\n                    return this[m];  // StreamModule\n                }\n\n                // fall through\n            default:\n                return this[m];  // Installed effector\n        }\n    }\n\n    /**\n     * This method starts effectors.\n     * @param {number} startTime This argument is used for scheduling parameter.\n     * @return {SoundModule} This is returned for method chain.\n     */\n    on(startTime) {\n        let s = parseFloat(startTime);\n\n        if (isNaN(s) || (s < this.context.currentTime)) {\n            s = this.context.currentTime;\n        }\n\n        this.stereo.start(s);\n        this.chorus.start(s);\n        this.flanger.start(s);\n        this.phaser.start(s);\n        this.autopanner.start(s);\n        this.tremolo.start(s);\n        this.ringmodulator.start(s);\n        this.wah.start(s);\n        this.filter.start(s);\n\n        return this;\n    }\n\n    /**\n     * This method stops effectors.\n     * @param {number} stopTime This argument is used for scheduling parameter.\n     * @return {SoundModule} This is returned for method chain.\n     */\n    off(stopTime) {\n        let s = parseFloat(stopTime);\n\n        if (isNaN(s) || (s < this.context.currentTime)) {\n            s = this.context.currentTime;\n        }\n\n        this.stereo.stop(s);\n        this.chorus.stop(s);\n        this.flanger.stop(s);\n        this.phaser.stop(s);\n        this.autopanner.stop(s);\n        this.tremolo.stop(s);\n        this.ringmodulator.stop(s);\n        this.wah.stop(s);\n        // this.filter.stop(s);\n\n        return this;\n    }\n\n    /**\n     * This method gets effector's parameters as associative array.\n     * @return {object}\n     */\n    params() {\n        const params = {};\n\n        for (const module in this) {\n            if (Object.prototype.toString.call(this[module]) === '[object Function]') {\n                continue;\n            }\n\n            const m = module.toLowerCase();\n\n            if (m === 'mastervolume') {\n                params[m] = this[module].gain.value;  // AudioParam\n            } else if ((Object.prototype.toString.call(this[module]) === '[object Object]') && ('params' in this[module])) {\n                params[m] = this[module].params();\n            }\n        }\n\n        return params;\n    }\n\n    /**\n     * This method gets effector's parameters as JSON.\n     * @return {string}\n     */\n    toJSON() {\n        return JSON.stringify(this.params());\n    }\n\n    /** @override */\n    toString() {\n        return '[SoundModule]';\n    }\n}\n","'use strict';\n\n/**\n * This private class defines properties for the instance of `OscillatorNode`.\n * @constructor\n */\nexport class Oscillator {\n    // 1 Octave = 1200 cent\n    static OCTAVE = 1200;\n\n    // for legacy browsers\n    static WAVE_TYPES = {\n        'sine'     : 0,\n        'square'   : 1,\n        'sawtooth' : 2,\n        'triangle' : 3\n    };\n\n    /**\n     * @param {AudioContext} context This argument is in order to use the interfaces of Web Audio API.\n     * @param {boolean} state This argument is initial state.\n     */\n    constructor(context, state) {\n        this.isActive = state;\n\n        this.context = context;\n\n        this.source = context.createOscillator();\n\n        // for legacy browsers\n        this.source.setPeriodicWave = this.source.setPeriodicWave || this.source.setWaveTable;\n        this.source.start           = this.source.start           || this.source.noteOn;\n        this.source.stop            = this.source.stop            || this.source.noteOff;\n\n        this.volume = context.createGain();\n\n        // in order to not call in duplicate `start` or `stop`  method in the instance of `OscillatorNode`\n        this.isStop = true;\n\n        this.octave  = 0;\n        this.fine    = 0;\n        this.customs = {\n            'real' : new Float32Array([0, 1]),\n            'imag' : new Float32Array([0, 1])\n        };\n    }\n\n    /**\n     * This method is getter or setter for parameters.\n     * @param {string|object} key This argument is property name in the case of string type.\n     *     This argument is pair of property and value in the case of associative array.\n     * @param {number|string} value This argument is the value of designated property. If this argument is omitted, This method is getter.\n     * @return {number|string|Oscillator} This is returned as the value of designated property in the case of getter. Otherwise, this is returned for method chain.\n     */\n    param(key, value) {\n        if (Object.prototype.toString.call(arguments[0]) === '[object Object]') {\n            // Associative array\n            for (const k in arguments[0]) {\n                this.param(k, arguments[0][k]);\n            }\n        } else {\n            const k = String(key).replace(/-/g, '').toLowerCase();\n\n            let v   = null;\n            let min = null;\n            let max = null;\n\n            switch (k) {\n                case 'type':\n                    if (value === undefined) {\n                        return this.source.type;\n                    }\n\n                    if (Object.prototype.toString.call(value) !== '[object Object]') {\n                        v = String(value).toLowerCase();\n\n                        if (v in Oscillator.WAVE_TYPES) {\n                            this.source.type = (typeof this.source.type === 'string') ? v : Oscillator.WAVE_TYPES[v];\n                        }\n                    } else {\n                        // Custom wave\n                        if (('real' in value) && ('imag' in value)) {\n                            let reals = null;\n                            let imags = null;\n\n                            if (value.real instanceof Float32Array) {\n                                reals = value.real;\n                            } else if (Array.isArray(value.real)) {\n                                reals = new Float32Array(value.real);\n                            }\n\n                            if (value.imag instanceof Float32Array) {\n                                imags = value.imag;\n                            } else if (Array.isArray(value.imag)) {\n                                imags = new Float32Array(value.imag);\n                            }\n\n                            if ((reals instanceof Float32Array) && (imags instanceof Float32Array)) {\n                                const MAX_SIZE = 4096;  // This size is defined by specification\n\n                                if (reals.length > MAX_SIZE) { reals = reals.subarray(0, MAX_SIZE); }\n                                if (imags.length > MAX_SIZE) { imags = imags.subarray(0, MAX_SIZE); }\n\n                                // The 1st value is fixed by 0 (This is is defined by specification)\n                                if (reals[0] !== 0) { reals[0] = 0; }\n                                if (imags[0] !== 0) { imags[0] = 0; }\n\n                                const periodicWave = this.context.createPeriodicWave(reals, imags);\n\n                                this.source.setPeriodicWave(periodicWave);\n                                this.customs.real = reals;\n                                this.customs.imag = imags;\n                            }\n                        }\n                    }\n\n                    break;\n                case 'octave':\n                    if (value === undefined) {\n                        return this.octave;\n                    }\n\n                    v   = parseFloat(value);\n                    min = -4800 / Oscillator.OCTAVE;\n                    max =  4800 / Oscillator.OCTAVE;\n\n                    if ((v >= min) && (v <= max)) {\n                        this.octave = v;\n                        this.source.detune.value = this.fine + (v * Oscillator.OCTAVE);\n                    }\n\n                    break;\n                case 'fine':\n                    if (value === undefined) {\n                        return this.fine;\n                    }\n\n                    v   = parseFloat(value);\n                    min = -Oscillator.OCTAVE;\n                    max =  Oscillator.OCTAVE;\n\n                    if ((v >= min) && (v <= max)) {\n                        this.fine = v;\n                        this.source.detune.value = v + (this.octave * Oscillator.OCTAVE);\n                    }\n\n                    break;\n                case 'volume':\n                case 'gain'  :\n                    if (value === undefined) {\n                        return this.volume.gain.value;\n                    }\n\n                    v   = parseFloat(value);\n                    min = 0;\n                    max = 1;\n\n                    if ((v >= min) && (v <= max)) {\n                        this.volume.gain.value = v;\n                    }\n\n                    break;\n                default:\n                    break;\n            }\n        }\n\n        return this;\n    }\n\n    /**\n     * This method connects nodes.\n     * @param {AudioNode} output This argument is the instance of `AudioNode` as output.\n     * @return {Oscillator} This is returned for method chain.\n     */\n    ready(output) {\n        if (this.isActive) {\n            // for saving value\n            const params = {\n                'type'      : this.source.type,\n                'frequency' : this.source.frequency.value,\n                'detune'    : this.source.detune.value\n            };\n\n            if (!this.isStop) {\n                this.source.stop(this.context.currentTime);\n                this.source.disconnect(0);\n            }\n\n            this.source = this.context.createOscillator();\n\n            // for legacy browsers\n            this.source.setPeriodicWave = this.source.setPeriodicWave || this.source.setWaveTable;\n            this.source.start           = this.source.start           || this.source.noteOn;\n            this.source.stop            = this.source.stop            || this.source.noteOff;\n\n            if (params.type === 'custom') {\n                // Custom wave\n                const reals        = this.customs.real;\n                const imags        = this.customs.imag;\n                const periodicWave = this.context.createPeriodicWave(reals, imags);\n\n                this.source.setPeriodicWave(periodicWave);\n            } else {\n                this.source.type = params.type;\n            }\n\n            this.source.frequency.value = params.frequency;\n            this.source.detune.value    = params.detune;\n\n            this.volume.connect(output);\n        }\n\n        return this;\n    }\n\n    /**\n     * This method starts sound.\n     * @param {number} startTime This argument is the start time.\n     * @return {Oscillator} This is returned for method chain.\n     */\n    start(startTime) {\n        if (this.isActive) {\n            this.source.start(startTime);\n            this.isStop = false;\n        } else {\n            if (!this.isStop) {\n                this.source.stop(this.context.currentTime);\n                this.isStop = true;\n            }\n\n            this.source.disconnect(0);\n        }\n\n        return this;\n    }\n\n    /**\n     * This method stops sound.\n     * @param {number} stopTime This argument is the stop time.\n     * @return {Oscillator} This is returned for method chain.\n     */\n    stop(stopTime) {\n        if (!this.isStop) {\n            this.source.stop(stopTime);\n            this.source.disconnect(0);\n\n            this.isStop = true;\n        }\n\n        return this;\n    }\n\n    /**\n     * This method toggles active state or inactive state.\n     * @param {boolean|string} state If this argument is boolean, state is changed the designated.\n     *     If this argument is 'toggle', state is changed automatically.\n     *     If this argument is omitted, this method is getter.\n     * @return {boolean|Oscillator} This is returned as current state. Otherwise, this is returned for method chain.\n     */\n    state(state) {\n        if (state === undefined) {\n            return this.isActive;\n        }\n\n        if (String(state).toLowerCase() === 'toggle') {\n            this.isActive = !this.isActive;\n        } else {\n            this.isActive = Boolean(state);\n        }\n\n        return this;\n    }\n\n    /**\n     * This method gets the instance of `OscillatorNode`.\n     * @return {OscillatorNode}\n     */\n    get() {\n        return this.source;\n    }\n\n    /** @override */\n    toString() {\n        return '[OscillatorModule Oscillator]';\n    }\n}\n","'use strict';\n\n/**\n * This private class defines properties for Glide.\n * @constructor\n */\nexport class Glide {\n    static LINEAR      = 'linear';\n    static EXPONENTIAL = 'exponential';\n\n    /**\n     * @param {AudioContext} context This argument is in order to use the interfaces of Web Audio API.\n     */\n    constructor(context) {\n        this.context = context;\n\n        this.frequencies = {\n            'start' : -1,  // Abnormal value for the 1st sound\n            'end'   : 0\n        };\n\n        this.time = 0;             // Glide time\n        this.type = Glide.LINEAR;  // either 'linear' or 'exponential'\n    }\n\n    /**\n     * This method is getter or setter for parameters.\n     * @param {string|object} key This argument is property name in the case of string type.\n     *     This argument is pair of property and value in the case of associative array.\n     * @param {number} value This argument is the value of designated property. If this argument is omitted, This method is getter.\n     * @return {number|Glide} This is returned as the value of designated property in the case of getter. Otherwise, this is returned for method chain.\n     */\n    param(key, value) {\n        if (Object.prototype.toString.call(arguments[0]) === '[object Object]') {\n            // Associative array\n            for (const k in arguments[0]) {\n                this.param(k, arguments[0][k]);\n            }\n        } else {\n            const k = String(key).replace(/-/g, '').toLowerCase();\n\n            let v = null;\n\n            switch (k) {\n                case 'time':\n                    if (value === undefined) {\n                        return this.time;\n                    }\n\n                    v = parseFloat(value);\n\n                    if (v >= 0) {\n                        this.time = v;\n                    }\n\n                    break;\n                case 'type':\n                    if (value === undefined) {\n                        return this.type;\n                    }\n\n                    v = String(value).toLowerCase();\n\n                    if ((v === Glide.LINEAR) || (v === Glide.EXPONENTIAL)) {\n                        this.type = v;\n                    }\n\n                    break;\n                default:\n                    break;\n            }\n        }\n\n        return this;\n    }\n\n    /**\n     * This method sets frequencies for Glide.\n     * @param {number} frequency This argument is the frequency at which glide ends.\n     * @return {Glide} This is returned for method chain.\n     */\n    ready(frequency) {\n        this.frequencies.end = frequency;\n\n        const diff = (this.frequencies.start === -1) ? 0 : (this.frequencies.end - this.frequencies.start);\n\n        if ((this.frequencies.start === -1) || (this.time === 0) || (diff === 0)) {\n            // The 1st sound or Glide OFF or The same sound\n            this.frequencies.start = this.frequencies.end;\n        }\n\n        return this;\n    }\n\n    /**\n     * This method starts Glide.\n     * @param {OscillatorNode} oscillator This argument is the instance of `OscillatorNode`.\n     * @param {number} startTime This argument is the start time of Glide.\n     * @return {Glide} This is returned for method chain.\n     */\n    start(oscillator, startTime) {\n        let s = parseFloat(startTime);\n\n        if (isNaN(s) || (s < this.context.currentTime)) {\n            s = this.context.currentTime;\n        }\n\n        const t0 = s;\n        const t1 = t0 + this.time;\n\n        // Start Glide\n        oscillator.frequency.cancelScheduledValues(t0);\n        oscillator.frequency.setValueAtTime(this.frequencies.start, t0);\n        oscillator.frequency[`${this.type}RampToValueAtTime`](this.frequencies.end, t1);\n\n        return this;\n    }\n\n    /**\n     * This method stops Glide. Moreover, This method prepares for next Glide.\n     * @return {Glide} This is returned for method chain.\n     */\n    stop() {\n        // Stop Glide or on the way of Glide\n        this.frequencies.start = this.frequencies.end;\n\n        return this;\n    }\n\n    /** @override */\n    toString() {\n        return '[OscillatorModule Glide]';\n    }\n}\n","'use strict';\n\nimport { SoundModule } from '../SoundModule';\nimport { Oscillator } from './Oscillator';\nimport { Glide } from './Glide';\n\n/**\n * This subclass defines properties for creating sound.\n * Actually, properties for creating sound is defined in private class (`Oscillator`).\n * Therefore, this class manages these private classes for creating sound.\n * @constructor\n * @extends {SoundModule}\n */\nexport class OscillatorModule extends SoundModule {\n    /**\n     * @param {AudioContext} context This argument is in order to use the interfaces of Web Audio API.\n     * @param {number} bufferSize This argument is buffer size for `ScriptProcessorNode`.\n     */\n    constructor(context, bufferSize) {\n        super(context, bufferSize);\n\n        /** @type {Array.<Oscillator>} */\n        this.sources = [];\n\n        // for scheduling\n        this.times = {\n            'start' : 0,\n            'stop'  : 0\n        };\n\n        // This flag determines whether sound wave is drawn\n        this.isAnalyser = false;\n\n        this.glide = new Glide(context);\n    }\n\n    /**\n     * This method creates the instances of `Oscillator`.\n     * @param {Array.<boolean>|boolean} states This argument is initial state in the instance of `Oscillator`.\n     * @return {OscillatorModule} This is returned for method chain.\n     * @override\n     */\n    setup(states) {\n        // Clear\n        this.sources.length = 0;\n\n        if (!Array.isArray(states)) {\n            states = [states];\n        }\n\n        for (let i = 0, len = states.length; i < len; i++) {\n            this.sources[i] = new Oscillator(this.context, Boolean(states[i]));\n            this.envelopegenerator.setGenerator(i);\n        }\n\n        return this;\n    }\n\n    /**\n     * This method is getter or setter for parameters.\n     * @param {string|object} key This argument is property name in the case of string type.\n     *     This argument is pair of property and value in the case of associative array.\n     * @param {number} value This argument is the value of designated property. If this argument is omitted, This method is getter.\n     * @return {number|OscillatorModule} This is returned as the value of designated property in the case of getter. Otherwise, this is returned for method chain.\n     * @override\n     */\n    param(key, value) {\n        if (Object.prototype.toString.call(arguments[0]) === '[object Object]') {\n            // Associative array\n            for (const k in arguments[0]) {\n                this.param(k, arguments[0][k]);\n            }\n        } else {\n            const k = String(key).replace(/-/g, '').toLowerCase();\n\n            const r = super.param(k, value);\n\n            return (r === undefined) ? this : r;\n        }\n    }\n\n    /**\n     * This method schedules the time of start and stop.\n     * @param {number} startTime This argument is the start time. The default value is 0.\n     * @param {number} stopTime This argument is the stop time. The default value is 0.\n     * @return {OscillatorModule} This is returned for method chain.\n     * @override\n     */\n    ready(startTime, stopTime) {\n        const st = parseFloat(startTime);\n        const sp = parseFloat(stopTime);\n\n        this.times.start = (st >=  0) ? st : 0;\n        this.times.stop  = (sp >= st) ? sp : 0;\n\n        this.envelopegenerator.clear(true);\n\n        return this;\n    }\n\n    /**\n     * This method starts some sounds that are active at the same time.\n     * @param {Array.<number>}|number} frequencies This argument each oscillator frequency. The default value is 0 Hz.\n     * @param {Array.<Effector>} connects This argument is the array for changing the default connection.\n     * @param {function} processCallback This argument is in order to change `onaudioprocess` event handler in the instance of `ScriptProcessorNode`.\n     * @return {OscillatorModule} This is returned for method chain.\n     * @override\n     */\n    start(frequencies, connects, processCallback) {\n        const startTime = this.context.currentTime + this.times.start;\n\n        // Validate the 1st argument\n        if (!Array.isArray(frequencies)) {\n            frequencies = [frequencies];\n        }\n\n        for (let i = 0, len = frequencies.length; i < len; i++) {\n            const f = parseFloat(frequencies[i]);\n            frequencies[i] = (f >= 0) ? f : 0;\n        }\n\n        // Clear previous\n        this.envelopegenerator.clear(true);\n        this.processor.disconnect(0);\n        this.processor.onaudioprocess = null;\n\n        // ScriptProcessorNode (Mix oscillators) -> ... -> AudioDestinationNode (Output)\n        this.connect(this.processor, connects);\n\n        for (let i = 0, len = frequencies.length; i < len; i++) {\n            if (i >= this.sources.length) {\n                break;\n            }\n\n            const oscillator = this.sources[i];\n            const frequency  = frequencies[i];\n\n            // GainNode (Volume) -> ScriptProcessorNode (Mix oscillators)\n            oscillator.ready(this.processor);\n\n            // OscillatorNode (Input) -> GainNode (Envelope Generator) -> GainNode (Volume)\n            this.envelopegenerator.ready(i, oscillator.source, oscillator.volume);\n\n            this.glide.ready(frequency).start(oscillator.source, startTime);\n\n            oscillator.start(startTime);\n        }\n\n        // Attack -> Decay -> Sustain\n        this.envelopegenerator.start(startTime);\n\n        this.on(startTime);\n\n        if (!this.isAnalyser) {\n            this.analyser.start('time');\n            this.analyser.start('fft');\n            this.isAnalyser = true;\n        }\n\n        if (Object.prototype.toString.call(processCallback) === '[object Function]') {\n            this.processor.onaudioprocess = processCallback;\n        } else {\n            this.processor.onaudioprocess = event => {\n                const inputLs  = event.inputBuffer.getChannelData(0);\n                const inputRs  = event.inputBuffer.getChannelData(1);\n                const outputLs = event.outputBuffer.getChannelData(0);\n                const outputRs = event.outputBuffer.getChannelData(1);\n\n                // Stop ?\n                if (this.envelopegenerator.isStop()) {\n                    // Stop\n                    const stopTime = this.context.currentTime;\n\n                    for (const source of this.sources) {\n                        source.stop(stopTime);\n                    }\n\n                    this.off(stopTime);\n\n                    this.analyser.stop('time');\n                    this.analyser.stop('fft');\n                    this.isAnalyser = false;\n\n                    // Stop `onaudioprocess` event\n                    this.processor.disconnect(0);\n                    this.processor.onaudioprocess = null;\n                } else {\n                    outputLs.set(inputLs);\n                    outputRs.set(inputRs);\n                }\n            };\n        }\n\n        return this;\n    }\n\n    /**\n     * This method stops active sounds.\n     * @return {OscillatorModule} This is returned for method chain.\n     * @override\n     */\n    stop() {\n        const stopTime = this.context.currentTime + this.times.stop;\n\n        // Attack or Decay or Sustain -> Release\n        this.envelopegenerator.stop(stopTime);\n\n        this.glide.stop();\n        this.filter.stop(stopTime);\n\n        return this;\n    }\n\n    /**\n     * This method gets the instance of `Oscillator` that is used in `OscillatorModule`.\n     * @param {number} index This argument is required in the case of designating `Oscillator`.\n     * @return {Array.<Oscillator>|Oscillator}\n     * @override\n     */\n    get(index) {\n        const i = parseInt(index, 10);\n\n        return ((i >= 0) && (i < this.sources.length)) ? this.sources[i] : this.sources;\n    }\n\n    /**\n     * This method returns the number of oscillators.\n     * @return {number} This is returned as the number of oscillators.\n     */\n    length() {\n        return this.sources.length;\n    }\n\n    /** @override */\n    params() {\n        const params = super.params();\n\n        params.oscillator = {\n            'glide' : {\n                'type' : this.glide.param('type'),\n                'time' : this.glide.param('time')\n            }\n        };\n\n        for (let i = 0, len = this.sources.length; i < len; i++) {\n            const source = this.sources[i];\n\n            params.oscillator[`oscillator${i}`] = {\n                'state'  : source.state(),\n                'gain'   : source.param('gain'),\n                'type'   : source.param('type'),\n                'octave' : source.param('octave'),\n                'fine'   : source.param('fine')\n            };\n        }\n\n        return params;\n    }\n\n    /** @override */\n    toString() {\n        return '[OscillatorModule]';\n    }\n}\n","'use strict';\n\nimport { SoundModule } from '../SoundModule';\n\n/**\n * This subclass defines properties for playing the one-shot audio.\n * @constructor\n * @extends {SoundModule}\n */\nexport class OneshotModule extends SoundModule {\n    static ERROR_AJAX         = 'error';\n    static ERROR_AJAX_TIMEOUT = 'timeout';\n    static ERROR_DECODE       = 'decode';\n\n    /**\n     * @param {AudioContext} context This argument is in order to use the interfaces of Web Audio API.\n     * @param {number} bufferSize This argument is buffer size for `ScriptProcessorNode`.\n     */\n    constructor(context, bufferSize) {\n        super(context, bufferSize);\n\n        this.sources   = [];  /** @type {Array.<AudioBufferSourceNode>} */\n        this.resources = [];  /** @type {Array.<string>} */\n        this.buffers   = [];  /** @type {Array.<AudioBuffer>} */\n        this.volumes   = [];  /** @type {Array.<GainNode>} */\n        this.isStops   = [];  /** @type {Array.<boolean>} in order to not call in duplicate `start` or `stop` method in the instance of `AudioBufferSourceNode` */\n\n        // for audio sources\n        this.settings = [];  /** @type {Array.<object>} */\n\n        // for scheduling\n        this.times = {\n            'start' : 0,\n            'stop'  : 0\n        };\n\n        this.transpose = 1.0;\n\n        this.isStop = true;\n\n        // This flag determines whether sound wave is drawn\n        this.isAnalyser = false;\n    }\n\n    /**\n     * This method creates the instances of `AudioBuffer` by Ajax.\n     * @param {Array.<string>|Array.<AudioBuffer>} resources This argument is either URLs or the instances of `AudioBuffer` for audio resources.\n     * @param {Array.<object>} settings This argument is the properties of each audio sources.\n     * @param {number} timeout This argument is timeout of Ajax. The default value is 60000 msec (1 minutes).\n     * @param {function} successCallback This argument is invoked as next process when reading file is successful.\n     * @param {function} errorCallback This argument is invoked when error occurred.\n     * @param {function} progressCallback This argument is invoked during receiving audio data.\n     * @return {OneshotModule} This is returned for method chain.\n     * @override\n     */\n    setup(resources, settings, timeout, successCallback, errorCallback, progressCallback) {\n        // The argument is associative array ?\n        if (Object.prototype.toString.call(arguments[0]) === '[object Object]') {\n            const properties = arguments[0];\n\n            if ('resources' in properties) {\n                resources = properties.resources;\n            }\n\n            if ('settings' in properties) {\n                settings = properties.settings;\n            }\n\n            if ('timeout' in properties) {\n                timeout = properties.timeout;\n            }\n\n            if ('success' in properties) {\n                successCallback = properties.success;\n            }\n\n            if ('error' in properties) {\n                errorCallback = properties.error;\n            }\n\n            if ('progress' in properties) {\n                progressCallback = properties.progress;\n            }\n        }\n\n        if (!Array.isArray(resources)) {\n            resources = [resources];\n        }\n\n        this.resources = resources;\n\n        if (!Array.isArray(settings)) {\n            settings = [settings];\n        }\n\n        this.buffers.length = resources.length;\n\n        for (let i = 0, len = settings.length; i < len; i++) {\n            if ('buffer' in settings[i]) {\n                const buffer = parseInt(settings[i].buffer, 10);\n\n                if ((buffer >= 0) && (buffer < this.buffers.length)) {\n                    settings[i].buffer = buffer;\n                } else {\n                    return this;\n                }\n            } else {\n                return this;\n            }\n\n            settings[i].rate   = (('rate' in settings[i]) && (settings[i].rate >= 0)) ? parseFloat(settings[i].rate) : 1;\n            settings[i].loop   = ('loop' in settings[i]) ? Boolean(settings[i].loop) : false;\n            settings[i].start  = (('start' in settings[i]) && (settings[i].start >= 0)) ? parseFloat(settings[i].start) : 0;\n            settings[i].end    = (('end' in settings[i]) && (settings[i].end >= 0)) ? parseFloat(settings[i].end) : 0;\n            settings[i].volume = (('volume' in settings[i]) && (settings[i].volume >= 0) && (settings[i].volume <= 1)) ? parseFloat(settings[i].volume) : 1;\n\n            this.isStops[i] = true;\n            this.volumes[i] = this.context.createGain();\n            this.envelopegenerator.setGenerator(i);\n        }\n\n        this.settings = settings;\n\n        // If the error is at least 1, this method aborts the all of connections.\n        // Therefore, this flag are shared with the all instances of `XMLHttpRequest`.\n        let isError = false;\n\n        const t = parseInt(timeout, 10);\n\n        // Get `ArrayBuffer` by Ajax -> Create the instances of `AudioBuffer`\n        const load = (url, index) => {\n            const xhr = new XMLHttpRequest();\n\n            xhr.timeout = (t > 0) ? t : 60000;\n\n            xhr.ontimeout = error => {\n                if (!isError && (Object.prototype.toString.call(errorCallback) === '[object Function]')) {\n                    errorCallback(error, OneshotModule.ERROR_AJAX_TIMEOUT);\n                }\n\n                isError = true;\n            };\n\n            xhr.onprogress = event => {\n                if (isError) {\n                    xhr.abort();\n                } else if (Object.prototype.toString.call(progressCallback) === '[object Function]') {\n                    progressCallback(event);\n                }\n            };\n\n            xhr.onerror = event => {\n                if (!isError && (Object.prototype.toString.call(errorCallback) === '[object Function]')) {\n                    errorCallback(event, OneshotModule.ERROR_AJAX);\n                }\n\n                isError = true;\n            };\n\n            // Success\n            xhr.onload = event => {\n                if (xhr.status === 200) {\n                    const arrayBuffer = xhr.response;\n\n                    if (!(arrayBuffer instanceof ArrayBuffer)) {\n                        return;\n                    }\n\n                    const decodeSuccessCallback = audioBuffer => {\n                        this.buffers[index] = audioBuffer;\n\n                        // The creating the instances of `AudioBuffer` has completed ?\n                        for (const buffer of this.buffers) {\n                            if (buffer === undefined) {\n                                return;\n                            }\n                        }\n\n                        if (Object.prototype.toString.call(successCallback) === '[object Function]') {\n                            successCallback(event, this.buffers);\n                        }\n                    };\n\n                    const decodeErrorCallback = error => {\n                        if (Object.prototype.toString.call(errorCallback) === '[object Function]') {\n                            errorCallback(error, OneshotModule.ERROR_DECODE);\n                        }\n                    };\n\n                    this.context.decodeAudioData(arrayBuffer, decodeSuccessCallback, decodeErrorCallback);\n                }\n            };\n\n            xhr.open('GET', url, true);\n            xhr.responseType = 'arraybuffer';  // XMLHttpRequest Level 2\n            xhr.send(null);\n        };\n\n        for (let i = 0, len = this.resources.length; i < len; i++) {\n            if (typeof this.resources[i] === 'string') {\n                // Get the instances of `AudioBuffer` from the designated URLs.\n                load(this.resources[i], i);\n            } else if (this.resources[i] instanceof AudioBuffer) {\n                // Get the instances of `AudioBuffer` directly\n                this.buffers[i] = this.resources[i];\n            }\n        }\n\n        return this;\n    }\n\n    /**\n     * This method is getter or setter for parameters.\n     * @param {string|object} key This argument is property name in the case of string type.\n     *     This argument is pair of property and value in the case of associative array.\n     * @param {number} value This argument is the value of designated property. If this argument is omitted, This method is getter.\n     * @return {number|OneshotModule} This is returned as the value of designated property in the case of getter. Otherwise, this is returned for method chain.\n     * @override\n     */\n    param(key, value) {\n        if (Object.prototype.toString.call(arguments[0]) === '[object Object]') {\n            // Associative array\n            for (const k in arguments[0]) {\n                this.param(k, arguments[0][k]);\n            }\n        } else {\n            const k = String(key).replace(/-/g, '').toLowerCase();\n\n            const r = super.param(k, value);\n\n            if (r !== undefined) {\n                return r;\n            }\n\n            let v = null;\n\n            switch (k) {\n                case 'transpose':\n                    if (value === undefined) {\n                        return this.transpose;\n                    }\n\n                    v = parseFloat(value);\n\n                    if (v > 0) {\n                        this.transpose = v;\n                    }\n\n                    break;\n                default:\n                    break;\n            }\n        }\n\n        return this;\n    }\n\n    /**\n     * This method schedules the time of start and stop.\n     * @param {number} startTime This argument is the start time. The default value is 0.\n     * @param {number} stopTime This argument is the stop time. The default value is 0.\n     * @return {OneshotModule} This is returned for method chain.\n     * @override\n     */\n    ready(startTime, stopTime) {\n        const st = parseFloat(startTime);\n        const sp = parseFloat(stopTime);\n\n        this.times.start = (st >=  0) ? st : 0;\n        this.times.stop  = (sp >= st) ? sp : 0;\n\n        this.envelopegenerator.clear(false);\n\n        return this;\n    }\n\n    /**\n     * This method starts one-shot audio with the designated playback rate and volume.\n     * @param {number} index This argument is in order to select the instance of `AudioBufferSourceNode`.\n     * @param {Array.<Effector>} connects This argument is the array for changing the default connection.\n     * @param {function} processCallback This argument is in order to change `onaudioprocess` event handler in the instance of `ScriptProcessorNode`.\n     * @return {OneshotModule} This is returned for method chain.\n     * @override\n     */\n    start(index, connects, processCallback) {\n        const selectedIndex = parseInt(index, 10);\n\n        if (isNaN(selectedIndex) || (selectedIndex < 0) || (selectedIndex >= this.settings.length)) {\n            return this;\n        }\n\n        const bufferIndex  = this.settings[selectedIndex].buffer;\n        const playbackRate = this.settings[selectedIndex].rate;\n        const loop         = this.settings[selectedIndex].loop;\n        const loopStart    = this.settings[selectedIndex].start;\n        const loopEnd      = this.settings[selectedIndex].end;\n        const volume       = this.settings[selectedIndex].volume;\n\n        if (!(this.buffers[bufferIndex] instanceof AudioBuffer)) {\n            // `setup` method has not been invoked\n            return this;\n        }\n\n        // the instance of `AudioBufferSourceNode` already exists ?\n        if (this.sources[selectedIndex] instanceof AudioBufferSourceNode) {\n            this.sources[selectedIndex].stop(this.context.currentTime);\n            this.sources[selectedIndex].disconnect(0);\n            this.sources[selectedIndex] = null;\n        }\n\n        const source = this.context.createBufferSource();\n\n        // for legacy browsers\n        source.start = source.start || source.noteGrainOn;\n        source.stop  = source.stop  || source.noteOff;\n\n        source.buffer = this.buffers[bufferIndex];\n\n        // Set properties\n        source.playbackRate.value = playbackRate * this.transpose;\n        source.loop               = loop;\n        source.loopStart          = loopStart;\n        source.loopEnd            = loopEnd;\n\n        this.volumes[selectedIndex].gain.value = volume;\n\n        this.envelopegenerator.clear(false);\n\n        // AudioBufferSourceNode (Input) -> GainNode (Envelope Generator) -> GainNode (Volume) -> ScriptProcessorNode -> ... -> AudioDestinationNode (Output)\n        this.envelopegenerator.ready(selectedIndex, source, this.volumes[selectedIndex]);\n        this.volumes[selectedIndex].connect(this.processor);\n        this.connect(this.processor, connects);\n\n        const startTime = this.context.currentTime + this.times.start;\n\n        if (source.loop) {\n            source.start(startTime, (startTime + source.loopStart), (source.loopEnd - startTime));\n        } else {\n            source.start(startTime);\n        }\n\n        this.sources[selectedIndex] = source;\n\n        // Attack -> Decay -> Sustain\n        this.envelopegenerator.start(startTime);\n\n        this.on(startTime);\n\n        if (!this.isAnalyser) {\n            this.analyser.start('time');\n            this.analyser.start('fft');\n            this.isAnalyser = true;\n        }\n\n        this.isStops[selectedIndex] = false;\n\n        // in the case of scheduling stop time\n        if (this.times.stop > 0) {\n            window.setTimeout(() => {\n                this.stop(selectedIndex);\n            }, (this.times.stop * 1000));\n        }\n\n        // Call on stopping audio\n        source.onended = () => {\n            this.isStops[selectedIndex] = true;\n        };\n\n        if (Object.prototype.toString.call(processCallback) === '[object Function]') {\n            this.processor.onaudioprocess = processCallback;\n        } else {\n            this.processor.onaudioprocess = event => {\n                this.isStop = this.isStops.every(element => element);\n\n                if (this.isStop) {\n                    // Stop\n\n                    this.off(this.context.currentTime);\n\n                    this.envelopegenerator.clear(false);\n\n                    this.analyser.stop('time');\n                    this.analyser.stop('fft');\n                    this.isAnalyser = false;\n\n                    // Stop `onaudioprocess` event\n                    this.processor.disconnect(0);\n                    this.processor.onaudioprocess = null;\n                } else {\n                    const inputLs  = event.inputBuffer.getChannelData(0);\n                    const inputRs  = event.inputBuffer.getChannelData(1);\n                    const outputLs = event.outputBuffer.getChannelData(0);\n                    const outputRs = event.outputBuffer.getChannelData(1);\n\n                    outputLs.set(inputLs);\n                    outputRs.set(inputRs);\n                }\n            };\n        }\n\n        return this;\n    }\n\n    /**\n     * This method stops the designated one-shot audio.\n     * @param {number} index This argument is in order to select the instance of `AudioBufferSourceNode`.\n     * @return {OneshotModule} This is returned for method chain.\n     * @override\n     */\n    stop(index) {\n        const selectedIndex = parseInt(index, 10);\n\n        if (isNaN(selectedIndex) || (selectedIndex < 0) || (selectedIndex >= this.settings.length)) {\n            return this;\n        }\n\n        const bufferIndex = this.settings[selectedIndex].buffer;\n\n        if (!((this.buffers[bufferIndex] instanceof AudioBuffer) && (this.sources[selectedIndex] instanceof AudioBufferSourceNode))) {\n            return this;\n        }\n\n        const stopTime = this.context.currentTime + this.times.stop;\n\n        // Attack or Decay or Sustain -> Release\n        this.envelopegenerator.stop(stopTime);\n\n        this.filter.stop(stopTime);\n\n        return this;\n    }\n\n    /**\n     * This method gets the instance of `AudioBuffer` that is used in `OneshotModule`.\n     * @param {number} index This argument is required in the case of designating `AudioBuffer`.\n     * @return {Array.<AudioBuffer>|AudioBuffer}\n     * @override\n     */\n    get(index) {\n        const i = parseInt(index, 10);\n\n        return ((i >= 0) && (i < this.buffers.length)) ? this.buffers[i] : this.buffers;\n    }\n\n    /** @override */\n    params() {\n        const params = super.params();\n\n        params.oneshot = {\n            'transpose' : this.transpose\n        };\n\n        return params;\n    }\n\n    /**\n     * This method resets settings.\n     * @param {number} index This argument is in order to select target setting.\n     * @param {string} key This argument is in order to select parameter.\n     * @param {number|boolean} value This argument is new value.\n     * @return {OneshotModule} This is returned for method chain.\n     */\n    reset(index, key, value) {\n        const selectedIndex = parseInt(index, 10);\n\n        if (String(key).toLowerCase() in this.settings[selectedIndex]) {\n            this.settings[selectedIndex][key.toLowerCase()] = value;\n        }\n\n        return this;\n    }\n\n    /** @override */\n    toString() {\n        return '[OneshotModule]';\n    }\n}\n","'use strict';\n\nimport { SoundModule }  from '../SoundModule';\n\nexport class NoiseModule extends SoundModule {\n    static WHITE_NOISE    = 'whitenoise';\n    static PINK_NOISE     = 'pinknoise';\n    static BROWNIAN_NOISE = 'browniannoise';\n\n    /**\n     * @param {AudioContext} context This argument is in order to use the interfaces of Web Audio API.\n     * @param {number} bufferSize This argument is buffer size for `ScriptProcessorNode`.\n     */\n    constructor(context, bufferSize) {\n        super(context, bufferSize);\n\n        this.type = NoiseModule.WHITE_NOISE;\n\n        this.envelopegenerator.setGenerator(0);\n\n        this.isAnalyser = false;\n    }\n\n    /**\n     * This method is getter or setter for parameters.\n     * @param {string|object} key This argument is property name in the case of string type.\n     *     This argument is pair of property and value in the case of associative array.\n     * @param {number|string} value This argument is the value of designated property. If this argument is omitted, This method is getter.\n     * @return {number|string|NoiseModule} This is returned as the value of designated property in the case of getter. Otherwise, this is returned for method chain.\n     * @override\n     */\n    param(key, value) {\n        if (Object.prototype.toString.call(arguments[0]) === '[object Object]') {\n            // Associative array\n            for (const k in arguments[0]) {\n                this.param(k, arguments[0][k]);\n            }\n        } else {\n            const k = String(key).replace(/-/g, '').toLowerCase();\n\n            const r = super.param(k, value);\n\n            if (r !== undefined) {\n                return r;\n            }\n\n            let v = '';\n\n            switch (k) {\n                case 'type':\n                    if (value === undefined) {\n                        return this.type;\n                    }\n\n                    v = String(value).toLowerCase();\n\n                    if ((v === NoiseModule.WHITE_NOISE) || (v === NoiseModule.PINK_NOISE) || (v === NoiseModule.BROWNIAN_NOISE)) {\n                        this.type = v;\n                    }\n\n                    break;\n                default:\n                    break;\n            }\n        }\n\n        return this;\n    }\n\n    /** @override */\n    start(connects) {\n        const startTime = this.context.currentTime;\n\n        // Clear previous\n        this.envelopegenerator.clear(true);\n        this.processor.disconnect(0);\n        this.processor.onaudioprocess = null;\n\n        // GainNode (Envelope Generator) -> ... -> AudioDestinationNode (Output)\n        this.connect(this.envelopegenerator.getGenerator(0), connects);\n\n        // ScriptProcessorNode (Input) -> GainNode (Envelope Generator)\n        this.envelopegenerator.ready(0, this.processor);\n\n        this.envelopegenerator.start(startTime);\n\n        if (!this.isAnalyser) {\n            this.analyser.start('time');\n            this.analyser.start('fft');\n            this.isAnalyser = true;\n        }\n\n        this.on(startTime);\n\n        const bufferSize = this.processor.bufferSize;\n\n        let lastOut = 0;\n\n        this.processor.onaudioprocess = event => {\n            const outputLs = event.outputBuffer.getChannelData(0);\n            const outputRs = event.outputBuffer.getChannelData(1);\n\n            if (this.envelopegenerator.isStop()) {\n                this.processor.disconnect(0);\n                this.processor.onaudioprocess = null;\n\n                this.analyser.stop('time');\n                this.analyser.stop('fft');\n                this.isAnalyser = false;\n            } else {\n                switch (this.type) {\n                    case NoiseModule.WHITE_NOISE:\n                        for (let i = 0; i < bufferSize; i++) {\n                            outputLs[i] = 2 * (Math.random() - 0.5);\n                            outputRs[i] = 2 * (Math.random() - 0.5);\n                        }\n\n                        break;\n                    case NoiseModule.PINK_NOISE:\n                        // ref: https://noisehack.com/generate-noise-web-audio-api/\n                        let b0 = 0;\n                        let b1 = 0;\n                        let b2 = 0;\n                        let b3 = 0;\n                        let b4 = 0;\n                        let b5 = 0;\n                        let b6 = 0;\n\n                        for (let i = 0; i < bufferSize; i++) {\n                            const white = (Math.random() * 2) - 1;\n\n                            b0 = (0.99886 * b0) + (white * 0.0555179);\n                            b1 = (0.99332 * b1) + (white * 0.0750759);\n                            b2 = (0.96900 * b2) + (white * 0.1538520);\n                            b3 = (0.86650 * b3) + (white * 0.3104856);\n                            b4 = (0.55000 * b4) + (white * 0.5329522);\n                            b5 = (-0.7616 * b5) - (white * 0.0168980);\n\n                            outputLs[i] = b0 + b1 + b2 + b3 + b4 + b5 + b6 + (white * 0.5362);\n                            outputRs[i] = b0 + b1 + b2 + b3 + b4 + b5 + b6 + (white * 0.5362);\n\n                            outputLs[i] *= 0.11;\n                            outputRs[i] *= 0.11;\n\n                            b6 = white * 0.115926;\n                        }\n\n                        break;\n                    case NoiseModule.BROWNIAN_NOISE:\n                        // ref: https://noisehack.com/generate-noise-web-audio-api/\n                        for (let i = 0; i < bufferSize; i++) {\n                            const white = (Math.random() * 2) - 1;\n\n                            outputLs[i] = (lastOut + (0.02 * white)) / 1.02;\n                            outputRs[i] = (lastOut + (0.02 * white)) / 1.02;\n\n                            lastOut = (lastOut + (0.02 * white)) / 1.02;\n\n                            outputLs[i] *= 3.5;\n                            outputRs[i] *= 3.5;\n                        }\n\n                        break;\n                    default:\n                        break;\n                }\n            }\n        };\n\n        return this;\n    }\n\n    /** @override */\n    stop() {\n        const stopTime = this.context.currentTime;\n\n        this.envelopegenerator.stop(stopTime);\n        this.off(stopTime);\n\n        return this;\n    }\n\n    /** @override */\n    toString() {\n        return '[NoiseModule]';\n    }\n}\n","'use strict';\n\n/**\n * This private class defines properties for Vocal Canceler.\n * @constructor\n */\nexport class VocalCanceler {\n    constructor() {\n        this.depth = 0;\n    }\n\n    /**\n     * This method is getter or setter for parameters.\n     * @param {string|object} key This argument is property name in the case of string type.\n     *     This argument is pair of property and value in the case of associative array.\n     * @param {number} value This argument is the value of designated property. If this argument is omitted, This method is getter.\n     * @return {number|VocalCanceler} This is returned as the value of designated property in the case of getter. Otherwise, this is returned for method chain.\n     */\n    param(key, value) {\n        if (Object.prototype.toString.call(arguments[0]) === '[object Object]') {\n            // Associative array\n            for (const k in arguments[0]) {\n                this.param(k, arguments[0][k]);\n            }\n        } else {\n            const k = String(key).replace(/-/g, '').toLowerCase();\n\n            let v   = null;\n            let min = null;\n            let max = null;\n\n            switch (k) {\n                case 'depth':\n                    if (value === undefined) {\n                        return this.depth;\n                    }\n\n                    v   = parseFloat(value);\n                    min = 0;\n                    max = 1;\n\n                    if ((v >= min) && (v <= max)) {\n                        this.depth = v;\n                    }\n\n                    break;\n                default:\n                    break;\n            }\n        }\n\n        return this;\n    }\n\n    /**\n     * This method removes vocal part in the played audio.\n     * @param {number} dataL This argument is gain level for Left channel.\n     * @param {number} dataR This argument is gain level for Right channel.\n     * @return {number} This is returned as audio data except vocal part.\n     */\n    start(dataL, dataR) {\n        return dataL - (this.depth * dataR);\n    }\n\n    /** @override */\n    toString() {\n        return '[AudioModule VocalCanceler]';\n    }\n}\n","'use strict';\n\nimport { SoundModule } from '../SoundModule';\nimport { VocalCanceler } from './VocalCanceler';\n\n/**\n * This subclass defines properties for playing the single audio.\n * This class creates audio player that has higher features than `HTMLAudioElment`.\n * But, this class is disadvantage to play the many one shot audios.\n * In the case of that, developer should use `OneshotModule`.\n * @constructor\n * @extends {SoundModule}\n */\nexport class AudioModule extends SoundModule {\n    /**\n     * @param {AudioContext} context This argument is in order to use the interfaces of Web Audio API.\n     * @param {number} bufferSize This argument is buffer size for `ScriptProcessorNode`.\n     */\n    constructor(context, bufferSize) {\n        super(context, bufferSize);\n\n        this.source = context.createBufferSource();  // for the instance of `AudioBufferSourceNode`\n        this.buffer = null;                          // for the instance of `AudioBuffer`\n\n        this.currentTime = 0;\n\n        this.paused = true;\n\n        this.callbacks = {\n            'decode' : () => {},\n            'ready'  : () => {},\n            'start'  : () => {},\n            'stop'   : () => {},\n            'update' : () => {},\n            'ended'  : () => {},\n            'error'  : () => {}\n        };\n\n        this.vocalcanceler = new VocalCanceler();\n    }\n\n    /**\n     * This method sets callback functions.\n     * @param {string|object} key This argument is property name.\n     *     This argument is pair of property and value in the case of associative array.\n     * @param {function} value This argument is callback function.\n     * @return {AudioModule} This is returned for method chain.\n     * @override\n     */\n    setup(key, value) {\n        if (Object.prototype.toString.call(arguments[0]) === '[object Object]') {\n            // Associative array\n            for (const k in arguments[0]) {\n                this.setup(k, arguments[0][k]);\n            }\n        } else {\n            const k = String(key).replace(/-/g, '').toLowerCase();\n\n            if (k in this.callbacks) {\n                if (Object.prototype.toString.call(value) === '[object Function]') {\n                    this.callbacks[k] = value;\n                }\n            }\n        }\n\n        this.envelopegenerator.setGenerator(0);\n        this.envelopegenerator.param({\n            'attack'  : 0,\n            'decay'   : 0.01,\n            'sustain' : 1,\n            'release' : 0.01\n        });\n\n        return this;\n    }\n\n    /**\n     * This method is getter or setter for parameters.\n     * @param {string|object} key This argument is property name in the case of string type.\n     *     This argument is pair of property and value in the case of associative array.\n     * @param {number|boolean} value This argument is the value of designated property. If this argument is omitted, This method is getter.\n     * @return {number|AudioModule} This is returned as the value of designated property in the case of getter. Otherwise, this is returned for method chain.\n     * @override\n     */\n    param(key, value) {\n        if (Object.prototype.toString.call(arguments[0]) === '[object Object]') {\n            // Associative array\n            for (const k in arguments[0]) {\n                this.param(k, arguments[0][k]);\n            }\n        } else {\n            const k = String(key).replace(/-/g, '').toLowerCase();\n\n            const r = super.param(k, value);\n\n            if (r !== undefined) {\n                return r;\n            }\n\n            let v   = 0;\n            let min = 0;\n            let max = 0;\n\n            switch (k) {\n                case 'playbackrate':\n                    if (value === undefined) {\n                        return this.source.playbackRate.value;\n                    }\n\n                    v   = parseFloat(value);\n                    min = 0;\n                    max = 1024;\n\n                    if ((v >= min) && (v <= max)) {\n                        this.source.playbackRate.value = v;\n\n                        const startTime   = this.context.currentTime;\n                        const currentTime = this.param('currentTime');\n                        const duration    = this.param('duration');\n\n                        this.envelopegenerator.start(startTime);\n                        this.envelopegenerator.stop((startTime + ((duration - currentTime) / v)), true);\n                    }\n\n                    break;\n                case 'loop'   :\n                case 'looping':\n                    if (value === undefined) {\n                        return this.source.loop;\n                    }\n\n                    this.source.loop = Boolean(value);\n\n                    break;\n                case 'currenttime':\n                    if (value === undefined) {\n                        return this.currentTime;\n                    }\n\n                    if (this.buffer instanceof AudioBuffer) {\n                        v   = parseFloat(value);\n                        max = this.buffer.duration;\n                        min = 0;\n\n                        if ((v >= min) && (v <= max)) {\n                            if (this.paused) {\n                                this.currentTime = v;\n                            } else {\n                                this.stop();\n                                this.start(v);\n                            }\n                        }\n                    } else {\n                        this.currentTime = 0;\n                    }\n\n                    break;\n                case 'duration':\n                    return (this.buffer instanceof AudioBuffer) ? this.buffer.duration : 0;  // Getter only\n                case 'samplerate':\n                    return (this.buffer instanceof AudioBuffer) ? this.buffer.sampleRate : this.sampleRate;  // Getter only\n                case 'channels':\n                    return (this.buffer instanceof AudioBuffer) ? this.buffer.numberOfChannels : 0;  // Getter only\n                default:\n                    break;\n            }\n        }\n\n        return this;\n    }\n\n    /**\n     * This method creates the instance of `AudioBuffer` from `ArrayBuffer`.\n     * @param {ArrayBuffer} arrayBuffer This argument is the instance of `ArrayBuffer`.\n     * @return {AudioModule} This is returned for method chain.\n     * @override\n     */\n    ready(arrayBuffer) {\n        if (arrayBuffer instanceof ArrayBuffer) {\n            const successCallback = buffer => {\n                this.buffer = buffer;\n\n                this.analyser.start('timeOverviewL', buffer);\n                this.analyser.start('timeOverviewR', buffer);\n\n                this.callbacks.ready(buffer);\n            };\n\n            this.context.decodeAudioData(arrayBuffer, successCallback, this.callbacks.error);\n\n            this.callbacks.decode(arrayBuffer);\n        }\n\n        return this;\n    }\n\n    /**\n     * This method starts audio from the designated time.\n     * @param {number} startTime This argument is the time that audio is started at. The default value is 0.\n     * @param {number} endTime This argument is the time that audio is ended at. The default value is audio duration.\n     * @param {Array.<Effector>} connects This argument is the array for changing the default connection.\n     * @param {function} processCallback This argument is in order to change `onaudioprocess` event handler in the instance of `ScriptProcessorNode`.\n     * @return {AudioModule} This is returned for method chain.\n     * @override\n     */\n    start(startTime, endTime, connects, processCallback) {\n        if ((this.buffer instanceof AudioBuffer) && this.paused) {\n            // This value is `AudioContext#currentTime`\n            const currentTime = this.context.currentTime;\n\n            const start = parseFloat(startTime);\n            const end   = parseFloat(endTime);\n\n            if (end >= 0) {\n                this.currentTime = ((start >= 0) && (start <= end)) ? start : 0;\n            } else {\n                this.currentTime = ((start >= 0) && (start <= this.buffer.duration)) ? start : 0;\n            }\n\n            const playbackRate = this.source.playbackRate.value;\n            const loop         = this.source.loop;\n\n            this.source = this.context.createBufferSource();\n\n            // for legacy browsers\n            this.source.start = this.source.start || this.source.noteGrainOn;\n            this.source.stop  = this.source.stop  || this.source.noteOff;\n\n            this.source.buffer             = this.buffer;\n            this.source.playbackRate.value = playbackRate;\n            this.source.loop               = loop;\n            this.source.loopStart          = this.currentTime;\n            this.source.loopEnd            = (end >= 0) ? end : this.buffer.duration;\n\n            // AudioBufferSourceNode (Input) -> GainNode (Envelope Generator) -> ScriptProcessorNode -> ... -> AudioDestinationNode (Output)\n            this.envelopegenerator.ready(0, this.source, this.processor);\n            this.connect(this.processor, connects);\n\n            if (isNaN(start)) {\n                this.source.start(currentTime);\n            } else if (end >= 0) {\n                this.source.start(currentTime, this.currentTime, (end - start));\n            } else {\n                this.source.start(currentTime, this.currentTime, (this.buffer.duration - this.currentTime));\n            }\n\n            this.analyser.start('time');\n            this.analyser.start('fft');\n\n            this.paused = false;\n\n            this.envelopegenerator.start(currentTime);\n\n            if (end >= 0) {\n                this.envelopegenerator.stop((currentTime + ((end - start) / this.source.playbackRate.value)), true);\n            } else {\n                this.envelopegenerator.stop((currentTime + ((this.buffer.duration - start) / this.source.playbackRate.value)), true);\n            }\n\n            this.on(currentTime);\n\n            this.callbacks.start(this.source, this.currentTime);\n\n            const bufferSize = this.processor.bufferSize;\n\n            if (Object.prototype.toString.call(processCallback) === '[object Function]') {\n                this.processor.onaudioprocess = processCallback;\n            } else {\n                this.processor.onaudioprocess = event => {\n                    const inputLs  = event.inputBuffer.getChannelData(0);\n                    const inputRs  = event.inputBuffer.getChannelData(1);\n                    const outputLs = event.outputBuffer.getChannelData(0);\n                    const outputRs = event.outputBuffer.getChannelData(1);\n\n                    if (this.currentTime < Math.floor(this.source.loopEnd)) {\n                        for (let i = 0; i < bufferSize; i++) {\n                            outputLs[i] = this.vocalcanceler.start(inputLs[i], inputRs[i]);\n                            outputRs[i] = this.vocalcanceler.start(inputRs[i], inputLs[i]);\n\n                            this.currentTime += ((1 * this.source.playbackRate.value) / this.source.buffer.sampleRate);\n\n                            this.callbacks.update(this.source, this.currentTime);\n                        }\n\n                        this.analyser.timeOverviewL.update(this.currentTime);\n                        this.analyser.timeOverviewR.update(this.currentTime);\n                    } else {\n                        if (this.source.loop) {\n                            this.stop();\n\n                            if ((this.analyser.timeOverviewL.param('mode') === 'sprite') || (this.analyser.timeOverviewR.param('mode') === 'sprite')) {\n                                this.start(this.source.loopStart, this.source.loopEnd, connects, processCallback);\n                            } else {\n                                this.start(0, this.buffer.duration, connects, processCallback);\n                            }\n                        } else {\n                            this.end();\n                        }\n                    }\n                };\n            }\n        }\n\n        return this;\n    }\n\n    /**\n     * This method stops audio.\n     * @return {AudioModule} This is returned for method chain.\n     * @override\n     */\n    stop() {\n        if ((this.buffer instanceof AudioBuffer) && !this.paused) {\n            const stopTime = this.context.currentTime;\n\n            this.source.stop(stopTime);\n\n            this.off(stopTime);\n\n            this.analyser.stop('time');\n            this.analyser.stop('fft');\n\n            // Clear\n\n            // Stop `onaudioprocess` event\n            this.processor.disconnect(0);\n            this.processor.onaudioprocess = null;\n\n            this.paused = true;\n            this.callbacks.stop(this.source, this.currentTime);\n        }\n\n        return this;\n    }\n\n    /**\n     * This method gets the instance of `AudioBufferSourceNode`.\n     * @return {AudioBufferSourceNode}\n     * @override\n     */\n    get() {\n        return this.source;\n    }\n\n    /**\n     * This method starts or stops audio according to audio state.\n     * @param {number} startTime This argument is the time that audio is started at. The default value is 0.\n     * @param {number} endTime This argument is the time that audio is ended at. The default value is audio duration.\n     * @param {Array.<Effector>} connects This argument is the array for changing the default connection.\n     * @param {function} processCallback This argument is in order to change `onaudioprocess` event handler in the instance of `ScriptProcessorNode`.\n     * @return {AudioModule} This is returned for method chain.\n     */\n    toggle(startTime, endTime, connects, processCallback) {\n        if (this.paused) {\n            this.start(startTime, endTime, connects, processCallback);\n        } else {\n            this.stop();\n        }\n\n        return this;\n    }\n\n    /**\n     * This method rewinds audio.\n     * @return {AudioModule} This is returned for method chain.\n     */\n    end() {\n        this.stop();\n        this.currentTime = 0;\n        this.callbacks.ended(this.source, this.currentTime);\n\n        return this;\n    }\n\n    /**\n     * This method determines whether the instance of `AudioBuffer` exists.\n     * @return {boolean} If the instance of `AudioBuffer` already exists, this value is `true`. Otherwise, this value is `false`.\n     */\n    isBuffer() {\n        return this.buffer instanceof AudioBuffer;\n    }\n\n    /**\n     * This method determines whether the instance of `AudioBufferSourceNode` exists.\n     * @return {boolean} If the instance of `AudioBufferSourceNode` already exists, this value is `true`. Otherwise, this value is `false`.\n     */\n    isSource() {\n        return (this.source instanceof AudioBufferSourceNode) && (this.source.buffer instanceof AudioBuffer);\n    }\n\n    /**\n     * This method determines whether the audio is paused.\n     * @return {boolean} If the audio is paused, this value is `true`. Otherwise, this value is `false`.\n     */\n    isPaused() {\n        return this.paused;\n    }\n\n    /**\n     * This method is getter or setter for fade-in time.\n     * @param {number} time This argument is fade-in time. If this argument is omitted, This method is getter.\n     * @return {number|AudioModule} This is returned as fade-in time. Otherwise, this is returned for method chain.\n     */\n    fadeIn(time) {\n        if (time === undefined) {\n            return this.envelopegenerator.param('attack');\n        }\n\n        this.envelopegenerator.param('attack', time);\n\n        const startTime    = this.context.currentTime;\n        const currentTime  = this.param('currentTime');\n        const duration     = this.param('duration');\n        const playbackRate = this.param('playbackRate');\n\n        this.envelopegenerator.start(startTime);\n        this.envelopegenerator.stop((startTime + ((duration - currentTime) / playbackRate)), true);\n\n        return this;\n    }\n\n    /**\n     * This method is getter or setter for fade-out time.\n     * @param {number} time This argument is fade-out time. If this argument is omitted, This method is getter.\n     * @return {number|AudioModule} This is returned as fade-out time. Otherwise, this is returned for method chain.\n     */\n    fadeOut(time) {\n        if (time === undefined) {\n            return this.envelopegenerator.param('release');\n        }\n\n        this.envelopegenerator.param('release', time);\n\n        const startTime    = this.context.currentTime;\n        const currentTime  = this.param('currentTime');\n        const duration     = this.param('duration');\n        const playbackRate = this.param('playbackRate');\n\n        this.envelopegenerator.start(startTime);\n        this.envelopegenerator.stop((startTime + ((duration - currentTime) / playbackRate)), true);\n\n        return this;\n    }\n\n    /**\n     *  This method sprites audio.\n     *  @param {object} sprites This argument is the associative array that contains sprite times.\n     *  @return {object} This is returned as the associative array that contains sprited `AudioBuffer`.\n     */\n    sprite(sprites) {\n        if (!this.isBuffer()) {\n            return null;\n        }\n\n        if (Object.prototype.toString.call(sprites) !== '[object Object]') {\n            return null;\n        }\n\n        let dataLs = null;\n        let dataRs = null;\n\n        if (this.buffer.numberOfChannels > 0) {\n            dataLs = this.buffer.getChannelData(0);\n        }\n\n        if (this.buffer.numberOfChannels > 1) {\n            dataRs = this.buffer.getChannelData(1);\n        }\n\n        return Object.keys(sprites).reduce((audioBuffers, key) => {\n            const times = sprites[key];\n\n            if (!Array.isArray(times) || (times.length !== 2)) {\n                return;\n            }\n\n            const sampleRate = this.buffer.sampleRate;\n            const start      = parseInt((times[0] * sampleRate), 10);\n            const end        = parseInt((times[1] * sampleRate), 10);\n            const length     = end - start;\n\n            if (isNaN(length) || (length <= 0)) {\n                return null;\n            }\n\n            let spritedDataLs = null;\n            let spritedDataRs = null;\n            let buffer        = null;\n\n            switch (this.buffer.numberOfChannels) {\n                case 1:\n                    spritedDataLs = new Float32Array(length);\n\n                    for (let i = start; i < end; i++) {\n                        spritedDataLs[i - start] = dataLs[i];\n                    }\n\n                    buffer = this.context.createBuffer(1, length, sampleRate);\n\n                    buffer.copyToChannel(spritedDataLs, 0);\n\n                    audioBuffers[key] = buffer;\n\n                    return audioBuffers;\n                case 2:\n                    spritedDataLs = new Float32Array(length);\n                    spritedDataRs = new Float32Array(length);\n\n                    for (let i = start; i < end; i++) {\n                        spritedDataLs[i - start] = dataLs[i];\n                        spritedDataRs[i - start] = dataRs[i];\n                    }\n\n                    buffer = this.context.createBuffer(2, length, sampleRate);\n\n                    buffer.copyToChannel(spritedDataLs, 0);\n                    buffer.copyToChannel(spritedDataRs, 1);\n\n                    audioBuffers[key] = buffer;\n\n                    return audioBuffers;\n                default:\n                    return {};\n            }\n        }, {});\n    }\n\n    /** @override */\n    params() {\n        const params = super.params();\n\n        params.audio = {\n            'playbackrate'  : this.isSource() ? this.source.playbackRate.value : 1,\n            'vocalcanceler' : {\n                'depth' : this.vocalcanceler.param('depth')\n            }\n        };\n\n        return params;\n    }\n\n    /** @override */\n    toString() {\n        return '[AudioModule]';\n    }\n}\n","'use strict';\n\nimport { AudioModule }  from '../AudioModule';\n\n/**\n * This class defines properties for processing sound data from `HTMLMediaElement`.\n * Namely, this class creates audio player that has higher features from `HTMLMediaElement`.\n * But, this class is disadvantage to play the many one shot audios.\n * In the case of that, developer should use `OneshotModule`.\n * @constructor\n * @extends {AudioModule}\n */\nexport class MediaModule extends AudioModule {\n    static AUDIO = 'audio';\n    static VIDEO = 'video';\n\n    /**\n     * @param {AudioContext} context This argument is in order to use the interfaces of Web Audio API.\n     * @param {number} bufferSize This argument is buffer size for `ScriptProcessorNode`.\n     */\n    constructor(context, bufferSize) {\n        super(context, bufferSize);\n\n        this.source = null;  // for the instance of `MediaElementAudioSourceNode`\n        this.media  = null;  // for the instance of `HTMLMediaElement`\n        this.ext    = '';    // 'wav', 'ogg', 'mp3, 'webm', 'ogv', 'mp4' ...etc\n\n        // for Audio Streaming\n        this.mse      = null;  // for the instance of `MediaSource`\n        this.sb       = null;  // for the instance of `SourceBuffer`\n        this.file     = '';\n        this.mimeType = '';\n\n        this.playbackRate = 1;\n        this.controls     = false;\n        this.loop         = false;\n        this.muted        = false;\n        this.autoplay     = false;\n\n        // The keys are the event interfaces that are defined by `HTMLMediaElement` or `MediaSource` or `SourceBuffer`.\n        // For example, `loadstart`, `loadedmetadata`, `loadeddata`, `canplay`, `canplaythrough`, `timeupdate`, `ended`,\n        // `sourceopen`, `sourceended`, `sourceclose`, `updateend`, `error` ... etc\n        this.listeners = {};\n    }\n\n    /**\n     * This method gets `HTMLMediaElement` and selects media format. In addition, this method adds event listeners that are defined by `HTMLMediaElement`.\n     * @param {HTMLAudioElement|HTMLVideoElement} media This argument is either `HTMLAudioElement` or `HTMLVideoElement`.\n     * @param {Array.<string>|string} formats This argument is usable media format. For example, 'wav', 'ogg', 'webm', 'mp4' ...etc.\n     * @param {object} listeners This argument is event handlers that are defined by `HTMLMediaElement`.\n     * @param {boolean} autoplay This argument is in order to determine autoplay. The default value is `false`.\n     * @return {MediaModule} This is returned for method chain.\n     * @override\n     */\n    setup(media, formats, listeners, autoplay) {\n        this.envelopegenerator.setGenerator(0);\n        this.envelopegenerator.param({\n            'attack'  : 0,\n            'decay'   : 0.01,\n            'sustain' : 1,\n            'release' : 0.01\n        });\n\n        // The argument is associative array ?\n        if (Object.prototype.toString.call(arguments[0]) === '[object Object]') {\n            const properties = arguments[0];\n\n            if ('media' in properties) {\n                media = properties.media;\n            }\n\n            if ('formats' in properties) {\n                formats = properties.formats;\n            }\n\n            if ('listeners' in properties) {\n                listeners = properties.listeners;\n            }\n\n            if ('autoplay' in properties) {\n                autoplay = properties.autoplay;\n            }\n        }\n\n        let type = '';\n\n        if (media instanceof HTMLAudioElement) {\n            type = MediaModule.AUDIO;\n        } else if (media instanceof HTMLVideoElement) {\n            type = MediaModule.VIDEO;\n        } else {\n            return this;\n        }\n\n        this.media = media;\n\n        if (!Array.isArray(formats)) {\n            formats = [formats];\n        }\n\n        for (const format of formats) {\n            const f = `${type}/${String(format).toLowerCase()}`;\n\n            if (/^(?:maybe|probably)/.test(this.media.canPlayType(f))) {\n                this.ext = format;\n                break;\n            }\n        }\n\n        if (Object.prototype.toString.call(listeners) === '[object Object]') {\n            for (const k in listeners) {\n                this.listeners[k.toLowerCase()] = (Object.prototype.toString.call(listeners[k]) === '[object Function]') ? listeners[k] : () => {};\n            }\n        }\n\n        this.autoplay = Boolean(autoplay);\n\n        // in the case of autoplay, `loadstart` event not fire\n        if (this.autoplay && !(this.source instanceof MediaElementAudioSourceNode)) {\n            this.source = this.context.createMediaElementSource(this.media);\n        }\n\n        if (this.autoplay && this.media.src) {\n            this.context.resume()\n                .then(() => {\n                    this.start(this.media.currentTime);\n                })\n                .catch(() => {\n                    throw new Error('Autoplay is failed');\n                });\n        }\n\n        this.media.addEventListener('loadstart', event => {\n            // To create the instance of `MediaElementAudioSourceNode` again causes error to occur\n            if (!(this.source instanceof MediaElementAudioSourceNode)) {\n                this.source = this.context.createMediaElementSource(this.media);\n            }\n\n            if ('loadstart' in this.listeners) {\n                this.listeners.loadstart(event);\n            }\n        }, false);\n\n        this.media.addEventListener('ended', event => {\n            this.media.pause();\n\n            this.off(this.context.currentTime);\n\n            this.analyser.stop('time');\n            this.analyser.stop('fft');\n\n            // Stop `onaudioprocess` event\n            this.processor.disconnect(0);\n            this.processor.onaudioprocess = null;\n\n            if ('ended' in this.listeners) {\n                this.listeners.ended(event);\n            }\n        }, false);\n\n        for (const k in this.listeners) {\n            this.media.addEventListener(k, event => {\n                this.listeners[(event.type).toLowerCase()](event);\n            }, false);\n        }\n\n        return this;\n    }\n\n    /**\n     * This method is getter or setter for parameters.\n     * @param {string|object} key This argument is property name in the case of string type.\n     *     This argument is pair of property and value in the case of associative array.\n     * @param {number|boolean} value This argument is the value of designated property. If this argument is omitted, This method is getter.\n     * @return {number|boolean|MediaModule} This is returned as the value of designated property in the case of getter. Otherwise, this is returned for method chain.\n     * @override\n     */\n    param(key, value) {\n        if (Object.prototype.toString.call(arguments[0]) === '[object Object]') {\n            // Associative array\n            for (const k in arguments[0]) {\n                this.param(k, arguments[0][k]);\n            }\n        } else {\n            const k = String(key).replace(/-/g, '').toLowerCase();\n\n            let r;\n\n            if (k === 'mastervolume') {\n                r = super.param(k, value);\n            }\n\n            if (r !== undefined) {\n                return r;\n            }\n\n            let v   = null;\n            let min = null;\n            let max = null;\n\n            switch (k) {\n                case 'playbackrate':\n                    if (value === undefined) {\n                        return (this.media instanceof HTMLMediaElement) ? this.media.playbackRate : this.playbackRate;\n                    }\n\n                    v   = parseFloat(value);\n                    min = 0.5;  // for Chrome\n\n                    if (v >= min) {\n                        if (this.media instanceof HTMLMediaElement) {\n                            this.media.playbackRate = v;\n                        }\n\n                        this.playbackRate = v;\n\n                        const startTime   = this.context.currentTime;\n                        const currentTime = this.param('currentTime');\n                        const duration    = this.param('duration');\n\n                        this.envelopegenerator.start(startTime);\n\n                        // `duration` is infinite in the case of audio streaming\n                        if (isFinite(duration)) {\n                            this.envelopegenerator.stop((startTime + ((duration - currentTime) / v)), true);\n                        }\n                    }\n\n                    break;\n                case 'currenttime':\n                    if (value === undefined) {\n                        return (this.media instanceof HTMLMediaElement) ? this.media.currentTime : 0;\n                    }\n\n                    if (this.media instanceof HTMLMediaElement) {\n                        v   = parseFloat(value);\n                        min = 0;\n                        max = this.media.duration;\n\n                        if ((v >= min) && (v <= max)) {\n                            this.media.currentTime = v;\n\n                            const startTime    = this.context.currentTime;\n                            const duration     = this.param('duration');\n                            const playbackRate = this.param('playbackRate');\n\n                            this.envelopegenerator.start(startTime);\n\n                            // `duration` is infinite in the case of audio streaming\n                            if (isFinite(duration)) {\n                                this.envelopegenerator.stop((startTime + ((duration - v) / playbackRate)), true);\n                            }\n                        }\n                    }\n\n                    break;\n                case 'loop'    :\n                case 'muted'   :\n                case 'controls':\n                    if (value === undefined) {\n                        return (this.media instanceof HTMLMediaElement) ? this.media[k] : this[k];\n                    }\n\n                    if (this.media instanceof HTMLMediaElement) {\n                        this.media[k] = Boolean(value);\n                    }\n\n                    this[k] = Boolean(value);\n\n                    break;\n                case 'width' :\n                case 'height':\n                    if (value === undefined) {\n                        return (this.media instanceof HTMLVideoElement) ? this.media[k] : 0;\n                    }\n\n                    v   = parseInt(value, 10);\n                    min = 0;\n\n                    if (v >= min) {\n                        if (this.media instanceof HTMLVideoElement) {\n                            this.media[k] = v;\n                        }\n                    }\n\n                    break;\n                case 'duration':\n                    return this.media && this.media.duration ? this.media.duration : 0;  // Getter only\n                case 'channels':\n                    return (this.source instanceof MediaElementAudioSourceNode) ? this.source.channelCount : 0;  // Getter only\n                default:\n                    break;\n            }\n        }\n\n        return this;\n    }\n\n    /**\n     * This method prepares for playing the media anytime after loading the media resource.\n     * @param {string} source This argument is path name or `Data URL` or `Object URL` for the media resource.\n     * @param {string} mimeType This argument is required in the case of audio streaming.\n     * @return {MediaModule} This is returned for method chain.\n     * @override\n     */\n    ready(source, mimeType) {\n        const src = String(source);\n\n        if (this.mse && (this.mse.readyState === 'open')) {\n            this.mse.endOfStream();\n            window.URL.revokeObjectURL(this.media.src);\n\n            this.mse.removeEventListener('sourceopen',  this.onSourceOpen,  false);\n            this.mse.removeEventListener('sourceended', this.onSourceEnded, false);\n            this.mse.removeEventListener('sourceclose', this.onSourceClose, false);\n\n            this.sb.removeEventListener('updateend', this.onSourceBufferUpdateEnd, false);\n            this.sb.removeEventListener('error',     this.onSourceBufferError,     false);\n        }\n\n        try {\n            if (mimeType) {\n                // Audio Streaming\n                if (!MediaSource || !MediaSource.isTypeSupported(mimeType)) {\n                    throw new Error('This Browser does not support `MediaSource` or MIME type');\n                }\n\n                this.media.removeAttribute('src');\n\n                this.media.load();\n\n                this.mse       = new MediaSource();\n                this.media.src = window.URL.createObjectURL(this.mse);\n                this.mimeType  = mimeType;\n                this.file      = src;\n\n                this.onSourceOpen  = this.onSourceOpen.bind(this);\n                this.onSourceEnded = this.onSourceEnded.bind(this);\n                this.onSourceClose = this.onSourceClose.bind(this);\n\n                this.mse.addEventListener('sourceopen',  this.onSourceOpen,  false);\n                this.mse.addEventListener('sourceended', this.onSourceEnded, false);\n                this.mse.addEventListener('sourceclose', this.onSourceClose, false);\n            } else if ((src.indexOf('data:') !== -1) || (src.indexOf('blob:') !== -1) || (this.ext === '')) {\n                // `Data URL` or `Object URL` or Full path\n                this.media.src = src;\n            } else {\n                // Path\n                this.media.src = `${src}.${this.ext}`;\n            }\n        } catch (error) {\n            throw new Error(error.message);\n        }\n\n        return this;\n    }\n\n    /**\n     * This method starts media from the designated time.\n     * @param {number} position This argument is the time that media is started at. The default value is 0.\n     * @param {Array.<Effector>} connects This argument is the array for changing the default connection.\n     * @param {function} processCallback This argument is in order to change `onaudioprocess` event handler in the instance of `ScriptProcessorNode`.\n     * @return {MediaModule} This is returned for method chain.\n     * @override\n     */\n    start(position, connects, processCallback) {\n        if (this.source instanceof MediaElementAudioSourceNode) {\n            // MediaElementAudioSourceNode (Input) -> GainNode (Envelope Generator) -> ScriptProcessorNode -> ... -> AudioDestinationNode (Output)\n            this.envelopegenerator.ready(0, this.source, this.processor);\n            this.connect(this.processor, connects);\n\n            const promise = this.media.play();\n\n            promise.then(() => {\n                const startTime = this.context.currentTime;\n\n                const pos = parseFloat(position);\n\n                this.media.currentTime  = ((pos >= 0) && (pos <= this.media.duration)) ? pos : 0;\n                this.media.playbackRate = this.playbackRate;\n                this.media.controls     = this.controls;\n                this.media.loop         = this.loop;\n                this.media.muted        = this.muted;\n\n                this.envelopegenerator.start(startTime);\n\n                // `duration` is infinite in the case of audio streaming\n                if (isFinite(this.media.duration)) {\n                    this.envelopegenerator.stop((startTime + ((this.media.duration - pos) / this.media.playbackRate)), true);\n                }\n\n                this.on(startTime);\n\n                this.analyser.start('time');\n                this.analyser.start('fft');\n\n                const bufferSize = this.processor.bufferSize;\n\n                if (Object.prototype.toString.call(processCallback) === '[object Function]') {\n                    this.processor.onaudioprocess = processCallback;\n                } else {\n                    this.processor.onaudioprocess = event => {\n                        const inputLs  = event.inputBuffer.getChannelData(0);\n                        const inputRs  = event.inputBuffer.getChannelData(1);\n                        const outputLs = event.outputBuffer.getChannelData(0);\n                        const outputRs = event.outputBuffer.getChannelData(1);\n\n                        for (let i = 0; i < bufferSize; i++) {\n                            outputLs[i] = this.vocalcanceler.start(inputLs[i], inputRs[i]);\n                            outputRs[i] = this.vocalcanceler.start(inputRs[i], inputLs[i]);\n                        }\n                    };\n                }\n            }).catch(() => {\n                this.stop(() => {\n                    if (this.autoplay) {\n                        this.media.muted  = this.muted = true;\n                        this.media.volume = 0;\n                    }\n\n                    this.start(position, connects, processCallback);\n                }, () => {\n                });\n            });\n        }\n\n        return this;\n    }\n\n    /**\n     * This method stops media.\n     * @param {function} successCallback This argument is invoked when `HTMLMediaElement#play` is successful.\n     * @param {function} errorCallback This argument is invoked when `HTMLMediaElement#play` is failure.\n     * @return {MediaModule} This is returned for method chain.\n     * @override\n     */\n    stop(successCallback, errorCallback) {\n        if (this.source instanceof MediaElementAudioSourceNode) {\n            // ref: https://developers.google.com/web/updates/2017/06/play-request-was-interrupted\n            this.media.play()\n                .then(() => {\n                    this.media.pause();\n\n                    this.off(this.context.currentTime);\n\n                    this.analyser.stop('time');\n                    this.analyser.stop('fft');\n\n                    // Stop `onaudioprocess` event\n                    this.processor.disconnect(0);\n                    this.processor.onaudioprocess = null;\n\n                    if (Object.prototype.toString.call(successCallback) === '[object Function]') {\n                        successCallback();\n                    }\n\n                    return Promise.resolve();\n                })\n                .catch(error => {\n                    if (Object.prototype.toString.call(errorCallback) === '[object Function]') {\n                        errorCallback(error);\n                    }\n\n                    return Promise.reject(error);\n                });\n        }\n\n        return this;\n    }\n\n    /**\n     * This method gets the instance of `MediaElementAudioSourceNode`.\n     * @return {MediaElementAudioSourceNode}\n     * @override\n     */\n    get() {\n        return this.source;\n    }\n\n    /**\n     * This method starts or stops media according to media state.\n     * @param {number} position This argument is time that media is started at.\n     * @param {Array.<Effector>} connects This argument is the array for changing the default connection.\n     * @param {function} processCallback This argument is in order to change `onaudioprocess` event handler in the instance of `ScriptProcessorNode`.\n     * @return {MediaModule} This is returned for method chain.\n     * @override\n     */\n    toggle(position, connects, processCallback) {\n        if (this.media.paused) {\n            this.start(position, connects, processCallback);\n        } else {\n            this.stop();\n        }\n\n        return this;\n    }\n\n    /**\n     * This method determines whether the instance of `HTMLMediaElement` exists.\n     * @return {boolean} If the instance of `HTMLMediaElement` already exists, this value is `true`. Otherwise, this value is `false`.\n     */\n    isMedia() {\n        return this.media instanceof HTMLMediaElement;\n    }\n\n    /**\n     * This method determines whether the instance of `MediaElementAudioSourceNode` exists.\n     * @return {boolean} If the instance of `MediaElementAudioSourceNode` already exists, this value is `true`. Otherwise, this value is `false`.\n     * @override\n     */\n    isSource() {\n        return this.source instanceof MediaElementAudioSourceNode;\n    }\n\n    /**\n     * This method determines whether the media is paused.\n     * @return {boolean} If the media is paused or does not exists, this value is `true`. Otherwise, this value is `false`.\n     * @override\n     */\n    isPaused() {\n        return (this.media instanceof HTMLMediaElement) ? this.media.paused : true;\n    }\n\n    /**\n     * This method is event listener for `MediaSource`\n     * @param {Event} event This argument is the instance of `Event`.\n     */\n    onSourceOpen(event) {\n        this.sb = this.mse.addSourceBuffer(this.mimeType);\n\n        this.sb.mode = 'sequence';\n\n        this.onSourceBufferUpdateEnd = this.onSourceBufferUpdateEnd.bind(this);\n        this.onSourceBufferError     = this.onSourceBufferError.bind(this);\n\n        this.sb.addEventListener('updateend', this.onSourceBufferUpdateEnd, false);\n        this.sb.addEventListener('error',     this.onSourceBufferError,     false);\n\n        if ('sourceopen' in this.listeners) {\n            this.listeners.sourceopen(event);\n        }\n\n        const request = new Request(this.file);\n\n        fetch(request)\n            .then(response => {\n                return response.arrayBuffer();\n            })\n            .then(data => {\n                this.sb.appendBuffer(data);\n            })\n            .catch(error => {\n                if ('error' in this.listeners) {\n                    this.listeners.error(event, error);\n                }\n            });\n    }\n\n    /**\n     * This method is event listener for `MediaSource`\n     * @param {Event} event This argument is the instance of `Event`.\n     */\n    onSourceEnded(event) {\n        if ('sourceended' in this.listeners) {\n            this.listeners.sourceended(event);\n        }\n    }\n\n    /**\n     * This method is event listener for `MediaSource`\n     * @param {Event} event This argument is the instance of `Event`.\n     */\n    onSourceClose(event) {\n        if ('sourceclose' in this.listeners) {\n            this.listeners.sourceclose(event);\n        }\n    }\n\n    /**\n     * This method is event listener for `SourceBuffer`\n     * @param {Event} event This argument is the instance of `Event`.\n     */\n    onSourceBufferUpdateEnd(event) {\n        if ('updateend' in this.listeners) {\n            this.listeners.updateend(event);\n        }\n    }\n\n    /**\n     * This method is event listener for `SourceBuffer`\n     * @param {Event} event This argument is the instance of `Event`.\n     */\n    onSourceBufferError(event) {\n        if ('error' in this.listeners) {\n            this.listeners.error(event);\n        }\n    }\n\n    /** @override */\n    params() {\n        const params = super.params();\n\n        params.media = {\n            'playbackrate'  : this.playbackRate,\n            'vocalcanceler' : {\n                'depth' : this.vocalcanceler.param('depth')\n            }\n        };\n\n        delete params.audio;\n\n        return params;\n    }\n\n    /**\n     * This method requests Picture In Picture (PIP).\n     * @return {Promise} This is returned as `Promise`.\n     */\n    requestPictureInPicture() {\n        if (!(this.media instanceof HTMLVideoElement)) {\n            return Promise.reject();\n        }\n\n        if (!('pictureInPictureEnabled' in document)) {\n            return Promise.reject();\n        }\n\n        if (!document.pictureInPictureEnabled) {\n            return Promise.reject();\n        }\n\n        if (this.media.disablePictureInPicture) {\n            return Promise.reject();\n        }\n\n        if (this.media.readyState === 0) {\n            return Promise.reject();\n        }\n\n        if (this.media === document.pictureInPictureElement) {\n            return Promise.reject();\n        }\n\n        return this.media.requestPictureInPicture();\n    }\n\n    /**\n     * This method exits from Picture In Picture (PIP).\n     * @return {Promise} This is returned as `Promise`.\n     */\n    exitPictureInPicture() {\n        if (!(this.media instanceof HTMLVideoElement)) {\n            return Promise.reject();\n        }\n\n        if (!('pictureInPictureEnabled' in document)) {\n            return Promise.reject();\n        }\n\n        if (!document.pictureInPictureEnabled) {\n            return Promise.reject();\n        }\n\n        if (this.media.disablePictureInPicture) {\n            return Promise.reject();\n        }\n\n        if (this.media.readyState === 0) {\n            return Promise.reject();\n        }\n\n        if (this.media !== document.pictureInPictureElement) {\n            return Promise.reject();\n        }\n\n        return document.exitPictureInPicture();\n    }\n\n    /** @override */\n    toString() {\n        return '[MediaModule]';\n    }\n}\n","'use strict';\n\n/**\n * This private class defines properties for Noise Gate.\n * @constructor\n */\nexport class NoiseGate {\n    constructor() {\n        this.level = 0;\n    }\n\n    /**\n     * This method is getter or setter for parameters.\n     * @param {string|object} key This argument is property name in the case of string type.\n     *     This argument is pair of property and value in the case of associative array.\n     * @param {number} value This argument is the value of designated property. If this argument is omitted, This method is getter.\n     * @return {number|NoiseGate} This is returned as the value of designated property in the case of getter. Otherwise, this is returned for method chain.\n     */\n    param(key, value) {\n        if (Object.prototype.toString.call(arguments[0]) === '[object Object]') {\n            // Associative array\n            for (const k in arguments[0]) {\n                this.param(k, arguments[0][k]);\n            }\n        } else {\n            const k = String(key).replace(/-/g, '').toLowerCase();\n\n            let v   = null;\n            let min = null;\n            let max = null;\n\n            switch (k) {\n                case 'level':\n                    if (value === undefined) {\n                        return this.level;\n                    }\n\n                    v   = parseFloat(value);\n                    min = 0;\n                    max = 1;\n\n                    if ((v >= min) && (v <= max)) {\n                        this.level = v;\n                    }\n\n                    break;\n                default:\n                    break;\n            }\n        }\n\n        return this;\n    }\n\n    /**\n     * This method detects background noise and removes this.\n     * @param {number} data This argument is amplitude (between -1 and 1).\n     * @return {number} This is returned as 0 or the raw data.\n     */\n    start(data) {\n        const d = Math.abs(parseFloat(data));\n\n        // data : The amplitude is equal to argument.\n        // 0    : Because signal is detected as background noise, the amplitude is 0.\n        return (d > this.level) ? data : 0;\n    }\n\n    /** @override */\n    toString() {\n        return '[StreamModule NoiseGate]';\n    }\n}\n","'use strict';\n\n/**\n * This private class defines properties for NoiseSuppressor.\n * @constructor\n */\nexport class NoiseSuppressor {\n    /**\n     * This class (static) method executes FFT.\n     * @param {Float32Array} reals This argument is the instance of `Float32Array` for real number.\n     * @param {Float32Array} imags This argument is the instance of `Float32Array` for imaginary number.\n     * @param {number} size This argument is FFT size (power of two).\n     */\n    static FFT(reals, imags, size) {\n        const pow2 = n => Math.pow(2, n);\n\n        const indexes = new Float32Array(size);\n\n        const numberOfStages = Math.log2(size);\n\n        for (let stage = 1; stage <= numberOfStages; stage++) {\n            for (let i = 0; i < pow2(stage - 1); i++) {\n                const rest = numberOfStages - stage;\n\n                for (let j = 0; j < pow2(rest); j++) {\n                    const n = i * pow2(rest + 1) + j;\n                    const m = pow2(rest) + n;\n                    const r = j * pow2(stage - 1);\n\n                    const areal = reals[n];\n                    const aimag = imags[n];\n                    const breal = reals[m];\n                    const bimag = imags[m];\n                    const creal = Math.cos((2.0 * Math.PI * r) / size);\n                    const cimag = -1 * Math.sin((2.0 * Math.PI * r) / size);\n\n                    if (stage < numberOfStages) {\n                        reals[n] = areal + breal;\n                        imags[n] = aimag + bimag;\n                        reals[m] = (creal * (areal - breal)) - (cimag * (aimag - bimag));\n                        imags[m] = (creal * (aimag - bimag)) + (cimag * (areal - breal));\n                    } else {\n                        reals[n] = areal + breal;\n                        imags[n] = aimag + bimag;\n                        reals[m] = areal - breal;\n                        imags[m] = aimag - bimag;\n                    }\n                }\n            }\n        }\n\n        for (let stage = 1; stage <= numberOfStages; stage++) {\n            const rest = numberOfStages - stage;\n\n            for (let i = 0; i < pow2(stage - 1); i++) {\n                indexes[pow2(stage - 1) + i] = indexes[i] + pow2(rest);\n            }\n        }\n\n        for (let k = 0; k < size; k++) {\n            if (indexes[k] <= k) {\n                continue;\n            }\n\n            const real = reals[indexes[k]];\n            const imag = imags[indexes[k]];\n\n            reals[indexes[k]] = reals[k];\n            imags[indexes[k]] = imags[k];\n\n            reals[k] = real;\n            imags[k] = imag;\n        }\n    }\n\n    /**\n     * This class (static) method executes IFFT.\n     * @param {Float32Array} reals This argument is the instance of `Float32Array` for real number.\n     * @param {Float32Array} imags This argument is the instance of `Float32Array` for imaginary number.\n     * @param {number} size This argument is IFFT size (power of two).\n     */\n    static IFFT(reals, imags, size) {\n        const pow2 = n => Math.pow(2.0, n);\n\n        const indexes = new Float32Array(size);\n\n        const numberOfStages = Math.log2(size);\n\n        for (let stage = 1; stage <= numberOfStages; stage++) {\n            for (let i = 0; i < pow2(stage - 1); i++) {\n                const rest = numberOfStages - stage;\n\n                for (let j = 0; j < pow2(rest, 2); j++) {\n                    const n = i * pow2(rest + 1) + j;\n                    const m = pow2(rest) + n;\n                    const r = j * pow2(stage - 1);\n\n                    const areal = reals[n];\n                    const aimag = imags[n];\n                    const breal = reals[m];\n                    const bimag = imags[m];\n                    const creal = Math.cos((2.0 * Math.PI * r) / size);\n                    const cimag = Math.sin((2.0 * Math.PI * r) / size);\n\n                    if (stage < numberOfStages) {\n                        reals[n] = areal + breal;\n                        imags[n] = aimag + bimag;\n                        reals[m] = (creal * (areal - breal)) - (cimag * (aimag - bimag));\n                        imags[m] = (creal * (aimag - bimag)) + (cimag * (areal - breal));\n                    } else {\n                        reals[n] = areal + breal;\n                        imags[n] = aimag + bimag;\n                        reals[m] = areal - breal;\n                        imags[m] = aimag - bimag;\n                    }\n                }\n            }\n        }\n\n        for (let stage = 1; stage <= numberOfStages; stage++) {\n            const rest = numberOfStages - stage;\n\n            for (let i = 0; i < pow2(stage - 1); i++) {\n                indexes[pow2(stage - 1) + i] = indexes[i] + pow2(rest);\n            }\n        }\n\n        for (let k = 0; k < size; k++) {\n            if (indexes[k] <= k) {\n                continue;\n            }\n\n            const real = reals[indexes[k]];\n            const imag = imags[indexes[k]];\n\n            reals[indexes[k]] = reals[k];\n            imags[indexes[k]] = imags[k];\n\n            reals[k] = real;\n            imags[k] = imag;\n        }\n\n        for (let k = 0; k < size; k++) {\n            reals[k] /= size;\n            imags[k] /= size;\n        }\n    }\n\n    /** @constructor */\n    constructor() {\n        this.threshold = 0;\n    }\n\n    /**\n     * This method is getter or setter for parameters.\n     * @param {string|object} key This argument is property name in the case of string type.\n     *     This argument is pair of property and value in the case of associative array.\n     * @param {number} value This argument is the value of designated property. If this argument is omitted, This method is getter.\n     * @return {number|NoiseSuppressor} This is returned as the value of designated property in the case of getter. Otherwise, this is returned for method chain.\n     */\n    param(key, value) {\n        if (Object.prototype.toString.call(arguments[0]) === '[object Object]') {\n            // Associative array\n            for (const k in arguments[0]) {\n                this.param(k, arguments[0][k]);\n            }\n        } else {\n            const k = String(key).replace(/-/g, '').toLowerCase();\n\n            let v   = null;\n            let min = null;\n            let max = null;\n\n            switch (k) {\n                case 'threshold':\n                    if (value === undefined) {\n                        return this.threshold;\n                    }\n\n                    v   = parseFloat(value);\n                    min = 0;\n                    max = 1;\n\n                    if ((v >= min) && (v <= max)) {\n                        this.threshold = v;\n                    }\n\n                    break;\n                default:\n                    break;\n            }\n        }\n\n        return this;\n    }\n\n    /**\n     * This method detects background noise and removes this.\n     * @param {Float32Array} inputs This argument is the instance of `Float32Array` for `ScriptProcessorNode`.\n     * @param {Float32Array} outpus This argument is the instance of `Float32Array` for `ScriptProcessorNode`.\n     * @param {number} bufferSize This argument is buffer size for `ScriptProcessorNode`.\n     * @return {NoiseSuppressor} This is returned for method chain.\n     */\n    start(inputs, outputs, bufferSize) {\n        if (this.threshold > 0) {\n            const xreals = new Float32Array(inputs);\n            const ximags = new Float32Array(bufferSize);\n\n            const yreals = new Float32Array(bufferSize);\n            const yimags = new Float32Array(bufferSize);\n\n            const amplitudes = new Float32Array(bufferSize);\n            const phases     = new Float32Array(bufferSize);\n\n            NoiseSuppressor.FFT(xreals, ximags, bufferSize);\n\n            for (let k = 0; k < bufferSize; k++) {\n                amplitudes[k] = Math.sqrt(Math.pow(xreals[k], 2) + Math.pow(ximags[k], 2));\n\n                if ((xreals[k] !== 0) && (ximags[k] !== 0)) {\n                    phases[k] = Math.atan2(ximags[k], xreals[k]);\n                }\n\n                amplitudes[k] -= this.threshold;\n\n                if (amplitudes[k] < 0) {\n                    amplitudes[k] = 0;\n                }\n\n                yreals[k] = amplitudes[k] * Math.cos(phases[k]);\n                yimags[k] = amplitudes[k] * Math.sin(phases[k]);\n            }\n\n            NoiseSuppressor.IFFT(yreals, yimags, bufferSize);\n\n            outputs.set(yreals);\n        } else {\n            outputs.set(inputs);\n        }\n\n        return this;\n    }\n\n    /** @override */\n    toString() {\n        return '[StreamModule NoiseSuppressor]';\n    }\n}\n","'use strict';\n\nimport { SoundModule } from '../SoundModule';\nimport { NoiseGate }  from './NoiseGate';\nimport { NoiseSuppressor }  from './NoiseSuppressor';\n\n/**\n * This class defines properties that processes sound data from WebRTC in Web Audio API.\n * @constructor\n * @extends {SoundModule}\n */\nexport class StreamModule extends SoundModule {\n    /**\n     * @param {AudioContext} context This argument is in order to use the interfaces of Web Audio API.\n     * @param {number} bufferSize This argument is buffer size for `ScriptProcessorNode`.\n     */\n    constructor(context, bufferSize) {\n        super(context, bufferSize);\n\n        // for the instance of `MediaStreamAudioSourceNode`\n        this.source = null;\n\n        // for `navigator.mediaDevices.getUserMedia`\n        this.constraints = {\n            'audio' : true,\n            'video' : false\n        };\n\n        this.callbacks = {\n            'stream' : () => {},\n            'error'  : () => {}\n        };\n\n        this.output = true;\n\n        this.isStop = true;\n\n        this.noisegate       = new NoiseGate();\n        this.noisesuppressor = new NoiseSuppressor();\n    }\n\n    /**\n     * This method sets up for using WebRTC.\n     * @param {object} constraints This argument is the 1st argument for `getUserMedia`.\n     * @param {function} streamCallback This argument is invoked on streaming.\n     * @param {function} errorCallback This argument is invoked when error occurs on streaming.\n     * @return {StreamModule} This is returned for method chain.\n     * @override\n     */\n    setup(constraints, streamCallback, errorCallback) {\n        if (Object.prototype.toString.call(constraints) === '[object Object]') {\n            this.constraints = constraints;\n        }\n\n        if (Object.prototype.toString.call(streamCallback) === '[object Function]') {\n            this.callbacks.stream = streamCallback;\n        }\n\n        if (Object.prototype.toString.call(errorCallback) === '[object Function]') {\n            this.callbacks.error = errorCallback;\n        }\n\n        return this;\n    }\n\n    /**\n     * This method is getter or setter for parameters.\n     * @param {string|object} key This argument is property name in the case of string type.\n     *     This argument is pair of property and value in the case of associative array.\n     * @param {number|boolean} value This argument is the value of designated property. If this argument is omitted, This method is getter.\n     * @return {number|boolean|StreamModule} This is returned as the value of designated property in the case of getter. Otherwise, this is returned for method chain.\n     * @override\n     */\n    param(key, value) {\n        if (Object.prototype.toString.call(arguments[0]) === '[object Object]') {\n            // Associative array\n            for (const k in arguments[0]) {\n                this.param(k, arguments[0][k]);\n            }\n        } else {\n            const k = String(key).replace(/-/g, '').toLowerCase();\n\n            const r = super.param(k, value);\n\n            if (r !== undefined) {\n                return r;\n            }\n\n            switch (k) {\n                case 'output':\n                    if (value === undefined) {\n                        return this.output;\n                    }\n\n                    this.output = Boolean(value);\n\n                    break;\n                default:\n                    break;\n            }\n        }\n\n        return this;\n    }\n\n    /** @override */\n    ready() {\n        return this;\n    }\n\n    /**\n     * This method starts streaming.\n     * @param {Array.<Effector>} connects This argument is the array for changing the default connection.\n     * @param {function} processCallback This argument is in order to change `onaudioprocess` event handler in the instance of `ScriptProcessorNode`.\n     * @return {StreamModule} This is returned for method chain.\n     * @override\n     */\n    start(connects, processCallback) {\n        if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {\n            throw new Error('Cannot use WebRTC.');\n        }\n\n        const bufferSize = this.processor.bufferSize;\n\n        let isAnalyser = false;\n\n        const start = (stream, connects, processCallback) => {\n            this.source = this.context.createMediaStreamSource(stream);\n\n            // MediaStreamAudioSourceNode (Input) -> ScriptProcessorNode -> ... -> AudioDestinationNode (Output)\n            this.source.connect(this.processor);\n            this.connect(this.processor, connects);\n\n            if (!this.output) {\n                this.mastervolume.disconnect(0);\n\n                // for analyser\n                this.mastervolume.connect(this.analyser.input);\n\n                // for recording\n                this.mastervolume.connect(this.recorder.processor);\n                this.recorder.processor.connect(this.context.destination);\n\n                // for session\n                this.mastervolume.connect(this.session.sender);\n                this.session.sender.connect(this.context.destination);\n            }\n\n            this.on(this.context.currentTime);\n\n            if (!isAnalyser) {\n                this.analyser.start('time');\n                this.analyser.start('fft');\n                isAnalyser = true;\n            }\n\n            if (Object.prototype.toString.call(processCallback) === '[object Function]') {\n                this.processor.onaudioprocess = processCallback;\n            } else {\n                this.processor.onaudioprocess = event => {\n                    const inputLs  = event.inputBuffer.getChannelData(0);\n                    const inputRs  = event.inputBuffer.getChannelData(1);\n                    const outputLs = event.outputBuffer.getChannelData(0);\n                    const outputRs = event.outputBuffer.getChannelData(1);\n\n                    for (let i = 0; i < bufferSize; i++) {\n                        outputLs[i] = this.noisegate.start(inputLs[i]);\n                        outputRs[i] = this.noisegate.start(inputRs[i]);\n                    }\n\n                    this.noisesuppressor.start(inputLs, outputLs, bufferSize);\n                    this.noisesuppressor.start(inputRs, outputRs, bufferSize);\n                };\n            }\n        };\n\n        this.isStop = false;\n\n        navigator.mediaDevices.getUserMedia(this.constraints).then(stream => {\n            if (this.isStop) {\n                return;\n            }\n\n            start(stream, connects, processCallback);\n            this.callbacks.stream(stream);\n        }).catch(error => {\n            this.callbacks.error(error);\n        });\n\n        return this;\n    }\n\n    /**\n     * This method stops streaming.\n     * @return {StreamModule} This is returned for method chain.\n     * @override\n     */\n    stop() {\n        this.source = null;\n\n        this.off(this.context.currentTime, true);\n\n        this.analyser.stop('time');\n        this.analyser.stop('fft');\n\n        // Stop `onaudioprocess` event\n        this.processor.disconnect(0);\n        this.processor.onaudioprocess = null;\n\n        this.isStop = true;\n\n        return this;\n    }\n\n    /**\n     * This method gets the instance of `MediaStreamAudioSourceNode`.\n     * @return {MediaStreamAudioSourceNode}\n     * @override\n     */\n    get() {\n        return this.source;\n    }\n\n    /**\n     * This method starts or stops streaming according to current state.\n     * @param {Array.<Effector>} connects This argument is the array for changing the default connection.\n     * @param {function} processCallback This argument is in order to change `onaudioprocess` event handler in the instance of `ScriptProcessorNode`.\n     * @return {StreamModule} This is returned for method chain.\n     */\n    toggle(connects, processCallback) {\n        if (this.isStreaming()) {\n            this.stop();\n        } else {\n            this.start(connects, processCallback);\n        }\n\n        return this;\n    }\n\n    /**\n     * This method determines whether streaming is active.\n     * @return {boolean} If streaming is active, this value is `true`. Otherwise, this value is `false`.\n     */\n    isStreaming() {\n        return !this.isStop;\n    }\n\n    /** @override */\n    params() {\n        const params = super.params();\n\n        params.stream = {\n            'output'          : this.output,\n            'noisegate'       : { 'level'     : this.noisegate.param('level') },\n            'noisesuppressor' : { 'threshold' : this.noisesuppressor.param('threshold') }\n        };\n\n        return params;\n    }\n\n    /** @override */\n    toString() {\n        return '[StreamModule]';\n    }\n}\n","'use strict';\n\nimport { SoundModule } from '../SoundModule';\nimport { OscillatorModule } from '../OscillatorModule';\nimport { OneshotModule } from '../OneshotModule';\nimport { AudioModule } from '../AudioModule';\nimport { MediaModule } from '../MediaModule';\nimport { StreamModule } from '../StreamModule';\n\n/**\n * This class defines properties for mixing sound sources that is defined in this library.\n * @constructor\n * @extends {SoundModule}\n */\nexport class MixerModule extends SoundModule {\n    /**\n     * @param {AudioContext} context This argument is in order to use the interfaces of Web Audio API.\n     * @param {number} bufferSize This argument is buffer size for `ScriptProcessorNode`.\n     */\n    constructor(context, bufferSize) {\n        super(context, bufferSize);\n\n        /** @type {Array.<OscillatorModule>|Array.<OneshotModule>|Array.<AudioModule>|Array.<MediaModule>|Array.<StreamModule>} */\n        this.sources = [];\n\n        this.isAnalyser = false;\n    }\n\n    /**\n     * This method mixes sound source.\n     * @param {Array.<OscillatorModule>|Array.<OneshotModule>|Array.<AudioModule>|Array.<MediaModule>|Array.<StreamModule>} sources This argument is the array of sound source that is defined by this library.\n     * @return {MixerModule} This is returned for method chain.\n     */\n    mix(sources) {\n        if (!Array.isArray(sources)) {\n            sources = [sources];\n        }\n\n        this.sources = sources;\n\n        for (const source of this.sources) {\n            if (!((source instanceof OscillatorModule) || (source instanceof OneshotModule) || (source instanceof AudioModule) || (source instanceof MediaModule) || (source instanceof StreamModule))) {\n                return this;\n            }\n\n            const stopTime = this.context.currentTime;\n\n            this.off(stopTime, false);\n\n            source.analyser.stop('time');\n            source.analyser.stop('fft');\n            source.isAnalyser = false;\n\n            source.recorder.stop();\n            source.session.close();\n\n            // ScriptProcessorNode (each sound source) -> ScriptProcessorNode (Mix sound sources)\n            source.processor.disconnect(0);\n            source.processor.connect(this.processor);\n        }\n\n        // (... ->) ScriptProcessorNode (Mix sound sources) -> ... -> AudioDestinationNode (Output)\n        this.connect(this.processor);\n\n        const startTime = this.context.currentTime;\n\n        this.on(startTime);\n\n        if (!this.isAnalyser) {\n            this.analyser.start('time');\n            this.analyser.start('fft');\n            this.isAnalyser = true;\n        }\n\n        this.processor.onaudioprocess = event => {\n            const inputLs  = event.inputBuffer.getChannelData(0);\n            const inputRs  = event.inputBuffer.getChannelData(1);\n            const outputLs = event.outputBuffer.getChannelData(0);\n            const outputRs = event.outputBuffer.getChannelData(1);\n\n            // Stop ?\n            let isStop = false;\n\n            for (const source of sources) {\n                if ((source instanceof OscillatorModule) && source.envelopegenerator.isStop()) {\n                    isStop = true;\n                } else if ((source instanceof OneshotModule) && source.isStop) {\n                    isStop = true;\n                } else if ((source instanceof AudioModule) && source.paused) {\n                    isStop = true;\n                } else if ((source instanceof MediaModule) && source.media.paused) {\n                    isStop = true;\n                } else if ((source instanceof StreamModule) && source.isStop) {\n                    isStop = true;\n                }\n            }\n\n            if (isStop) {\n                const stopTime = this.context.currentTime;\n\n                this.on(stopTime, true);\n\n                this.analyser.stop('time');\n                this.analyser.stop('fft');\n                this.isAnalyser = false;\n\n                // Stop `onaudioprocess` event\n                this.processor.disconnect(0);\n                this.processor.onaudioprocess = null;\n            } else {\n                outputLs.set(inputLs);\n                outputRs.set(inputRs);\n            }\n        };\n\n        return this;\n    }\n\n    /**\n     * This method gets the instance of sound source that is mixed in this class.\n     * @param {number} index This argument is required in the case of designating sound source.\n     * @return {Array.<OscillatorModule>|Array.<OneshotModule>|Array.<AudioModule>|Array.<MediaModule>|Array.<StreamModule>|OscillatorModule|OneshotModule|AudioModule|MediaModule|StreamModule}\n     * @override\n     */\n    get(index) {\n        const i = parseInt(index, 10);\n\n        return ((i >= 0) && (i < this.sources.length)) ? this.sources[i] : this.sources;\n    }\n\n    /** @override */\n    toString() {\n        return '[MixerModule]';\n    }\n}\n","'use strict';\n\nimport { SoundModule } from '../SoundModule';\n\nexport class ProcessorModule extends SoundModule {\n    /**\n     * @param {AudioContext} context This argument is in order to use the interfaces of Web Audio API.\n     * @param {number} bufferSize This argument is buffer size for `ScriptProcessorNode`.\n     */\n    constructor(context, bufferSize) {\n        super(context, bufferSize);\n\n        this.envelopegenerator.setGenerator(0);\n\n        this.isAnalyser = false;\n    }\n\n    /**\n     * This method sets the instance of `ScriptProcessorNode` or `AudioWorkletNode`.\n     * @param {ScriptProcessorNode|AudioWorkletNode} processor This argument is the instance of `ScriptProcessorNode` or `AudioWorkletNode`.\n     * @return {ProcessorModule} This is returned for method chain.\n     * @override\n     */\n    setup(processor) {\n        if ((processor instanceof ScriptProcessorNode) || (processor instanceof AudioWorkletNode)) {\n            this.processor = processor;\n        }\n\n        return this;\n    }\n\n    /**\n     * This method starts `onaudioprocess` event in the instance of `ScriptProcessorNode`.\n     * @param {function} processCallback This argument is in order to change `onaudioprocess` event handler in the instance of `ScriptProcessorNode`.\n     * @param {Array.<Effector>} connects This argument is the array for changing the default connection.\n     * @return {ProcessorModule} This is returned for method chain.\n     * @override\n     */\n    start(processCallback, connects) {\n        const startTime = this.context.currentTime;\n\n        // Clear previous\n        this.envelopegenerator.clear(true);\n        this.processor.disconnect(0);\n        this.processor.onaudioprocess = null;\n\n        // GainNode (Envelope Generator) -> ... -> AudioDestinationNode (Output)\n        this.connect(this.envelopegenerator.getGenerator(0), connects);\n\n        // ScriptProcessorNode (Input) -> GainNode (Envelope Generator)\n        this.envelopegenerator.ready(0, this.processor);\n\n        this.envelopegenerator.start(startTime);\n\n        if (!this.isAnalyser) {\n            this.analyser.start('time');\n            this.analyser.start('fft');\n            this.isAnalyser = true;\n        }\n\n        this.on(startTime);\n\n        if (Object.prototype.toString.call(processCallback) === '[object Function]') {\n            this.processor.onaudioprocess = processCallback;\n        }\n\n        return this;\n    }\n\n    /**\n     * This method stops `onaudioprocess` event in the instance of `ScriptProcessorNode`.\n     * @param {function} processCallback This argument is in order to change `onaudioprocess` event handler in the instance of `ScriptProcessodNode`.\n     * @return {ProcessorModule} This is returned for method chain.\n     * @override\n     */\n    stop(processCallback) {\n        const stopTime = this.context.currentTime;\n\n        this.envelopegenerator.stop(stopTime);\n        this.off(stopTime);\n\n        if (Object.prototype.toString.call(processCallback) === '[object Function]') {\n            this.processor.onaudioprocess = processCallback;\n        }\n\n        return this;\n    }\n\n    /** @override */\n    toString() {\n        return '[ProcessorModule]';\n    }\n}\n","'use strict';\n\n/**\n * This class defines properties for using Web MIDI API.\n * @constructor\n */\nexport class MIDI {\n    /**\n     * @param {AudioContext} context This argument is in order to use the interfaces of Web Audio API.\n     */\n    constructor(context) {\n        this.context = context;\n\n        this.midiAccess = null;  // for the instance of `MIDIAccess`\n        this.inputs     = [];    // for the instances of `MIDIInput`\n        this.outputs    = [];    // for the instances of `MIDIOutput`\n    }\n\n    /**\n     * This method invokes `requestMIDIAccess` and gets objects for using Web MIDI API.\n     * @param {boolean} sysex This argument is in order to select whether using system exclusive message.\n     * @param {function} successCallback This argument is invoked when `requestMIDIAccess` succeeds.\n     * @param {function} errorCallback This argument is invoked when `requestMIDIAccess` fails.\n     * @return {MIDI} This is returned for method chain.\n     */\n    setup(sysex, successCallback, errorCallback) {\n        if (!navigator.requestMIDIAccess) {\n            throw new Error('Cannot use Web MIDI API.');\n        }\n\n        navigator.requestMIDIAccess({ sysex : Boolean(sysex) }).then(midiAccess => {\n            this.midiAccess = midiAccess;\n\n            if (Object.prototype.toString.call(midiAccess) === '[object Function]') {\n                // Legacy Chrome\n                this.inputs  = midiAccess.inputs();\n                this.outputs = midiAccess.outputs();\n            } else {\n                // Chrome 39 and later\n                const inputIterator  = midiAccess.inputs.values();\n                const outputIterator = midiAccess.outputs.values();\n\n                for (let i = inputIterator.next(); !i.done; i = inputIterator.next()) {\n                    this.inputs.push(i.value);\n                }\n\n                for (let o = outputIterator.next(); !o.done; o = outputIterator.next()) {\n                    this.outputs.push(o.value);\n                }\n            }\n\n            if (Object.prototype.toString.call(successCallback) === '[object Function]') {\n                successCallback(this.midiAccess, this.inputs, this.outputs);\n            }\n        }).catch(error => {\n            if (Object.prototype.toString.call(errorCallback) === '[object Function]') {\n                errorCallback(error);\n            }\n        });\n\n        return this;\n    }\n\n    /**\n     * This method gets the instance of `MIDIAccess`.\n     * @return {MIDIAccess}\n     */\n    get() {\n        return this.midiAccess;\n    }\n\n    /** @override */\n    toString() {\n        return '[MIDI]';\n    }\n}\n","'use strict';\n\nimport { OscillatorModule } from '../OscillatorModule';\nimport { OneshotModule } from '../OneshotModule';\nimport { NoiseModule } from '../NoiseModule';\n\n/**\n * This class defines properties for playing the MML (Music Macro Language).\n * @constructor\n */\nexport class MML {\n    // The 12 equal temperament\n    //\n    // Min -> 27.5 Hz (A), Max -> 4186 Hz (C)\n    //\n    // A * 1.059463 -> A# (half up)\n    static FREQUENCY_RATIO   = Math.pow(2, (1 / 12));  // about 1.059463\n    static MIN_A             = 27.5;\n    static ONE_MINUTES       = 60;  // sec\n    static EQUAL_TEMPERAMENT = 12;\n    static QUARTER_NOTE      = 4;\n    static REGEXP_MML        = /\\s*(?:T\\d+)\\s*|\\s*(?:O\\d+)\\s*|\\s*(?:(?:[CDEFGABR][#+-]?)+(?:256|192|144|128|96|72|64|48|36|32|24|18|16|12|8|6|4|2|1)\\.?)(?:&(?:[CDEFGABR][#+-]?)+(?:256|192|144|128|96|72|64|48|36|32|24|18|16|12|8|6|4|2|1)\\.?)*\\s*/gi;\n    static REGEXP_TEMPO      = /T\\d+/i;\n    static REGEXP_OCTAVE     = /O\\d+/i;\n    static REGEXP_NOTE       = /(?:(?:[CDEFGABR][#+-]?)+)(?:256|192|144|128|96|72|64|48|36|32|24|18|16|12|8|6|4|2|1)(?:&(?:[CDEFGABR][#+-]?)+(?:256|192|144|128|96|72|64|48|36|32|24|18|16|12|8|6|4|2|1)\\.?)*/i;\n    static REGEXP_CHORD      = /((?:[CDEFGABR][#+-]?)+)(?:256|192|144|128|96|72|64|48|36|32|24|18|16|12|8|6|4|2|1)\\.?.*/i;\n    static REGEXP_DURATION   = /(?:[CDEFGABR][#+-]?)+((?:256|192|144|128|96|72|64|48|36|32|24|18|16|12|8|6|4|2|1)\\.?.*)/i;\n    static REST              = 'R';\n    static ERROR_STRING      = 'MML';\n    static ERROR_TEMPO       = 'TEMPO';\n    static ERROR_OCTAVE      = 'OCTAVE';\n    static ERROR_NOTE        = 'NOTE';\n\n    /**\n     * This class (static) method computes index by octave and pitch name.\n     * @param {number} octave This argument is octave.\n     * @param {string} pitchname This argument is pitch name.\n     * @return {number|string} This is returned as index that is computed by octave and pitch name.\n     */\n    static computeIndex = (octave, pitchname) => {\n        let index = 0;\n\n        switch (pitchname) {\n            case 'C':\n                index = 3;\n                break;\n            case 'D':\n                index = 5;\n                break;\n            case 'E':\n                index = 7;\n                break;\n            case 'F':\n                index = 8;\n                break;\n            case 'G':\n                index = 10;\n                break;\n            case 'A':\n                index = 12;\n                break;\n            case 'B':\n                index = 14;\n                break;\n            case MML.REST:\n                return MML.REST;\n            default :\n                break;\n        }\n\n        const computedIndex = (MML.EQUAL_TEMPERAMENT * (octave - 1)) + index;\n\n        return (computedIndex >= 0) ? computedIndex : -1;\n    };\n\n    /**\n     * This class (static) method computes frequency from the index that corresponds to the 12 equal temperament.\n     * @param {number} index This argument is the index that corresponds to the 12 equal temperament.\n     *     For example, This value is between 0 and 88 in the case of piano.\n     * @return {number} This is returned as frequency.\n     */\n    static computeFrequency = index => (index >= 0) ? (MML.MIN_A * Math.pow(MML.FREQUENCY_RATIO, index)) : -1;\n\n    /**\n     * @param {AudioContext} context This argument is in order to use the interfaces of Web Audio API.\n     */\n    constructor(context) {\n        this.context = context;\n\n        // for the array of `OscillatorNode` or `OscillatorModule` or `OneshotModule` or `NoiseModule`\n        this.source = null;\n\n        this.sequences = [];  /** @type {Array.<Array.<object>>} */\n        this.timerids  = [];  /** @type {Array.<number>} */\n        this.prev      = [];  /** @type {Array.<object>} */\n\n        this.offset = 0;\n\n        this.callbacks = {\n            'start' : () => {},\n            'stop'  : () => {},\n            'ended' : () => {},\n            'error' : () => {}\n        };\n    }\n\n    /**\n     * This method sets callback functions.\n     * @param {string|object} key This argument is property name.\n     *     This argument is pair of property and value in the case of associative array.\n     * @param {function} value This argument is callback function.\n     * @return {MML} This is returned for method chain.\n     */\n    setup(key, value) {\n        if ((arguments.length > 0) && (Object.prototype.toString.call(arguments[0]) === '[object Object]')) {\n            // Associative array\n            for (const k in arguments[0]) {\n                this.setup(k, arguments[0][k]);\n            }\n        } else if (arguments.length > 1) {\n            const k = String(key).toLowerCase();\n\n            if (k in this.callbacks) {\n                if (Object.prototype.toString.call(value) === '[object Function]') {\n                    this.callbacks[k] = value;\n                }\n            }\n        }\n\n        return this;\n    }\n\n    /**\n     * This method parses MML string.\n     * @param {Array.<OscillatorNode>|OscillatorModule|OneshotModule|NoiseModule} source This argument is in order to select sound source.\n     * @param {Array.<string>} mmls This argument is MML strings.\n     * @param {number} offset This argument is in order to correct the index of one-shot audio.\n     * @return {Array.<Array.<object>>} This is returned as array that contains object for playing the MML.\n     */\n    ready(source, mmls, offset) {\n        this.offset = parseInt(offset, 10);\n\n        if (isNaN(this.offset) || (this.offset < 0)) {\n            this.offset = 0;\n        }\n\n        if (this.source !== null) {\n            this.stop();  // Stop the previous MML\n        }\n\n        this.clear();\n\n        if (Array.isArray(source)) {\n            for (const s of source) {\n                if (!(s instanceof OscillatorNode)) {\n                    return this;\n                }\n            }\n\n            this.source = source;\n        } else if (source instanceof OscillatorNode) {\n            this.source = [source];\n        } else if ((source instanceof OscillatorModule) || (source instanceof OneshotModule) || (source instanceof NoiseModule)) {\n            this.source = source;\n        } else {\n            return this;\n        }\n\n        if (!Array.isArray(mmls)) {\n            mmls = [mmls];\n        }\n\n        while (mmls.length > 0) {\n            const mml = String(mmls.shift());\n\n            /** @type {Array.<object>} */\n            const sequences = [];\n\n            const notes = mml.match(MML.REGEXP_MML);\n\n            if (notes === null) {\n                this.callbacks.error(MML.ERROR_STRING, '');\n                return this;\n            }\n\n            let indexes     = [];\n            let frequencies = [];\n\n            let start    = 0;\n            let duration = 0;\n            let stop     = 0;\n\n            let currentTime = 0;\n            let timeOf4note = null;\n            let octave      = null;\n\n            while (notes.length > 0) {\n                const note = notes.shift().trim();\n\n                if (MML.REGEXP_TEMPO.test(note)) {\n                    const bpm = parseInt(note.slice(1), 10);\n\n                    if (bpm <= 0) {\n                        this.callbacks.error(MML.ERROR_TEMPO, note);\n                        return this;\n                    }\n\n                    timeOf4note = MML.ONE_MINUTES / bpm;\n                } else if (MML.REGEXP_OCTAVE.test(note)) {\n                    octave = parseInt(note.slice(1), 10);\n\n                    if (octave < 0) {\n                        this.callbacks.error(MML.ERROR_OCTAVE, note);\n                        return this;\n                    }\n                } else if (MML.REGEXP_NOTE.test(note)) {\n                    if (timeOf4note === null) {\n                        this.callbacks.error(MML.ERROR_TEMPO, note);\n                        return this;\n                    }\n\n                    if (octave === null) {\n                        this.callbacks.error(MML.ERROR_OCTAVE, note);\n                        return this;\n                    }\n\n                    const chord = note.match(MML.REGEXP_CHORD)[1];\n\n                    indexes = [];\n\n                    for (let i = 0, len = chord.length; i < len; i++) {\n                        const pitchname = chord.charAt(i);\n\n                        let index = MML.computeIndex(octave, pitchname.toUpperCase());\n\n                        // Half up or Half down (Sharp or Flat) ?\n                        switch (chord.charAt(i + 1)) {\n                            case '#':\n                            case '+':\n                                // Half up (Sharp)\n                                index++;\n                                i++;\n                                break;\n                            case '-':\n                                // Half down (Flat)\n                                index--;\n                                i++;\n                                break;\n                            default:\n                                // Normal (Natural)\n                                break;\n                        }\n\n                        // in the case of chord\n                        if (index >= indexes[0]) {\n                            index -= MML.EQUAL_TEMPERAMENT;\n                        }\n\n                        // Validation\n                        if (index < 0) {\n                            this.callbacks.error(MML.ERROR_NOTE, note);\n                            return this;\n                        }\n\n                        indexes.push(index);\n                    }\n\n                    frequencies = [];\n\n                    for (const index of indexes) {\n                        const frequency = (index !== MML.REST) ? MML.computeFrequency(index) : 0;\n\n                        // Validation\n                        if (frequency === -1) {\n                            this.callbacks.error(MML.ERROR_NOTE, note);\n                            return this;\n                        }\n\n                        frequencies.push(frequency);\n                    }\n\n                    const durations = note.split('&');  // Tie\n\n                    while (durations.length > 0) {\n                        const d = durations.shift().match(MML.REGEXP_DURATION)[1];\n\n                        switch (parseInt(d, 10)) {\n                            case   1:\n                            case   2:\n                            case   4:\n                            case   8:\n                            case  16:\n                            case  32:\n                            case  64:\n                            case 128:\n                            case 256:\n                                const numOf4note = MML.QUARTER_NOTE / parseInt(d, 10);\n\n                                // a dotted note ?\n                                duration += (d.indexOf('.') !== -1) ? ((1.5 * numOf4note) * timeOf4note) : (numOf4note * timeOf4note);\n                                break;\n                            case   6:\n                                // Triplet of half note\n                                duration += (2 * timeOf4note) / 3;\n                                break;\n                            case  12:\n                                // Triplet of quarter note\n                                duration += timeOf4note / 3;\n                                break;\n                            case  18:\n                                // Nonuplet of half note\n                                duration += (2 * timeOf4note) / 9;\n                                break;\n                            case  24:\n                                // Triplet of 8th note\n                                duration += (0.5 * timeOf4note) / 3;\n                                break;\n                            case  36:\n                                // Nonuplet of quarter note\n                                duration += timeOf4note / 9;\n                                break;\n                            case  48:\n                                // Triplet of 16th note\n                                duration += (0.25 * timeOf4note) / 3;\n                                break;\n                            case  72:\n                                // Nonuplet of 8th note\n                                duration += (0.5 * timeOf4note) / 9;\n                                break;\n                            case  96:\n                                // Triplet of 32th note\n                                duration += (0.125 * timeOf4note) / 3;\n                                break;\n                            case 144:\n                                // Nonuplet of 16th note\n                                duration += (0.25 * timeOf4note) / 9;\n                                break;\n                            case 192:\n                                // Triplet of 64th note\n                                duration += (0.0625 * timeOf4note) / 3;\n                                break;\n                            default:\n                                this.callbacks.error(MML.ERROR_NOTE, note);\n                                break;\n                        }\n                    }\n\n                    start = currentTime;\n                    stop  = start + duration;\n\n                    currentTime += duration;\n\n                    sequences.push({\n                        'indexes'     : indexes,\n                        'frequencies' : frequencies,\n                        'start'       : start,\n                        'duration'    : duration,\n                        'stop'        : stop,\n                        'note'        : note\n                    });\n\n                    duration = 0;\n                }\n            }\n\n            if (sequences.length > 0) {\n                // `start` method gets element by `pop` for performance\n                sequences.reverse();\n\n                this.sequences.push(sequences);\n                this.timerids.push(null);\n            }\n        }\n\n        return this;\n    }\n\n    /**\n     * This method starts the designated MML part. Moreover, this method schedules next sound.\n     * @param {number} part This argument is the part of MML.\n     * @param {Array.<Effector>|Array.<AudioNode>} connects This argument is the array for changing the default connection.\n     * @param {function} processCallback This argument is in order to change `onaudioprocess` event handler in the instance of `ScriptProcessorNode`.\n     * @return {MML} This is returned for method chain.\n     */\n    start(part, connects, processCallback) {\n        const p = parseInt(part, 10);\n\n        if ((p >= 0) && (p < this.sequences.length)) {\n            if (!Array.isArray(this.sequences[p])) {\n                return this;\n            }\n\n            // End ?\n            if (this.sequences[p].length === 0) {\n                this.stop(processCallback);\n                this.callbacks.ended();\n\n                return this;\n            }\n\n            const sequence = this.sequences[p].pop();\n\n            if (Array.isArray(this.source)) {\n                for (let i = 0, len = this.source.length; i < len; i++) {\n                    let source = this.source[i];\n\n                    const type   = source.type;\n                    const detune = source.detune.value;\n\n                    source = this.context.createOscillator();\n\n                    // for legacy browsers\n                    source.start = source.start || source.noteOn;\n                    source.stop  = source.stop  || source.noteOff;\n\n                    source.type            = type;\n                    source.frequency.value = sequence.frequencies[i];\n                    source.detune.value    = detune;\n\n                    if (Array.isArray(connects)) {\n                        // OscillatorNode (Input) -> AudioNode -> ... -> AudioNode -> AudioDestinationNode (Output)\n                        source.connect(connects[0]);\n\n                        for (let j = 0, num = connects.length; j < num; j++) {\n                            const node = connects[j];\n\n                            if (j < (num - 1)) {\n                                const next = connects[j + 1];\n\n                                if (!((node instanceof AudioNode) && (next instanceof AudioNode))) {\n                                    return this;\n                                }\n\n                                node.connect(next);\n                            } else {\n                                node.connect(this.context.destination);\n                            }\n                        }\n                    } else {\n                        // OscillatorNode (Input) -> AudioDestinationNode (Output)\n                        source.connect(this.context.destination);\n                    }\n\n                    source.start(this.context.currentTime);\n                    source.stop(this.context.currentTime + sequence.duration);\n\n                    this.source[i] = source;\n                }\n\n                this.callbacks.start(sequence);\n            } else if (this.source instanceof OscillatorModule) {\n                this.source.start(sequence.frequencies, connects, processCallback);\n                this.callbacks.start(sequence);\n            } else if (this.source instanceof OneshotModule) {\n                for (let i = 0, len = sequence.indexes.length; i < len; i++) {\n                    if (sequence.indexes[i] !== MML.REST) {\n                        this.source.start((sequence.indexes[i] + this.offset), connects, processCallback);\n                    }\n                }\n\n                this.callbacks.start(sequence, this.offset);\n            } else if (this.source instanceof NoiseModule) {\n                this.source.start(connects);\n                this.callbacks.start(sequence);\n            }\n\n            this.timerids[p] = window.setTimeout(() => {\n                if (Array.isArray(this.source)) {\n                    this.callbacks.stop(sequence);\n                } else if (this.source instanceof OscillatorModule) {\n                    this.source.stop();\n                    this.callbacks.stop(sequence);\n                } else if (this.source instanceof OneshotModule) {\n                    for (let i = 0, len = sequence.indexes.length; i < len; i++) {\n                        if (sequence.indexes[i] !== MML.REST) {\n                            this.source.stop((sequence.indexes[i] + this.offset), processCallback);\n                        }\n                    }\n\n                    this.callbacks.stop(sequence, this.offset);\n                } else if (this.source instanceof NoiseModule) {\n                    this.source.stop();\n                    this.callbacks.stop(sequence);\n                }\n\n                // for `MML#stop`\n                this.prev = sequence;\n\n                // Start next sound by recursive call\n                this.start(p, connects, processCallback);\n            }, (sequence.duration * 1000));\n        }\n\n        return this;\n    }\n\n    /**\n     * This method stops the all of MML parts.\n     * @param {function} processCallback This argument is in order to change `onaudioprocess` event handler in the instance of `ScriptProcessorNode`.\n     * @return {MML} This is returned for method chain.\n     */\n    stop(processCallback) {\n        const sequence = this.prev;\n\n        if (sequence.length === 0) {\n            return this;\n        }\n\n        if (Array.isArray(this.source)) {\n            this.callbacks.stop(sequence);\n        } else if (this.source instanceof OscillatorModule) {\n            this.source.stop();\n            this.callbacks.stop(sequence);\n        } else if (this.source instanceof OneshotModule) {\n            for (const index of sequence.indexes) {\n                if (index !== MML.REST) {\n                    this.source.stop((index + this.offset), processCallback);\n                }\n            }\n\n            this.callbacks.stop(sequence, this.offset);\n        } else if (this.source instanceof NoiseModule) {\n            this.source.stop();\n            this.callbacks.stop(sequence);\n        }\n\n        for (let i = 0, len = this.timerids.length; i < len; i++) {\n            window.clearTimeout(this.timerids[i]);\n            this.timerids[i] = null;\n        }\n\n        return this;\n    }\n\n    /**\n     * This method gets the array that contains object for playing the MML.\n     * @param {number} index This argument is required in the case of designating sequence.\n     * @return {Array.<Array.<object>>|Array.<object>}\n     */\n    get(index) {\n        const i = parseInt(index, 10);\n\n        return ((i >= 0) && (i < this.sequences.length)) ? this.sequences[i] : this.sequences;\n    }\n\n    /**\n     * This method starts or stops MML according to state.\n     * @param {number} part This argument is the part of MML.\n     * @param {Array.<Effector>} connects This argument is the array for changing the default connection.\n     * @param {function} processCallback This argument is in order to change `onaudioprocess` event handler in the instance of `ScriptProcessorNode`.\n     * @return {MML} This is returned for method chain.\n     */\n    toggle(part, connects, processCallback) {\n        if (this.isPaused()) {\n            this.start(part, connects, processCallback);\n        } else {\n            this.stop();\n        }\n\n        return this;\n    }\n\n    /**\n     * This method determines whether the array that is used to play the MML exists.\n     * @return {boolean} If the array exists, this value is `true`. Otherwise, this value is `false`.\n     */\n    isSequences() {\n        return Array.isArray(this.sequences[0]);\n    }\n\n    /**\n     * This method determines whether the MML is paused.\n     * @return {boolean} If the MML is paused, this value is `true`. Otherwise, this value is `false`.\n     */\n    isPaused() {\n        for (const timerid of this.timerids) {\n            if ((timerid === null) || (timerid === undefined)) {\n                // Next timer\n            } else {\n                // Playing the MML\n                return false;\n            }\n        }\n\n        return true;\n    }\n\n    /**\n     * This method converts MML to ABC Notation.\n     * @param {string} mml This argument is MML string.\n     * @param {number} X This argument is file number in ABC Notation.\n     * @param {string} T This argument is title in ABC Notation.\n     * @param {string} M This argument is beat in ABC Notation.\n     * @param {string} L This argument is note duration in ABC Notation.\n     * @param {string} K This argument is tone in ABC Notation.\n     * @return {string} This is returned as ABC Notation.\n     */\n    toABC(mml, X, T, M, L, K) {\n        let abc = '';\n\n        abc += `X:${X ? X : 1}\\n`;\n        abc += `T:${T ? T : ''}\\n`;\n        abc += `M:${M ? M : '4/4'}\\n`;\n        abc += `L:${L ? L : '1/256'}\\n`;\n        abc += `K:${K ? K : ''}\\n`;\n\n        const notes = mml.match(MML.REGEXP_MML);\n\n        if (notes === null) {\n            return abc;\n        }\n\n        let octave        = null;\n        let totalDuration = 0;\n\n        while (notes.length > 0) {\n            const note = notes.shift().trim();\n\n            if (MML.REGEXP_TEMPO.test(note)) {\n                const Q = parseInt(note.slice(1), 10);\n\n                if (Q > 0) {\n                    abc += `Q:1/4=${Q}\\n`;\n                } else {\n                    return abc;\n                }\n            } else if (MML.REGEXP_OCTAVE.test(note)) {\n                octave = parseInt(note.slice(1), 10);\n\n                if (octave < 0) {\n                    return abc;\n                }\n            } else if (MML.REGEXP_NOTE.test(note)) {\n                if (octave === null) {\n                    return abc;\n                }\n\n                let splittedNotes = null;\n\n                if (note.indexOf('&') === -1) {\n                    splittedNotes = [note];\n                } else {\n                    splittedNotes = note.split('&');\n                }\n\n                let chord = '';\n\n                while (splittedNotes.length > 0) {\n                    const splittedNote = splittedNotes.shift();\n\n                    const duration = parseInt(splittedNote.replace(/^.+?(\\d+)\\.*$/, '$1'), 10);\n\n                    let n = '';\n                    let d = 0;\n\n                    switch (duration) {\n                        case 1:\n                            n = splittedNote.replace('1', '256');\n                            break;\n                        case 2:\n                            n = splittedNote.replace('2', '128');\n                            break;\n                        case 4:\n                            n = splittedNote.replace('4', '64');\n                            break;\n                        case 8:\n                            n = splittedNote.replace('8', '32');\n                            break;\n                        case 16:\n                            n = splittedNote.replace('16', '16');\n                            break;\n                        case 32:\n                            n = splittedNote.replace('32', '8');\n                            break;\n                        case 64:\n                            n = splittedNote.replace('64', '4');\n                            break;\n                        case 128:\n                            n = splittedNote.replace('128', '2');\n                            break;\n                        case 256:\n                            n = splittedNote.replace('256', '1');\n                            break;\n                        // Tuplet\n                        case 6:\n                            n = `(3${splittedNote.replace('6', '128')}`;\n                            d = 128 / 3;\n                            break;\n                        case 12:\n                            n = `(3${splittedNote.replace('12', '64')}`;\n                            d = 64 / 3;\n                            break;\n                        case 18:\n                            n = `(9${splittedNote.replace('18', '128')}`;\n                            d = 128 / 9;\n                            break;\n                        case 24:\n                            n = `(3${splittedNote.replace('24', '32')}`;\n                            d = 32 / 3;\n                            break;\n                        case 36:\n                            n = `(9${splittedNote.replace('36', '64')}`;\n                            d = 64 / 9;\n                            break;\n                        case 48:\n                            n = `(3${splittedNote.replace('48', '16')}`;\n                            d = 16 / 3;\n                            break;\n                        case 72:\n                            n = `(9${splittedNote.replace('72', '32')}`;\n                            d = 32 / 9;\n                            break;\n                        case 96:\n                            n = `(3${splittedNote.replace('96', '8')}`;\n                            d = 8 / 3;\n                            break;\n                        case 144:\n                            n = `(9${splittedNote.replace('144', '16')}`;\n                            d = 16 / 9;\n                            break;\n                        case 192:\n                            n = `(3${splittedNote.replace('192', '4')}`;\n                            d = 4 / 3;\n                            break;\n                        default:\n                            return abc;\n                    }\n\n                    if (n.indexOf('.') !== -1) {\n                        n = n.replace(/^(.+?)\\d+\\.+$/, `$1${1.5 * parseInt(n.replace(/^.+?(\\d+)\\.+$/, '$1'), 10)}`);\n                    }\n\n                    if (n.indexOf('(') === -1) {\n                        totalDuration += parseInt(n.replace(/^.+?(\\d+)\\.*$/i, '$1'), 10);\n                    } else {\n                        totalDuration += d;\n                    }\n\n                    if (totalDuration >= 256) {\n                        n += ' | ';\n                        totalDuration = 0;\n                    }\n\n                    if (/R/i.test(n)) {\n                        abc += `${n} `;\n                        continue;\n                    }\n\n                    let o = '';\n\n                    switch (octave) {\n                        case 0:\n                            o = ',,,,';\n                            break;\n                        case 1:\n                            o = ',,,';\n                            break;\n                        case 2:\n                            o = ',,';\n                            break;\n                        case 3:\n                            o = ',';\n                            break;\n                        case 5:\n                            o = '\\'';\n                            break;\n                        case 6:\n                            o = '\\'\\'';\n                            break;\n                        case 7:\n                            o = '\\'\\'\\'';\n                            break;\n                        case 4 :\n                        default:\n                            break;\n                    }\n\n                    const matches = n.match(/^(\\(\\d+)?((?:[CDEFGAB][#+-]?)+)(.*)$/i);\n\n                    if (matches === null) {\n                        return abc;\n                    }\n\n                    const tuplet      = matches[1] ? matches[1] : '';\n                    const chordLength = matches[2].length;\n                    const restNote    = matches[3] ? matches[3] : '';\n\n                    let start = 0;\n\n                    if (tuplet.length > 0) {\n                        n = n.replace(/^(?:\\(\\d+)?((?:[CDEFGAB][#+-]?)+)(.*)$/i, '$1$2');\n                    }\n\n                    if (chordLength === 1) {\n                        chord += `${tuplet}${n.slice(0, 1)}${o}${restNote}`;\n                    } else if ((chordLength === 2) && /[#+-]/.test(n.charAt(1))) {\n                        chord += `${tuplet}${n.slice(1, 2)}${n.slice(0, 1)}${o}${restNote}`;\n                    } else {\n                        while (start < chordLength) {\n                            if (start === 0) {\n                                chord += `${tuplet}[`;\n                            }\n\n                            if (/[#+-]/.test(n.charAt(start + 1))) {\n                                chord += `${n.slice((start + 1), (start + 2))}${n.slice(start, (start + 1))}${o}`;\n                                start += 2;\n                            } else {\n                                chord += `${n.slice(start, (start + 1))}${o}`;\n                                start++;\n                            }\n\n                            if (start === chordLength) {\n                                chord += `]${restNote}`;\n                            }\n                        }\n                    }\n\n                    if (splittedNotes.length > 0) {\n                        chord += '&';\n                    } else {\n                        abc += `${chord} `;\n                    }\n                }\n            }\n        }\n\n        return abc.replace(/R/gi, 'z')\n            .replace(/[#+]/g, '^')\n            .replace(/-/g, '_')\n            .replace(/&/g, '-')\n            .replace(/\\s{2}/g, ' ');\n    }\n\n    /**\n     * This method clears sequences;\n     */\n    clear() {\n        this.sequences.length = 0;\n        this.timerids.length  = 0;\n        this.prev.length      = 0;\n\n        return this;\n    }\n\n    /** @override */\n    toString() {\n        return '[MML]';\n    }\n}\n","'use strict';\n\n/**\n * This class (static) method gets audio data as `ArrayBuffer` by Ajax.\n * @param {string} url This argument is URL for audio resource.\n * @param {type} string This argument is response type that is one of 'text', 'arraybuffer', 'blob', 'document', 'json'. The default value is 'arraybuffer'.\n * @param {number} timeout This argument is timeout of Ajax. The default value is 60000 msec (1 minutes).\n * @param {function} successCallback This argument is invoked as next process when reading file is successful.\n * @param {function} errorCallback This argument is invoked when error occurred.\n * @param {function} progressCallback This argument is invoked during receiving audio data.\n */\nexport function ajax(url, type, timeout, successCallback, errorCallback, progressCallback) {\n    // The argument is associative array ?\n    if (Object.prototype.toString.call(arguments[0]) === '[object Object]') {\n        const properties = arguments[0];\n\n        if ('url' in properties) {\n            url = properties.url;\n        }\n\n        if ('type' in properties) {\n            type = properties.type;\n        }\n\n        if ('timeout' in properties) {\n            timeout = properties.timeout;\n        }\n\n        if ('success' in properties) {\n            successCallback = properties.success;\n        }\n\n        if ('error' in properties) {\n            errorCallback = properties.error;\n        }\n\n        if ('progress' in properties) {\n            progressCallback = properties.progress;\n        }\n    }\n\n    // for errorCallback\n    const ERROR_AJAX         = 'error';\n    const ERROR_AJAX_TIMEOUT = 'timeout';\n\n    const xhr = new XMLHttpRequest();\n\n    const t = parseInt(timeout, 10);\n\n    xhr.timeout = (t > 0) ? t : 60000;\n\n    xhr.ontimeout = event => {\n        if (Object.prototype.toString.call(errorCallback) === '[object Function]') {\n            errorCallback(event, ERROR_AJAX_TIMEOUT);\n        }\n    };\n\n    xhr.onprogress = event => {\n        if (Object.prototype.toString.call(progressCallback) === '[object Function]') {\n            progressCallback(event);\n        }\n    };\n\n    xhr.onerror = event => {\n        if (Object.prototype.toString.call(errorCallback) === '[object Function]') {\n            errorCallback(event, ERROR_AJAX);\n        }\n    };\n\n    xhr.onload = event => {\n        if ((xhr.status === 200) && (Object.prototype.toString.call(successCallback) === '[object Function]')) {\n            successCallback(event, xhr.response);\n        }\n    };\n\n    xhr.open('GET', url, true);\n    xhr.responseType = /text|arraybuffer|blob|document|json/.test(String(type).toLowerCase()) ? String(type).toLowerCase() : 'arraybuffer';\n    xhr.send(null);\n}\n\n/**\n * This class (static) method calculates minutes and seconds from the designated time in seconds.\n * @param {number} time This argument is the time in seconds.\n * @return {object} This is returned as associative array that contains `minutes`, `seconds` and `milliseconds` keys.\n */\nexport function convertTime(time) {\n    const t = parseFloat(time);\n\n    if (t >= 0) {\n        const m  = Math.floor(t / 60);\n        const s  = Math.floor(t % 60);\n        const ms = t - parseInt(t, 10);\n\n        return {\n            'minutes'      : m,\n            'seconds'      : s,\n            'milliseconds' : ms\n        };\n    }\n}\n\n/**\n * This class (static) method creates the instance of `AudioBuffer` from `ArrayBuffer`.\n * @param {AudioContext} context This argument is the instance of `AudioContext` for `decodeAudioData` method.\n * @param {ArrayBuffer} arrayBuffer This argument is converted to the instance of `AudioBuffer`.\n * @param {function} successCallback This argument is invoked when `decodeAudioData` method is successful.\n       The 1st argument in this callback function is the instance of `AudioBuffer`.\n * @param {function} errorCallback This argument is invoked when `decodeAudioData` method failed.\n * @return {Promise} This is returned as `Promise`.\n */\nexport function decode(context, arrayBuffer, successCallback, errorCallback) {\n    if (!(context instanceof AudioContext)) {\n        return;\n    }\n\n    if (!(arrayBuffer instanceof ArrayBuffer)) {\n        return;\n    }\n\n    if (Object.prototype.toString.call(successCallback) !== '[object Function]') {\n        successCallback = () => {};\n    }\n\n    if (Object.prototype.toString.call(errorCallback) !== '[object Function]') {\n        errorCallback = () => {};\n    }\n\n    return context.decodeAudioData(arrayBuffer, successCallback, errorCallback);\n}\n\n/**\n * This class (static) method shows `Element` in original size from full screen.\n * @return {Promise} This is returned as `Promise`.\n */\nexport function exitFullscreen() {\n    if (document.exitFullscreen) {\n        return document.exitFullscreen();\n    }\n\n    if (document.webkitCancelFullScreen) {\n        return document.webkitCancelFullScreen();\n    }\n\n    if (document.mozCancelFullScreen) {\n        return document.mozCancelFullScreen();\n    }\n\n    if (document.msExitFullscreen) {\n        return document.msExitFullscreen();\n    }\n\n    if (document.cancelFullScreen) {\n        return document.cancelFullScreen();\n    }\n\n    return Promise.reject('Cannot exit from full screen.');\n}\n\n/**\n * This class (static) method gets the instance of `File` (extends `Blob`).\n * @param {Event} event This argument is the instance of Event by Drag & Drop or `<input type=\"file\">`.\n * @param {string} type This argument is one of 'ArrayBuffer', 'DataURL', 'ObjectURL', 'Text'.\n * @param {function} successCallback This argument is invoked as next process when reading file is successful.\n * @param {function} errorCallback This argument is invoked when reading file failed.\n * @param {function} progressCallback This argument is invoked as `onprogress` event handler in the instance of `FileReader`.\n * @return {File|ObjectURL} This is returned as the instance of `File` (extends `Blob`) or Object URL.\n */\nexport function file(event, type, successCallback, errorCallback, progressCallback) {\n    // The argument is associative array ?\n    if (Object.prototype.toString.call(arguments[0]) === '[object Object]') {\n        const properties = arguments[0];\n\n        if ('event' in properties) {\n            event = properties.event;\n        }\n\n        if ('type' in properties) {\n            type = properties.type;\n        }\n\n        if ('success' in properties) {\n            successCallback = properties.success;\n        }\n\n        if ('error' in properties) {\n            errorCallback = properties.error;\n        }\n\n        if ('progress' in properties) {\n            progressCallback = properties.progress;\n        }\n    }\n\n    if (!(event instanceof Event)) {\n        return;\n    }\n\n    // for the instance of `File` (extends `Blob`)\n    let file = null;\n\n    if (event.type === 'drop') {\n        // Drag & Drop\n        event.stopPropagation();\n        event.preventDefault();\n\n        file = /* ('items' in event.dataTransfer) ? event.dataTransfer.items[0].getAsFile() : */event.dataTransfer.files[0];\n    } else if ((event.type === 'change') && ('files' in event.target)) {\n        // `<input type=\"file\">`\n        file = event.target.files[0];\n    } else {\n        return;\n    }\n\n    if (!(file instanceof File)) {\n        throw new Error('Please upload file.');\n    } else if ((/text/i.test(type)) && (file.type.indexOf('text') === -1)) {\n        throw new Error('Please upload text file.');\n    } else if ((/arraybuffer|dataurl/i.test(type)) && !/audio|video/.test(file.type)) {\n        throw new Error('Please upload audio or video file.');\n    } else {\n        if (/objecturl/i.test(type)) {\n            return window.URL.createObjectURL(file);\n        }\n\n        read({\n            'file'     : file,\n            'type'     : type,\n            'success'  : successCallback,\n            'error'    : errorCallback,\n            'progress' : progressCallback\n        });\n\n        return file;\n    }\n}\n\n/**\n * This class (static) method reads file of audio or text.\n * @param {Blob} file This argument is the instance of `Blob`. This is entity of file.\n * @param {string} type This argument is one of 'ArrayBuffer', 'DataURL', 'Text'.\n * @param {function} successCallback This argument is invoked as next process when reading file is successful.\n * @param {function} errorCallback This argument is invoked when reading file failed.\n * @param {function} progressCallback This argument is invoked as `onprogress` event handler in the instance of `FileReader`.\n */\nexport function read(file, type, successCallback, errorCallback, progressCallback) {\n    // The argument is associative array ?\n    if (Object.prototype.toString.call(arguments[0]) === '[object Object]') {\n        const properties = arguments[0];\n\n        if ('file' in properties) {\n            file = properties.file;\n        }\n\n        if ('type' in properties) {\n            type = properties.type;\n        }\n\n        if ('success' in properties) {\n            successCallback = properties.success;\n        }\n\n        if ('error' in properties) {\n            errorCallback = properties.error;\n        }\n\n        if ('progress' in properties) {\n            progressCallback = properties.progress;\n        }\n    }\n\n    if (!(file instanceof Blob)) {\n        if (Object.prototype.toString.call(errorCallback) === '[object Function]') {\n            errorCallback(null, 'FILE_IS_NOT_BLOB');\n        }\n\n        return;\n    }\n\n    const reader = new FileReader();\n\n    reader.onprogress = event => {\n        if (Object.prototype.toString.call(progressCallback) === '[object Function]') {\n            progressCallback(event);\n        }\n    };\n\n    reader.onerror = event => {\n        if (Object.prototype.toString.call(errorCallback) === '[object Function]') {\n            let error = '';\n\n            switch (reader.error.code) {\n                case reader.error.NOT_FOUND_ERR:\n                    error = 'NOT_FOUND_ERR';\n                    break;\n                case reader.error.SECURITY_ERR:\n                    error = 'SECURITY_ERR';\n                    break;\n                case reader.error.ABORT_ERR:\n                    error = 'ABORT_ERR';\n                    break;\n                case reader.error.NOT_READABLE_ERR:\n                    error = 'NOT_READABLE_ERR';\n                    break;\n                case reader.error.ENCODING_ERR:\n                    error = 'ENCODING_ERR';\n                    break;\n                default:\n                    error = 'ERR';\n                    break;\n            }\n\n            errorCallback(event, error);\n        }\n    };\n\n    reader.onload = event => {\n        if (Object.prototype.toString.call(successCallback) === '[object Function]') {\n            let result = reader.result;\n\n            // Escape `<script>` in the case of text\n            if ((typeof result === 'string') && (result.indexOf('data:') === -1) && (result.indexOf('blob:') === -1)) {\n                result = result.replace(/<(\\/?script.*?)>/gi, '&lt;$1&gt;');\n            }\n\n            successCallback(event, result);\n        }\n    };\n\n    if (/arraybuffer/i.test(type)) {\n        reader.readAsArrayBuffer(file);\n    } else if (/dataurl/i.test(type)) {\n        reader.readAsDataURL(file);\n    } else if (/text/i.test(type)) {\n        reader.readAsText(file, 'UTF-8');\n    }\n}\n\n/**\n * This class (static) method shows the designated `Element` in full screen.\n * @param {Element} element This argument is the instance of `Element` that is the target of full screen.\n * @return {Promise} This is returned as `Promise`.\n */\nexport function requestFullscreen(element) {\n    if (!(element instanceof Element)) {\n        return Promise.reject('Invalid argument.');\n    }\n\n    if (element.requestFullscreen) {\n        return element.requestFullscreen();\n    }\n\n    if (element.webkitRequestFullscreen) {\n        return element.webkitRequestFullscreen();\n    }\n\n    if (element.mozRequestFullScreen) {\n        return element.mozRequestFullScreen();\n    }\n\n    if (element.msRequestFullscreen) {\n        return element.msRequestFullscreen();\n    }\n\n    return Promise.reject('Cannot change to full screen.');\n}\n\n/**\n * This class (static) method calculates frequency from the index that corresponds to the 12 equal temperament.\n * @param {Array.<number>} indexes This argument is array of index that corresponds to the 12 equal temperament.\n *     For example, This value is between 0 and 88 in the case of piano.\n * @return {Array.<number>} This is returned as array that contains frequencies.\n */\nexport function toFrequencies(indexes) {\n    // The 12 equal temperament\n    //\n    // Min -> 27.5 Hz (A), Max -> 4186 Hz (C)\n    //\n    // A * 1.059463 -> A# (half up)\n\n    const FREQUENCY_RATIO = Math.pow(2, (1 / 12));  // about 1.059463\n    const MIN_A           = 27.5;\n\n    if (!Array.isArray(indexes)) {\n        indexes = [indexes];\n    }\n\n    const frequencies = new Array(indexes.length);\n\n    for (let i = 0, len = indexes.length; i < len; i++) {\n        const index = parseInt(indexes[i], 10);\n\n        frequencies[i] = (index >= 0) ? (MIN_A * Math.pow(FREQUENCY_RATIO, index)) : 0;\n    }\n\n    return frequencies;\n}\n\n/**\n * This class (static) method creates text file.\n * @param {string} text This argument is string.\n * @return {string} This is returned as text file.\n */\nexport function toTextFile(text) {\n    /**\n     * This function converts string to ASCII string.\n     * @param {string} string This argument is string.\n     * @return {string} This is returned as string that is converted to ASCII string.\n     */\n    const toAscii = string => {\n        let converted = '';\n\n        for (let i = 0, len = string.length; i < len; i++) {\n            const charCode = string.charCodeAt(i);\n\n            if (charCode > 0xFF) {\n                converted += `&#${charCode};`;\n            } else {\n                converted += string.charAt(i);\n            }\n        }\n\n        return converted;\n    };\n\n    const base64  = window.btoa(toAscii(String(text)));\n    const dataURL = `data:text/plain;base64,${base64}`;\n\n    return dataURL;\n}\n","'use strict';\n\nimport { SoundModule } from './SoundModule';\nimport { OscillatorModule } from './OscillatorModule';\nimport { OneshotModule } from './OneshotModule';\nimport { NoiseModule } from './NoiseModule';\nimport { AudioModule } from './AudioModule';\nimport { MediaModule } from './MediaModule';\nimport { StreamModule } from './StreamModule';\nimport { MixerModule } from './MixerModule';\nimport { ProcessorModule } from './ProcessorModule';\nimport { MIDI } from './MIDI';\nimport { MML } from './MML';\nimport { Effector } from './SoundModule/Effectors/Effector';\nimport {\n    ajax,\n    convertTime,\n    decode,\n    exitFullscreen,\n    file,\n    requestFullscreen,\n    read,\n    toFrequencies,\n    toTextFile\n} from './XSound';\n\nconst global = (typeof window !== 'undefined') ? window : {};\n\n// for legacy browsers\nglobal.AudioContext = global.AudioContext || global.webkitAudioContext;\nglobal.MediaSource  = global.MediaSource  || global.WebkitMediaSource;\nglobal.URL          = global.URL          || global.webkitURL || global.mozURL;\n\nglobal.requestAnimationFrame = global.requestAnimationFrame       ||\n                               global.webkitRequestAnimationFrame ||\n                               global.mozRequestAnimationFrame    ||\n                               (callback => global.setTimeout(callback, (1000 / 60)));\n\nglobal.cancelAnimationFrame = global.cancelAnimationFrame       ||\n                              global.webkitCancelAnimationFrame ||\n                              global.mozCancelAnimationFrame    ||\n                              global.clearTimeout;\n\nlet XSound;\n\nconst IS_XSOUND = Boolean(global.AudioContext);\n\nif (IS_XSOUND) {\n    const audiocontext = new AudioContext();\n\n    // for legacy browsers\n    audiocontext.createScriptProcessor = audiocontext.createScriptProcessor || audiocontext.createJavaScriptNode;\n    audiocontext.createGain            = audiocontext.createGain            || audiocontext.createGainNode;\n    audiocontext.createDelay           = audiocontext.createDelay           || audiocontext.createDelayNode;\n    audiocontext.createPeriodicWave    = audiocontext.createPeriodicWave    || audiocontext.createWaveTable;\n\n    const sources = {\n        'oscillator' : new OscillatorModule(audiocontext),\n        'oneshot'    : new OneshotModule(audiocontext),\n        'noise'      : new NoiseModule(audiocontext),\n        'audio'      : new AudioModule(audiocontext),\n        'media'      : new MediaModule(audiocontext),\n        'stream'     : new StreamModule(audiocontext),\n        'mixer'      : new MixerModule(audiocontext),\n        'processor'  : new ProcessorModule(audiocontext),\n        'midi'       : new MIDI(audiocontext),\n        'mml'        : new MML(audiocontext)\n    };\n\n    /**\n     * This function is global object for getting the instance of `OscillatorModule` or `OneshotModule` or `NoiseModule` or `AudioModule` or `MediaModule` or `StreamModule` or `MixerModule` or `ProcessorModule` or `MIDI` or `MML` or `Oscillator`.\n     * @param {string} source This argument is one of 'oscillator', 'oneshot', 'noise', 'audio', 'media', 'stream', 'mixer', 'processor', 'midi', 'mml'.\n     * @param {number} index This argument is in order to select one of some oscillators.\n     * @return {OscillatorModule|OneshotModule|NoiseModule|AudioModule|MediaModule|StreamModule|MixerModule|ProcessorModule|MIDI|MML|Oscillator}\n     */\n    XSound = (source, index) => {\n        const s = String(source).replace(/-/g, '').toLowerCase();\n\n        switch (s) {\n            case 'oscillator':\n                if (index === undefined) {\n                    return sources.oscillator;\n                }\n\n                const i = parseInt(index, 10);\n\n                if ((i >= 0) && (i < sources.oscillator.length())) {\n                    return sources.oscillator.get(i);\n                }\n\n                return null;\n            case 'oneshot'  :\n            case 'noise'    :\n            case 'audio'    :\n            case 'media'    :\n            case 'stream'   :\n            case 'mixer'    :\n            case 'processor':\n            case 'midi'     :\n            case 'mml'      :\n                return sources[s];\n            default :\n                return null;\n        }\n    };\n\n    /**\n     * Class (Static) properties\n     */\n    XSound.IS_XSOUND         = IS_XSOUND;\n    XSound.SAMPLE_RATE       = audiocontext.sampleRate;\n    XSound.NUMBER_OF_INPUTS  = SoundModule.NUMBER_OF_INPUTS;\n    XSound.NUMBER_OF_OUTPUTS = SoundModule.NUMBER_OF_OUTPUTS;\n    XSound.ajax              = ajax;\n    XSound.convertTime       = convertTime;\n    XSound.decode            = decode;\n    XSound.exitFullscreen    = exitFullscreen;\n    XSound.file              = file;\n    XSound.requestFullscreen = requestFullscreen;\n    XSound.read              = read;\n    XSound.toFrequencies     = toFrequencies;\n    XSound.toTextFile        = toTextFile;\n\n    XSound.Effector = Effector;\n\n    /**\n     * This class (static) method changes state ('running') of `AudioContext`.\n     * The initial state is 'suspended' by Autoplay Policy Change.\n     * Therefore, this method must be invoked by user gestures.\n     * @return {Promise} This is returned as `Promise`.\n     */\n    XSound.setup = () => {\n        if (audiocontext.state !== 'running') {\n            return audiocontext.resume();\n        }\n\n        return Promise.reject();\n    };\n\n    /**\n     * This class (static) method returns function as closure that is getter of cloned module.\n     * @return {function} This is returned as closure that is getter of cloned module.\n     */\n    XSound.clone = () => {\n        const clones = {\n            'oscillator' : new OscillatorModule(audiocontext),\n            'oneshot'    : new OneshotModule(audiocontext),\n            'noise'      : new NoiseModule(audiocontext),\n            'audio'      : new AudioModule(audiocontext),\n            'media'      : new MediaModule(audiocontext),\n            'stream'     : new StreamModule(audiocontext),\n            'mixer'      : new MixerModule(audiocontext),\n            'processor'  : new ProcessorModule(audiocontext),\n            'midi'       : new MIDI(audiocontext),\n            'mml'        : new MML(audiocontext)\n        };\n\n        const C = (source, index) => {\n            const s = String(source).replace(/-/g, '').toLowerCase();\n\n            switch (s) {\n                case 'oscillator':\n                    if (index === undefined) {\n                        return clones.oscillator;\n                    }\n\n                    const i = parseInt(index, 10);\n\n                    if ((i >= 0) && (i < clones.oscillator.length())) {\n                        return clones.oscillator.get(i);\n                    }\n\n                    return null;\n                case 'oneshot'  :\n                case 'noise'    :\n                case 'audio'    :\n                case 'media'    :\n                case 'stream'   :\n                case 'mixer'    :\n                case 'processor':\n                case 'midi'     :\n                case 'mml'      :\n                    return clones[s];\n                default :\n                    return null;\n            }\n        };\n\n        C.free  = sourceList => {\n            if (!Array.isArray(sourceList)) {\n                sourceList = [sourceList];\n            }\n\n            for (const source of sourceList) {\n                // Already deleted ?\n                if (source === null) {\n                    continue;\n                }\n\n                for (const key in clones) {\n                    if (source === clones[key]) {\n                        clones[key] = null;\n                    }\n                }\n            }\n        };\n\n        // Closure\n        return C;\n    };\n\n    /**\n     * This class (static) method releases memory of unnecessary instances.\n     * @param {Array.<SoundModule|MIDI|MML>} sourceList This argument is the array that contains the instances of `SoundModule` or `MIDI` or `MML`.\n     */\n    XSound.free = sourceList => {\n        if (!Array.isArray(sourceList)) {\n            sourceList = [sourceList];\n        }\n\n        for (const source of sourceList) {\n            // Already deleted ?\n            if (source === null) {\n                continue;\n            }\n\n            for (const key in sources) {\n                if (source === sources[key]) {\n                    sources[key] = null;\n                }\n            }\n        }\n    };\n\n    /**\n     * This class (static) method removes one of the global objects or both of the global objects.\n     * @param {boolean} deep This argument is in order to select whether removing both of global objects.\n     *     If this value is `true`, both of global objects are removed.\n     * @return {XSound}\n     */\n    XSound.noConflict = deep => {\n        if (window.X === XSound) {\n            window.X = undefined;\n        }\n\n        // both of global objects are removed ?\n        if (deep && (window.XSound === XSound)) {\n            window.XSound = undefined;\n        }\n\n        return XSound;\n    };\n\n    /**\n     * This class (static) method gets the instance of `AudioContext`.\n     * @return {AudioContext}\n     */\n    XSound.get = () => {\n        return audiocontext;\n    };\n\n    /**\n     * This class (static) method gets `currentTime` property in the instance of `AudioContext`.\n     * @return {number}\n     */\n    XSound.getCurrentTime = () => {\n        return audiocontext.currentTime;\n    };\n\n    /** @override */\n    XSound.toString = () => {\n        return '[XSound]';\n    };\n\n    // for Autoplay Policy\n    const setup = () => {\n        XSound.setup().then(() => {}).catch(() => {});\n\n        document.removeEventListener('click',      setup, true);\n        document.removeEventListener('mousedown',  setup, true);\n        document.removeEventListener('mouseup',    setup, true);\n        document.removeEventListener('touchstart', setup, true);\n        document.removeEventListener('touchend',   setup, true);\n    };\n\n    document.addEventListener('click',      setup, true);\n    document.addEventListener('mousedown',  setup, true);\n    document.addEventListener('mouseup',    setup, true);\n    document.addEventListener('touchstart', setup, true);\n    document.addEventListener('touchend',   setup, true);\n} else {\n    XSound = () => null;\n\n    XSound.IS_XSOUND = IS_XSOUND;\n}\n\n// for `<script>`\nglobal.XSound = XSound;\nglobal.X      = XSound;  // Alias of `XSound`\n\n// for ESModules and SSR (Server Side Rendering)\nif (typeof exports !== 'undefined') {\n    exports.XSound = XSound;\n    exports.X      = XSound;  // Alias of `XSound`\n}\n"],"sourceRoot":""}